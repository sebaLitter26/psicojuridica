(self.webpackChunkclient=self.webpackChunkclient||[]).push([[457],{5457:(J,m,D)=>{"use strict";D.r(m),D.d(m,{BlogDetailRoutes:()=>Yt});var h=D(3953);function a(oe,R){const A=!R?.manualCleanup;A&&!R?.injector&&(0,h.Af3)(a);const x=A?R?.injector?.get(h.abz)??(0,h.WQX)(h.abz):null,W=function r(oe=Object.is){return(R,A)=>1===R.kind&&1===A.kind&&oe(R.value,A.value)}(R?.equal);let K;K=(0,h.vPA)(R?.requireSync?{kind:0}:{kind:1,value:R?.initialValue},{equal:W});const Q=oe.subscribe({next:ue=>K.set({kind:1,value:ue}),error:ue=>{if(R?.rejectErrors)throw ue;K.set({kind:2,error:ue})}});if(R?.requireSync&&0===K().kind)throw new h.wOt(601,!1);return x?.onDestroy(Q.unsubscribe.bind(Q)),(0,h.EWP)(()=>{const ue=K();switch(ue.kind){case 1:return ue.value;case 2:throw ue.error;case 0:throw new h.wOt(601,!1)}},{equal:R?.equal})}var t=D(1742),n=D(177),p=D(9545),l=D(462),e=D(7051),i=D(6369),o=D(5020);let c=(()=>{class oe{static#e=this.\u0275fac=function(x){return new(x||oe)};static#t=this.\u0275mod=h.$C({type:oe});static#n=this.\u0275inj=h.G2t({})}return oe})();var w=D(9878),S=D(345);let u=(()=>{class oe{constructor(){this.sanitizer=(0,h.WQX)(S.up)}transform(A,x){switch(x){case"html":return this.sanitizer.bypassSecurityTrustHtml(A);case"style":return this.sanitizer.bypassSecurityTrustStyle(A);case"script":return this.sanitizer.bypassSecurityTrustScript(A);case"url":return this.sanitizer.bypassSecurityTrustUrl(A);case"resourceUrl":return this.sanitizer.bypassSecurityTrustResourceUrl(A);default:throw new Error(`Invalid safe type specified: ${x}`)}}static#e=this.\u0275fac=function(x){return new(x||oe)};static#t=this.\u0275pipe=h.EJ8({name:"safe",type:oe,pure:!0})}return oe})();let d={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function E(oe){d=oe}const T=/[&<>"']/,U=new RegExp(T.source,"g"),C=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,$=new RegExp(C.source,"g"),j={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},q=oe=>j[oe];function se(oe,R){if(R){if(T.test(oe))return oe.replace(U,q)}else if(C.test(oe))return oe.replace($,q);return oe}const te=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,y=/(^|[^\[])\^/g;function s(oe,R){let A="string"==typeof oe?oe:oe.source;R=R||"";const x={replace:(W,K)=>{let Q="string"==typeof K?K:K.source;return Q=Q.replace(y,"$1"),A=A.replace(W,Q),x},getRegex:()=>new RegExp(A,R)};return x}function f(oe){try{oe=encodeURI(oe).replace(/%25/g,"%")}catch{return null}return oe}const _={exec:()=>null};function b(oe,R){const x=oe.replace(/\|/g,(K,Q,ue)=>{let _e=!1,Se=Q;for(;--Se>=0&&"\\"===ue[Se];)_e=!_e;return _e?"|":" |"}).split(/ \|/);let W=0;if(x[0].trim()||x.shift(),x.length>0&&!x[x.length-1].trim()&&x.pop(),R)if(x.length>R)x.splice(R);else for(;x.length<R;)x.push("");for(;W<x.length;W++)x[W]=x[W].trim().replace(/\\\|/g,"|");return x}function M(oe,R,A){const x=oe.length;if(0===x)return"";let W=0;for(;W<x;){const K=oe.charAt(x-W-1);if(K!==R||A){if(K===R||!A)break;W++}else W++}return oe.slice(0,x-W)}function I(oe,R,A,x){const W=R.href,K=R.title?se(R.title):null,Q=oe[1].replace(/\\([\[\]])/g,"$1");if("!"!==oe[0].charAt(0)){x.state.inLink=!0;const ue={type:"link",raw:A,href:W,title:K,text:Q,tokens:x.inlineTokens(Q)};return x.state.inLink=!1,ue}return{type:"image",raw:A,href:W,title:K,text:se(Q)}}class P{options;rules;lexer;constructor(R){this.options=R||d}space(R){const A=this.rules.block.newline.exec(R);if(A&&A[0].length>0)return{type:"space",raw:A[0]}}code(R){const A=this.rules.block.code.exec(R);if(A){const x=A[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:A[0],codeBlockStyle:"indented",text:this.options.pedantic?x:M(x,"\n")}}}fences(R){const A=this.rules.block.fences.exec(R);if(A){const x=A[0],W=function g(oe,R){const A=oe.match(/^(\s+)(?:```)/);if(null===A)return R;const x=A[1];return R.split("\n").map(W=>{const K=W.match(/^\s+/);if(null===K)return W;const[Q]=K;return Q.length>=x.length?W.slice(x.length):W}).join("\n")}(x,A[3]||"");return{type:"code",raw:x,lang:A[2]?A[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):A[2],text:W}}}heading(R){const A=this.rules.block.heading.exec(R);if(A){let x=A[2].trim();if(/#$/.test(x)){const W=M(x,"#");(this.options.pedantic||!W||/ $/.test(W))&&(x=W.trim())}return{type:"heading",raw:A[0],depth:A[1].length,text:x,tokens:this.lexer.inline(x)}}}hr(R){const A=this.rules.block.hr.exec(R);if(A)return{type:"hr",raw:A[0]}}blockquote(R){const A=this.rules.block.blockquote.exec(R);if(A){const x=M(A[0].replace(/^ *>[ \t]?/gm,""),"\n"),W=this.lexer.state.top;this.lexer.state.top=!0;const K=this.lexer.blockTokens(x);return this.lexer.state.top=W,{type:"blockquote",raw:A[0],tokens:K,text:x}}}list(R){let A=this.rules.block.list.exec(R);if(A){let x=A[1].trim();const W=x.length>1,K={type:"list",raw:"",ordered:W,start:W?+x.slice(0,-1):"",loose:!1,items:[]};x=W?`\\d{1,9}\\${x.slice(-1)}`:`\\${x}`,this.options.pedantic&&(x=W?x:"[*+-]");const Q=new RegExp(`^( {0,3}${x})((?:[\t ][^\\n]*)?(?:\\n|$))`);let ue="",_e="",Se=!1;for(;R;){let Ae=!1;if(!(A=Q.exec(R))||this.rules.block.hr.test(R))break;ue=A[0],R=R.substring(ue.length);let Pe=A[2].split("\n",1)[0].replace(/^\t+/,gt=>" ".repeat(3*gt.length)),Ee=R.split("\n",1)[0],ke=0;this.options.pedantic?(ke=2,_e=Pe.trimStart()):(ke=A[2].search(/[^ ]/),ke=ke>4?1:ke,_e=Pe.slice(ke),ke+=A[1].length);let st=!1;if(!Pe&&/^ *$/.test(Ee)&&(ue+=Ee+"\n",R=R.substring(Ee.length+1),Ae=!0),!Ae){const gt=new RegExp(`^ {0,${Math.min(3,ke-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),vt=new RegExp(`^ {0,${Math.min(3,ke-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),At=new RegExp(`^ {0,${Math.min(3,ke-1)}}(?:\`\`\`|~~~)`),yt=new RegExp(`^ {0,${Math.min(3,ke-1)}}#`);for(;R;){const mt=R.split("\n",1)[0];if(Ee=mt,this.options.pedantic&&(Ee=Ee.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),At.test(Ee)||yt.test(Ee)||gt.test(Ee)||vt.test(R))break;if(Ee.search(/[^ ]/)>=ke||!Ee.trim())_e+="\n"+Ee.slice(ke);else{if(st||Pe.search(/[^ ]/)>=4||At.test(Pe)||yt.test(Pe)||vt.test(Pe))break;_e+="\n"+Ee}!st&&!Ee.trim()&&(st=!0),ue+=mt+"\n",R=R.substring(mt.length+1),Pe=Ee.slice(ke)}}K.loose||(Se?K.loose=!0:/\n *\n *$/.test(ue)&&(Se=!0));let lt,qe=null;this.options.gfm&&(qe=/^\[[ xX]\] /.exec(_e),qe&&(lt="[ ] "!==qe[0],_e=_e.replace(/^\[[ xX]\] +/,""))),K.items.push({type:"list_item",raw:ue,task:!!qe,checked:lt,loose:!1,text:_e,tokens:[]}),K.raw+=ue}K.items[K.items.length-1].raw=ue.trimEnd(),K.items[K.items.length-1].text=_e.trimEnd(),K.raw=K.raw.trimEnd();for(let Ae=0;Ae<K.items.length;Ae++)if(this.lexer.state.top=!1,K.items[Ae].tokens=this.lexer.blockTokens(K.items[Ae].text,[]),!K.loose){const Pe=K.items[Ae].tokens.filter(ke=>"space"===ke.type),Ee=Pe.length>0&&Pe.some(ke=>/\n.*\n/.test(ke.raw));K.loose=Ee}if(K.loose)for(let Ae=0;Ae<K.items.length;Ae++)K.items[Ae].loose=!0;return K}}html(R){const A=this.rules.block.html.exec(R);if(A)return{type:"html",block:!0,raw:A[0],pre:"pre"===A[1]||"script"===A[1]||"style"===A[1],text:A[0]}}def(R){const A=this.rules.block.def.exec(R);if(A){const x=A[1].toLowerCase().replace(/\s+/g," "),W=A[2]?A[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",K=A[3]?A[3].substring(1,A[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):A[3];return{type:"def",tag:x,raw:A[0],href:W,title:K}}}table(R){const A=this.rules.block.table.exec(R);if(!A||!/[:|]/.test(A[2]))return;const x=b(A[1]),W=A[2].replace(/^\||\| *$/g,"").split("|"),K=A[3]&&A[3].trim()?A[3].replace(/\n[ \t]*$/,"").split("\n"):[],Q={type:"table",raw:A[0],header:[],align:[],rows:[]};if(x.length===W.length){for(const ue of W)/^ *-+: *$/.test(ue)?Q.align.push("right"):/^ *:-+: *$/.test(ue)?Q.align.push("center"):/^ *:-+ *$/.test(ue)?Q.align.push("left"):Q.align.push(null);for(const ue of x)Q.header.push({text:ue,tokens:this.lexer.inline(ue)});for(const ue of K)Q.rows.push(b(ue,Q.header.length).map(_e=>({text:_e,tokens:this.lexer.inline(_e)})));return Q}}lheading(R){const A=this.rules.block.lheading.exec(R);if(A)return{type:"heading",raw:A[0],depth:"="===A[2].charAt(0)?1:2,text:A[1],tokens:this.lexer.inline(A[1])}}paragraph(R){const A=this.rules.block.paragraph.exec(R);if(A){const x="\n"===A[1].charAt(A[1].length-1)?A[1].slice(0,-1):A[1];return{type:"paragraph",raw:A[0],text:x,tokens:this.lexer.inline(x)}}}text(R){const A=this.rules.block.text.exec(R);if(A)return{type:"text",raw:A[0],text:A[0],tokens:this.lexer.inline(A[0])}}escape(R){const A=this.rules.inline.escape.exec(R);if(A)return{type:"escape",raw:A[0],text:se(A[1])}}tag(R){const A=this.rules.inline.tag.exec(R);if(A)return!this.lexer.state.inLink&&/^<a /i.test(A[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(A[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(A[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(A[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:A[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:A[0]}}link(R){const A=this.rules.inline.link.exec(R);if(A){const x=A[2].trim();if(!this.options.pedantic&&/^</.test(x)){if(!/>$/.test(x))return;const Q=M(x.slice(0,-1),"\\");if((x.length-Q.length)%2==0)return}else{const Q=function O(oe,R){if(-1===oe.indexOf(R[1]))return-1;let A=0;for(let x=0;x<oe.length;x++)if("\\"===oe[x])x++;else if(oe[x]===R[0])A++;else if(oe[x]===R[1]&&(A--,A<0))return x;return-1}(A[2],"()");if(Q>-1){const _e=(0===A[0].indexOf("!")?5:4)+A[1].length+Q;A[2]=A[2].substring(0,Q),A[0]=A[0].substring(0,_e).trim(),A[3]=""}}let W=A[2],K="";if(this.options.pedantic){const Q=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(W);Q&&(W=Q[1],K=Q[3])}else K=A[3]?A[3].slice(1,-1):"";return W=W.trim(),/^</.test(W)&&(W=this.options.pedantic&&!/>$/.test(x)?W.slice(1):W.slice(1,-1)),I(A,{href:W&&W.replace(this.rules.inline.anyPunctuation,"$1"),title:K&&K.replace(this.rules.inline.anyPunctuation,"$1")},A[0],this.lexer)}}reflink(R,A){let x;if((x=this.rules.inline.reflink.exec(R))||(x=this.rules.inline.nolink.exec(R))){const K=A[(x[2]||x[1]).replace(/\s+/g," ").toLowerCase()];if(!K){const Q=x[0].charAt(0);return{type:"text",raw:Q,text:Q}}return I(x,K,x[0],this.lexer)}}emStrong(R,A,x=""){let W=this.rules.inline.emStrongLDelim.exec(R);if(!(!W||W[3]&&x.match(/[\p{L}\p{N}]/u))&&(!W[1]&&!W[2]||!x||this.rules.inline.punctuation.exec(x))){const Q=[...W[0]].length-1;let ue,_e,Se=Q,Ae=0;const Pe="*"===W[0][0]?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(Pe.lastIndex=0,A=A.slice(-1*R.length+Q);null!=(W=Pe.exec(A));){if(ue=W[1]||W[2]||W[3]||W[4]||W[5]||W[6],!ue)continue;if(_e=[...ue].length,W[3]||W[4]){Se+=_e;continue}if((W[5]||W[6])&&Q%3&&!((Q+_e)%3)){Ae+=_e;continue}if(Se-=_e,Se>0)continue;_e=Math.min(_e,_e+Se+Ae);const Ee=[...W[0]][0].length,ke=R.slice(0,Q+W.index+Ee+_e);if(Math.min(Q,_e)%2){const qe=ke.slice(1,-1);return{type:"em",raw:ke,text:qe,tokens:this.lexer.inlineTokens(qe)}}const st=ke.slice(2,-2);return{type:"strong",raw:ke,text:st,tokens:this.lexer.inlineTokens(st)}}}}codespan(R){const A=this.rules.inline.code.exec(R);if(A){let x=A[2].replace(/\n/g," ");const W=/[^ ]/.test(x),K=/^ /.test(x)&&/ $/.test(x);return W&&K&&(x=x.substring(1,x.length-1)),x=se(x,!0),{type:"codespan",raw:A[0],text:x}}}br(R){const A=this.rules.inline.br.exec(R);if(A)return{type:"br",raw:A[0]}}del(R){const A=this.rules.inline.del.exec(R);if(A)return{type:"del",raw:A[0],text:A[2],tokens:this.lexer.inlineTokens(A[2])}}autolink(R){const A=this.rules.inline.autolink.exec(R);if(A){let x,W;return"@"===A[2]?(x=se(A[1]),W="mailto:"+x):(x=se(A[1]),W=x),{type:"link",raw:A[0],text:x,href:W,tokens:[{type:"text",raw:x,text:x}]}}}url(R){let A;if(A=this.rules.inline.url.exec(R)){let x,W;if("@"===A[2])x=se(A[0]),W="mailto:"+x;else{let K;do{K=A[0],A[0]=this.rules.inline._backpedal.exec(A[0])?.[0]??""}while(K!==A[0]);x=se(A[0]),W="www."===A[1]?"http://"+A[0]:A[0]}return{type:"link",raw:A[0],text:x,href:W,tokens:[{type:"text",raw:x,text:x}]}}}inlineText(R){const A=this.rules.inline.text.exec(R);if(A){let x;return x=this.lexer.state.inRawBlock?A[0]:se(A[0]),{type:"text",raw:A[0],text:x}}}}const H=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,ee=/(?:[*+-]|\d{1,9}[.)])/,fe=s(/^(?!bull )((?:.|\n(?!\s*?\n|bull ))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,ee).getRegex(),re=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,de=/(?!\s*\])(?:\\.|[^\[\]\\])+/,X=s(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",de).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),ne=s(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,ee).getRegex(),he="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",le=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,pe=s("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",le).replace("tag",he).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),me=s(re).replace("hr",H).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",he).getRegex(),ye={blockquote:s(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",me).getRegex(),code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,def:X,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:H,html:pe,lheading:fe,list:ne,newline:/^(?: *(?:\n|$))+/,paragraph:me,table:_,text:/^[^\n]+/},xe=s("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",H).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",he).getRegex(),Ce={...ye,table:xe,paragraph:s(re).replace("hr",H).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",xe).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",he).getRegex()},Be={...ye,html:s("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",le).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:_,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:s(re).replace("hr",H).replace("heading"," *#{1,6} *[^\n]").replace("lheading",fe).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Ie=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Qe=/^( {2,}|\\)\n(?!\s*$)/,je="\\p{P}$+<=>`^|~",ge=s(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,je).getRegex(),ie=s(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,je).getRegex(),be=s("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,je).getRegex(),we=s("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,je).getRegex(),Me=s(/\\([punct])/,"gu").replace(/punct/g,je).getRegex(),Le=s(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),We=s(le).replace("(?:--\x3e|$)","--\x3e").getRegex(),He=s("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",We).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Ve=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Ne=s(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Ve).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Ge=s(/^!?\[(label)\]\[(ref)\]/).replace("label",Ve).replace("ref",de).getRegex(),ze=s(/^!?\[(ref)\](?:\[\])?/).replace("ref",de).getRegex(),Re={_backpedal:_,anyPunctuation:Me,autolink:Le,blockSkip:/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,br:Qe,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:_,emStrongLDelim:ie,emStrongRDelimAst:be,emStrongRDelimUnd:we,escape:Ie,link:Ne,nolink:ze,punctuation:ge,reflink:Ge,reflinkSearch:s("reflink|nolink(?!\\()","g").replace("reflink",Ge).replace("nolink",ze).getRegex(),tag:He,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:_},et={...Re,link:s(/^!?\[(label)\]\((.*?)\)/).replace("label",Ve).getRegex(),reflink:s(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Ve).getRegex()},tt={...Re,escape:s(Ie).replace("])","~|])").getRegex(),url:s(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},ct={...tt,br:s(Qe).replace("{2,}","*").getRegex(),text:s(tt.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},nt={normal:ye,gfm:Ce,pedantic:Be},$e={normal:Re,gfm:tt,breaks:ct,pedantic:et};class Fe{tokens;options;state;tokenizer;inlineQueue;constructor(R){this.tokens=[],this.tokens.links=Object.create(null),this.options=R||d,this.options.tokenizer=this.options.tokenizer||new P,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const A={block:nt.normal,inline:$e.normal};this.options.pedantic?(A.block=nt.pedantic,A.inline=$e.pedantic):this.options.gfm&&(A.block=nt.gfm,A.inline=this.options.breaks?$e.breaks:$e.gfm),this.tokenizer.rules=A}static get rules(){return{block:nt,inline:$e}}static lex(R,A){return new Fe(A).lex(R)}static lexInline(R,A){return new Fe(A).inlineTokens(R)}lex(R){R=R.replace(/\r\n|\r/g,"\n"),this.blockTokens(R,this.tokens);for(let A=0;A<this.inlineQueue.length;A++){const x=this.inlineQueue[A];this.inlineTokens(x.src,x.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(R,A=[]){let x,W,K,Q;for(R=this.options.pedantic?R.replace(/\t/g,"    ").replace(/^ +$/gm,""):R.replace(/^( *)(\t+)/gm,(ue,_e,Se)=>_e+"    ".repeat(Se.length));R;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(ue=>!!(x=ue.call({lexer:this},R,A))&&(R=R.substring(x.raw.length),A.push(x),!0)))){if(x=this.tokenizer.space(R)){R=R.substring(x.raw.length),1===x.raw.length&&A.length>0?A[A.length-1].raw+="\n":A.push(x);continue}if(x=this.tokenizer.code(R)){R=R.substring(x.raw.length),W=A[A.length-1],!W||"paragraph"!==W.type&&"text"!==W.type?A.push(x):(W.raw+="\n"+x.raw,W.text+="\n"+x.text,this.inlineQueue[this.inlineQueue.length-1].src=W.text);continue}if(x=this.tokenizer.fences(R)){R=R.substring(x.raw.length),A.push(x);continue}if(x=this.tokenizer.heading(R)){R=R.substring(x.raw.length),A.push(x);continue}if(x=this.tokenizer.hr(R)){R=R.substring(x.raw.length),A.push(x);continue}if(x=this.tokenizer.blockquote(R)){R=R.substring(x.raw.length),A.push(x);continue}if(x=this.tokenizer.list(R)){R=R.substring(x.raw.length),A.push(x);continue}if(x=this.tokenizer.html(R)){R=R.substring(x.raw.length),A.push(x);continue}if(x=this.tokenizer.def(R)){R=R.substring(x.raw.length),W=A[A.length-1],!W||"paragraph"!==W.type&&"text"!==W.type?this.tokens.links[x.tag]||(this.tokens.links[x.tag]={href:x.href,title:x.title}):(W.raw+="\n"+x.raw,W.text+="\n"+x.raw,this.inlineQueue[this.inlineQueue.length-1].src=W.text);continue}if(x=this.tokenizer.table(R)){R=R.substring(x.raw.length),A.push(x);continue}if(x=this.tokenizer.lheading(R)){R=R.substring(x.raw.length),A.push(x);continue}if(K=R,this.options.extensions&&this.options.extensions.startBlock){let ue=1/0;const _e=R.slice(1);let Se;this.options.extensions.startBlock.forEach(Ae=>{Se=Ae.call({lexer:this},_e),"number"==typeof Se&&Se>=0&&(ue=Math.min(ue,Se))}),ue<1/0&&ue>=0&&(K=R.substring(0,ue+1))}if(this.state.top&&(x=this.tokenizer.paragraph(K))){W=A[A.length-1],Q&&"paragraph"===W.type?(W.raw+="\n"+x.raw,W.text+="\n"+x.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=W.text):A.push(x),Q=K.length!==R.length,R=R.substring(x.raw.length);continue}if(x=this.tokenizer.text(R)){R=R.substring(x.raw.length),W=A[A.length-1],W&&"text"===W.type?(W.raw+="\n"+x.raw,W.text+="\n"+x.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=W.text):A.push(x);continue}if(R){const ue="Infinite loop on byte: "+R.charCodeAt(0);if(this.options.silent){console.error(ue);break}throw new Error(ue)}}return this.state.top=!0,A}inline(R,A=[]){return this.inlineQueue.push({src:R,tokens:A}),A}inlineTokens(R,A=[]){let x,W,K,ue,_e,Se,Q=R;if(this.tokens.links){const Ae=Object.keys(this.tokens.links);if(Ae.length>0)for(;null!=(ue=this.tokenizer.rules.inline.reflinkSearch.exec(Q));)Ae.includes(ue[0].slice(ue[0].lastIndexOf("[")+1,-1))&&(Q=Q.slice(0,ue.index)+"["+"a".repeat(ue[0].length-2)+"]"+Q.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(ue=this.tokenizer.rules.inline.blockSkip.exec(Q));)Q=Q.slice(0,ue.index)+"["+"a".repeat(ue[0].length-2)+"]"+Q.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(ue=this.tokenizer.rules.inline.anyPunctuation.exec(Q));)Q=Q.slice(0,ue.index)+"++"+Q.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;R;)if(_e||(Se=""),_e=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(Ae=>!!(x=Ae.call({lexer:this},R,A))&&(R=R.substring(x.raw.length),A.push(x),!0)))){if(x=this.tokenizer.escape(R)){R=R.substring(x.raw.length),A.push(x);continue}if(x=this.tokenizer.tag(R)){R=R.substring(x.raw.length),W=A[A.length-1],W&&"text"===x.type&&"text"===W.type?(W.raw+=x.raw,W.text+=x.text):A.push(x);continue}if(x=this.tokenizer.link(R)){R=R.substring(x.raw.length),A.push(x);continue}if(x=this.tokenizer.reflink(R,this.tokens.links)){R=R.substring(x.raw.length),W=A[A.length-1],W&&"text"===x.type&&"text"===W.type?(W.raw+=x.raw,W.text+=x.text):A.push(x);continue}if(x=this.tokenizer.emStrong(R,Q,Se)){R=R.substring(x.raw.length),A.push(x);continue}if(x=this.tokenizer.codespan(R)){R=R.substring(x.raw.length),A.push(x);continue}if(x=this.tokenizer.br(R)){R=R.substring(x.raw.length),A.push(x);continue}if(x=this.tokenizer.del(R)){R=R.substring(x.raw.length),A.push(x);continue}if(x=this.tokenizer.autolink(R)){R=R.substring(x.raw.length),A.push(x);continue}if(!this.state.inLink&&(x=this.tokenizer.url(R))){R=R.substring(x.raw.length),A.push(x);continue}if(K=R,this.options.extensions&&this.options.extensions.startInline){let Ae=1/0;const Pe=R.slice(1);let Ee;this.options.extensions.startInline.forEach(ke=>{Ee=ke.call({lexer:this},Pe),"number"==typeof Ee&&Ee>=0&&(Ae=Math.min(Ae,Ee))}),Ae<1/0&&Ae>=0&&(K=R.substring(0,Ae+1))}if(x=this.tokenizer.inlineText(K)){R=R.substring(x.raw.length),"_"!==x.raw.slice(-1)&&(Se=x.raw.slice(-1)),_e=!0,W=A[A.length-1],W&&"text"===W.type?(W.raw+=x.raw,W.text+=x.text):A.push(x);continue}if(R){const Ae="Infinite loop on byte: "+R.charCodeAt(0);if(this.options.silent){console.error(Ae);break}throw new Error(Ae)}}return A}}class Ye{options;constructor(R){this.options=R||d}code(R,A,x){const W=(A||"").match(/^\S*/)?.[0];return R=R.replace(/\n$/,"")+"\n",W?'<pre><code class="language-'+se(W)+'">'+(x?R:se(R,!0))+"</code></pre>\n":"<pre><code>"+(x?R:se(R,!0))+"</code></pre>\n"}blockquote(R){return`<blockquote>\n${R}</blockquote>\n`}html(R,A){return R}heading(R,A,x){return`<h${A}>${R}</h${A}>\n`}hr(){return"<hr>\n"}list(R,A,x){const W=A?"ol":"ul";return"<"+W+(A&&1!==x?' start="'+x+'"':"")+">\n"+R+"</"+W+">\n"}listitem(R,A,x){return`<li>${R}</li>\n`}checkbox(R){return"<input "+(R?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(R){return`<p>${R}</p>\n`}table(R,A){return A&&(A=`<tbody>${A}</tbody>`),"<table>\n<thead>\n"+R+"</thead>\n"+A+"</table>\n"}tablerow(R){return`<tr>\n${R}</tr>\n`}tablecell(R,A){const x=A.header?"th":"td";return(A.align?`<${x} align="${A.align}">`:`<${x}>`)+R+`</${x}>\n`}strong(R){return`<strong>${R}</strong>`}em(R){return`<em>${R}</em>`}codespan(R){return`<code>${R}</code>`}br(){return"<br>"}del(R){return`<del>${R}</del>`}link(R,A,x){const W=f(R);if(null===W)return x;let K='<a href="'+(R=W)+'"';return A&&(K+=' title="'+A+'"'),K+=">"+x+"</a>",K}image(R,A,x){const W=f(R);if(null===W)return x;let K=`<img src="${R=W}" alt="${x}"`;return A&&(K+=` title="${A}"`),K+=">",K}text(R){return R}}class rt{strong(R){return R}em(R){return R}codespan(R){return R}del(R){return R}html(R){return R}text(R){return R}link(R,A,x){return""+x}image(R,A,x){return""+x}br(){return""}}class Ke{options;renderer;textRenderer;constructor(R){this.options=R||d,this.options.renderer=this.options.renderer||new Ye,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new rt}static parse(R,A){return new Ke(A).parse(R)}static parseInline(R,A){return new Ke(A).parseInline(R)}parse(R,A=!0){let x="";for(let W=0;W<R.length;W++){const K=R[W];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[K.type]){const Q=K,ue=this.options.extensions.renderers[Q.type].call({parser:this},Q);if(!1!==ue||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(Q.type)){x+=ue||"";continue}}switch(K.type){case"space":continue;case"hr":x+=this.renderer.hr();continue;case"heading":{const Q=K;x+=this.renderer.heading(this.parseInline(Q.tokens),Q.depth,this.parseInline(Q.tokens,this.textRenderer).replace(te,(R,A)=>"colon"===(A=A.toLowerCase())?":":"#"===A.charAt(0)?"x"===A.charAt(1)?String.fromCharCode(parseInt(A.substring(2),16)):String.fromCharCode(+A.substring(1)):""));continue}case"code":x+=this.renderer.code(K.text,K.lang,!!K.escaped);continue;case"table":{const Q=K;let ue="",_e="";for(let Ae=0;Ae<Q.header.length;Ae++)_e+=this.renderer.tablecell(this.parseInline(Q.header[Ae].tokens),{header:!0,align:Q.align[Ae]});ue+=this.renderer.tablerow(_e);let Se="";for(let Ae=0;Ae<Q.rows.length;Ae++){const Pe=Q.rows[Ae];_e="";for(let Ee=0;Ee<Pe.length;Ee++)_e+=this.renderer.tablecell(this.parseInline(Pe[Ee].tokens),{header:!1,align:Q.align[Ee]});Se+=this.renderer.tablerow(_e)}x+=this.renderer.table(ue,Se);continue}case"blockquote":{const ue=this.parse(K.tokens);x+=this.renderer.blockquote(ue);continue}case"list":{const Q=K,ue=Q.ordered,_e=Q.start,Se=Q.loose;let Ae="";for(let Pe=0;Pe<Q.items.length;Pe++){const Ee=Q.items[Pe],ke=Ee.checked,st=Ee.task;let qe="";if(Ee.task){const lt=this.renderer.checkbox(!!ke);Se?Ee.tokens.length>0&&"paragraph"===Ee.tokens[0].type?(Ee.tokens[0].text=lt+" "+Ee.tokens[0].text,Ee.tokens[0].tokens&&Ee.tokens[0].tokens.length>0&&"text"===Ee.tokens[0].tokens[0].type&&(Ee.tokens[0].tokens[0].text=lt+" "+Ee.tokens[0].tokens[0].text)):Ee.tokens.unshift({type:"text",text:lt+" "}):qe+=lt+" "}qe+=this.parse(Ee.tokens,Se),Ae+=this.renderer.listitem(qe,st,!!ke)}x+=this.renderer.list(Ae,ue,_e);continue}case"html":x+=this.renderer.html(K.text,K.block);continue;case"paragraph":x+=this.renderer.paragraph(this.parseInline(K.tokens));continue;case"text":{let Q=K,ue=Q.tokens?this.parseInline(Q.tokens):Q.text;for(;W+1<R.length&&"text"===R[W+1].type;)Q=R[++W],ue+="\n"+(Q.tokens?this.parseInline(Q.tokens):Q.text);x+=A?this.renderer.paragraph(ue):ue;continue}default:{const Q='Token with "'+K.type+'" type was not found.';if(this.options.silent)return console.error(Q),"";throw new Error(Q)}}}return x}parseInline(R,A){A=A||this.renderer;let x="";for(let W=0;W<R.length;W++){const K=R[W];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[K.type]){const Q=this.options.extensions.renderers[K.type].call({parser:this},K);if(!1!==Q||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(K.type)){x+=Q||"";continue}}switch(K.type){case"escape":case"text":x+=A.text(K.text);break;case"html":x+=A.html(K.text);break;case"link":x+=A.link(K.href,K.title,this.parseInline(K.tokens,A));break;case"image":x+=A.image(K.href,K.title,K.text);break;case"strong":x+=A.strong(this.parseInline(K.tokens,A));break;case"em":x+=A.em(this.parseInline(K.tokens,A));break;case"codespan":x+=A.codespan(K.text);break;case"br":x+=A.br();break;case"del":x+=A.del(this.parseInline(K.tokens,A));break;default:{const Q='Token with "'+K.type+'" type was not found.';if(this.options.silent)return console.error(Q),"";throw new Error(Q)}}}return x}}class dt{options;constructor(R){this.options=R||d}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(R){return R}postprocess(R){return R}processAllTokens(R){return R}}const at=new class St{defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};options=this.setOptions;parse=this.#e(Fe.lex,Ke.parse);parseInline=this.#e(Fe.lexInline,Ke.parseInline);Parser=Ke;Renderer=Ye;TextRenderer=rt;Lexer=Fe;Tokenizer=P;Hooks=dt;constructor(...R){this.use(...R)}walkTokens(R,A){let x=[];for(const W of R)switch(x=x.concat(A.call(this,W)),W.type){case"table":{const K=W;for(const Q of K.header)x=x.concat(this.walkTokens(Q.tokens,A));for(const Q of K.rows)for(const ue of Q)x=x.concat(this.walkTokens(ue.tokens,A));break}case"list":x=x.concat(this.walkTokens(W.items,A));break;default:{const K=W;this.defaults.extensions?.childTokens?.[K.type]?this.defaults.extensions.childTokens[K.type].forEach(Q=>{x=x.concat(this.walkTokens(K[Q],A))}):K.tokens&&(x=x.concat(this.walkTokens(K.tokens,A)))}}return x}use(...R){const A=this.defaults.extensions||{renderers:{},childTokens:{}};return R.forEach(x=>{const W={...x};if(W.async=this.defaults.async||W.async||!1,x.extensions&&(x.extensions.forEach(K=>{if(!K.name)throw new Error("extension name required");if("renderer"in K){const Q=A.renderers[K.name];A.renderers[K.name]=Q?function(...ue){let _e=K.renderer.apply(this,ue);return!1===_e&&(_e=Q.apply(this,ue)),_e}:K.renderer}if("tokenizer"in K){if(!K.level||"block"!==K.level&&"inline"!==K.level)throw new Error("extension level must be 'block' or 'inline'");const Q=A[K.level];Q?Q.unshift(K.tokenizer):A[K.level]=[K.tokenizer],K.start&&("block"===K.level?A.startBlock?A.startBlock.push(K.start):A.startBlock=[K.start]:"inline"===K.level&&(A.startInline?A.startInline.push(K.start):A.startInline=[K.start]))}"childTokens"in K&&K.childTokens&&(A.childTokens[K.name]=K.childTokens)}),W.extensions=A),x.renderer){const K=this.defaults.renderer||new Ye(this.defaults);for(const Q in x.renderer){if(!(Q in K))throw new Error(`renderer '${Q}' does not exist`);if("options"===Q)continue;const _e=x.renderer[Q],Se=K[Q];K[Q]=(...Ae)=>{let Pe=_e.apply(K,Ae);return!1===Pe&&(Pe=Se.apply(K,Ae)),Pe||""}}W.renderer=K}if(x.tokenizer){const K=this.defaults.tokenizer||new P(this.defaults);for(const Q in x.tokenizer){if(!(Q in K))throw new Error(`tokenizer '${Q}' does not exist`);if(["options","rules","lexer"].includes(Q))continue;const _e=x.tokenizer[Q],Se=K[Q];K[Q]=(...Ae)=>{let Pe=_e.apply(K,Ae);return!1===Pe&&(Pe=Se.apply(K,Ae)),Pe}}W.tokenizer=K}if(x.hooks){const K=this.defaults.hooks||new dt;for(const Q in x.hooks){if(!(Q in K))throw new Error(`hook '${Q}' does not exist`);if("options"===Q)continue;const _e=x.hooks[Q],Se=K[Q];K[Q]=dt.passThroughHooks.has(Q)?Ae=>{if(this.defaults.async)return Promise.resolve(_e.call(K,Ae)).then(Ee=>Se.call(K,Ee));const Pe=_e.call(K,Ae);return Se.call(K,Pe)}:(...Ae)=>{let Pe=_e.apply(K,Ae);return!1===Pe&&(Pe=Se.apply(K,Ae)),Pe}}W.hooks=K}if(x.walkTokens){const K=this.defaults.walkTokens,Q=x.walkTokens;W.walkTokens=function(ue){let _e=[];return _e.push(Q.call(this,ue)),K&&(_e=_e.concat(K.call(this,ue))),_e}}this.defaults={...this.defaults,...W}}),this}setOptions(R){return this.defaults={...this.defaults,...R},this}lexer(R,A){return Fe.lex(R,A??this.defaults)}parser(R,A){return Ke.parse(R,A??this.defaults)}#e(R,A){return(x,W)=>{const K={...W},Q={...this.defaults,...K};!0===this.defaults.async&&!1===K.async&&(Q.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),Q.async=!0);const ue=this.#t(!!Q.silent,!!Q.async);if(typeof x>"u"||null===x)return ue(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof x)return ue(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(x)+", string expected"));if(Q.hooks&&(Q.hooks.options=Q),Q.async)return Promise.resolve(Q.hooks?Q.hooks.preprocess(x):x).then(_e=>R(_e,Q)).then(_e=>Q.hooks?Q.hooks.processAllTokens(_e):_e).then(_e=>Q.walkTokens?Promise.all(this.walkTokens(_e,Q.walkTokens)).then(()=>_e):_e).then(_e=>A(_e,Q)).then(_e=>Q.hooks?Q.hooks.postprocess(_e):_e).catch(ue);try{Q.hooks&&(x=Q.hooks.preprocess(x));let _e=R(x,Q);Q.hooks&&(_e=Q.hooks.processAllTokens(_e)),Q.walkTokens&&this.walkTokens(_e,Q.walkTokens);let Se=A(_e,Q);return Q.hooks&&(Se=Q.hooks.postprocess(Se)),Se}catch(_e){return ue(_e)}}}#t(R,A){return x=>{if(x.message+="\nPlease report this to https://github.com/markedjs/marked.",R){const W="<p>An error occurred:</p><pre>"+se(x.message+"",!0)+"</pre>";return A?Promise.resolve(W):W}if(A)return Promise.reject(x);throw x}}};function Te(oe,R){return at.parse(oe,R)}Te.options=Te.setOptions=function(oe){return at.setOptions(oe),E(Te.defaults=at.defaults),Te},Te.getDefaults=function v(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}},Te.defaults=d,Te.use=function(...oe){return at.use(...oe),E(Te.defaults=at.defaults),Te},Te.walkTokens=function(oe,R){return at.walkTokens(oe,R)},Te.parseInline=at.parseInline,Te.Parser=Ke,Te.parser=Ke.parse,Te.Renderer=Ye,Te.TextRenderer=rt,Te.Lexer=Fe,Te.lexer=Fe.lex,Te.Tokenizer=P,Te.Hooks=dt,Te.parse=Te;let Et=(()=>{class oe{transform(A,x){return A&&A.length>0?Te(A):A}static#e=this.\u0275fac=function(x){return new(x||oe)};static#t=this.\u0275pipe=h.EJ8({name:"markdown",type:oe,pure:!0})}return oe})(),wt=(()=>{class oe{constructor(){this.data=(0,h.hFB)(),this.el=(0,h.WQX)(h.aKT),this.platformCheck=(0,h.WQX)(l.f),(0,h.QZP)(()=>{this.platformCheck.onBrowser&&(0,w.A)(this.el.nativeElement.querySelectorAll("img"),{margin:40,scrollOffset:40})})}static#e=this.\u0275fac=function(x){return new(x||oe)};static#t=this.\u0275cmp=h.VBU({type:oe,selectors:[["prose"]],inputs:{data:[1,"data"]},standalone:!0,features:[h.aNF],decls:3,vars:6,consts:[[1,"prose","lg:prose-xl","max-w-full","dark:prose-invert","dark:prose-pre:bg-gray-700",3,"innerHTML"]],template:function(x,W){1&x&&(h.nrm(0,"article",0),h.nI1(1,"markdown"),h.nI1(2,"safe")),2&x&&h.Y8G("innerHTML",h.i5U(2,3,h.bMT(1,1,W.data()),"html"),h.npT)},dependencies:[c,u,Et],encapsulation:2})}return oe})();var Pt=D(8750),xt=D(1985),Ct=D(1397),Tt=D(7441),ot=D(8071),kt=D(6450);const Mt=["addListener","removeListener"],Lt=["addEventListener","removeEventListener"],Rt=["on","off"];function Oe(oe,R,A,x){if((0,ot.T)(A)&&(x=A,A=void 0),x)return Oe(oe,R,A).pipe((0,kt.I)(x));const[W,K]=function Ot(oe){return(0,ot.T)(oe.addEventListener)&&(0,ot.T)(oe.removeEventListener)}(oe)?Lt.map(Q=>ue=>oe[Q](R,ue,A)):function It(oe){return(0,ot.T)(oe.addListener)&&(0,ot.T)(oe.removeListener)}(oe)?Mt.map(_t(oe,R)):function Ft(oe){return(0,ot.T)(oe.on)&&(0,ot.T)(oe.off)}(oe)?Rt.map(_t(oe,R)):[];if(!W&&(0,Tt.X)(oe))return(0,Ct.Z)(Q=>Oe(Q,R,A))((0,Pt.Tg)(oe));if(!W)throw new TypeError("Invalid event target");return new xt.c(Q=>{const ue=(..._e)=>Q.next(1<_e.length?_e:_e[0]);return W(ue),()=>K(ue)})}function _t(oe,R){return A=>x=>oe[A](R,x)}var Dt=D(1413),bt=D(6648),De=D(6977),Nt=D(3888),Bt=D(9974),Vt=D(4360),zt=D(5964),it=D(717),ut=D.t(it,2),Xe=D(3876),Wt=D.t(Xe,2);const Ht=["pdfViewerContainer"];function ft(oe,R,A){oe[R]=A}function ht(){return typeof window>"u"}ht()||ft(ut,"verbosity",it.VerbosityLevel.INFOS);var pt=function(oe){return oe[oe.DISABLED=0]="DISABLED",oe[oe.ENABLED=1]="ENABLED",oe[oe.ENHANCED=2]="ENHANCED",oe}(pt||{});let $t=(()=>{class oe{element;ngZone;static CSS_UNITS=96/72;static BORDER_WIDTH=9;pdfViewerContainer;eventBus;pdfLinkService;pdfFindController;pdfViewer;isVisible=!1;_cMapsUrl=typeof ut<"u"?`https://unpkg.com/pdfjs-dist@${it.version}/cmaps/`:null;_imageResourcesPath=typeof ut<"u"?`https://unpkg.com/pdfjs-dist@${it.version}/web/images/`:void 0;_renderText=!0;_renderTextMode=pt.ENABLED;_stickToPage=!1;_originalSize=!0;_pdf;_page=1;_zoom=1;_zoomScale="page-width";_rotation=0;_showAll=!0;_canAutoResize=!0;_fitToPage=!1;_externalLinkTarget="blank";_showBorders=!1;lastLoaded;_latestScrolledPage;pageScrollTimeout=null;isInitialized=!1;loadingTask;destroy$=new Dt.B;afterLoadComplete=new h.bkB;pageRendered=new h.bkB;pageInitialized=new h.bkB;textLayerRendered=new h.bkB;onError=new h.bkB;onProgress=new h.bkB;pageChange=new h.bkB(!0);src;set cMapsUrl(A){this._cMapsUrl=A}set page(A){const x=A=parseInt(A,10)||1;this._pdf&&(A=this.getValidPageNumber(A)),this._page=A,x!==A&&this.pageChange.emit(A)}set renderText(A){this._renderText=A}set renderTextMode(A){this._renderTextMode=A}set originalSize(A){this._originalSize=A}set showAll(A){this._showAll=A}set stickToPage(A){this._stickToPage=A}set zoom(A){A<=0||(this._zoom=A)}get zoom(){return this._zoom}set zoomScale(A){this._zoomScale=A}get zoomScale(){return this._zoomScale}set rotation(A){"number"==typeof A&&A%90==0?this._rotation=A:console.warn("Invalid pages rotation angle.")}set externalLinkTarget(A){this._externalLinkTarget=A}set autoresize(A){this._canAutoResize=!!A}set fitToPage(A){this._fitToPage=!!A}set showBorders(A){this._showBorders=!!A}static getLinkTarget(A){switch(A){case"blank":return Xe.LinkTarget.BLANK;case"none":return Xe.LinkTarget.NONE;case"self":return Xe.LinkTarget.SELF;case"parent":return Xe.LinkTarget.PARENT;case"top":return Xe.LinkTarget.TOP}return null}constructor(A,x){if(this.element=A,this.ngZone=x,ht())return;let W;const K=it.version;W=window[`pdfWorkerSrc${K}`]||(window.hasOwnProperty("pdfWorkerSrc")&&"string"==typeof window.pdfWorkerSrc&&window.pdfWorkerSrc?window.pdfWorkerSrc:`https://cdn.jsdelivr.net/npm/pdfjs-dist@${K}/legacy/build/pdf.worker.min.js`),ft(it.GlobalWorkerOptions,"workerSrc",W)}ngAfterViewChecked(){if(this.isInitialized)return;const A=this.pdfViewerContainer.nativeElement.offsetParent;!0!==this.isVisible||null!=A?!1===this.isVisible&&null!=A&&(this.isVisible=!0,setTimeout(()=>{this.initialize(),this.ngOnChanges({src:this.src})})):this.isVisible=!1}ngOnInit(){this.initialize(),this.setupResizeListener()}ngOnDestroy(){this.clear(),this.destroy$.next(),this.loadingTask=null}ngOnChanges(A){if(!ht()&&this.isVisible)if("src"in A)this.loadPDF();else if(this._pdf){if(("renderText"in A||"showAll"in A)&&(this.setupViewer(),this.resetPdfDocument()),"page"in A){const{page:x}=A;if(x.currentValue===this._latestScrolledPage)return;this.pdfViewer.scrollPageIntoView({pageNumber:this._page})}this.update()}}updateSize(){(0,bt.H)(this._pdf.getPage(this.pdfViewer.currentPageNumber)).pipe((0,De.Q)(this.destroy$)).subscribe({next:A=>{const x=this._rotation+A.rotate,W=A.getViewport({scale:this._zoom,rotation:x}).width*oe.CSS_UNITS;let K=this._zoom,Q=!0;if(!this._originalSize||this._fitToPage&&W>this.pdfViewerContainer.nativeElement.clientWidth){const ue=A.getViewport({scale:1,rotation:x});K=this.getScale(ue.width,ue.height),Q=!this._stickToPage}this.pdfViewer.pagesPromise?.then(()=>{this.pdfViewer.currentScale=K,Q&&this.pdfViewer.scrollPageIntoView({pageNumber:A.pageNumber,ignoreDestinationZoom:!0})})}})}clear(){this.loadingTask&&!this.loadingTask.destroyed&&this.loadingTask.destroy(),this._pdf&&(this._latestScrolledPage=0,this._pdf.destroy(),this._pdf=void 0),this.pdfViewer&&this.pdfViewer.setDocument(null),this.pdfLinkService&&this.pdfLinkService.setDocument(null,null),this.pdfFindController&&this.pdfFindController.setDocument(null)}getPDFLinkServiceConfig(){const A=oe.getLinkTarget(this._externalLinkTarget);return A?{externalLinkTarget:A}:{}}initEventBus(){this.eventBus=function jt(oe,R){const A=new oe.EventBus;return function Gt(oe,R){Oe(oe,"documentload").pipe((0,De.Q)(R)).subscribe(()=>{const A=document.createEvent("CustomEvent");A.initCustomEvent("documentload",!0,!0,{}),window.dispatchEvent(A)}),Oe(oe,"pagerendered").pipe((0,De.Q)(R)).subscribe(({pageNumber:A,cssTransform:x,source:W})=>{const K=document.createEvent("CustomEvent");K.initCustomEvent("pagerendered",!0,!0,{pageNumber:A,cssTransform:x}),W.div.dispatchEvent(K)}),Oe(oe,"textlayerrendered").pipe((0,De.Q)(R)).subscribe(({pageNumber:A,source:x})=>{const W=document.createEvent("CustomEvent");W.initCustomEvent("textlayerrendered",!0,!0,{pageNumber:A}),x.textLayerDiv?.dispatchEvent(W)}),Oe(oe,"pagechanging").pipe((0,De.Q)(R)).subscribe(({pageNumber:A,source:x})=>{const W=document.createEvent("UIEvents");W.initEvent("pagechanging",!0,!0),W.pageNumber=A,x.container.dispatchEvent(W)}),Oe(oe,"pagesinit").pipe((0,De.Q)(R)).subscribe(({source:A})=>{const x=document.createEvent("CustomEvent");x.initCustomEvent("pagesinit",!0,!0,null),A.container.dispatchEvent(x)}),Oe(oe,"pagesloaded").pipe((0,De.Q)(R)).subscribe(({pagesCount:A,source:x})=>{const W=document.createEvent("CustomEvent");W.initCustomEvent("pagesloaded",!0,!0,{pagesCount:A}),x.container.dispatchEvent(W)}),Oe(oe,"scalechange").pipe((0,De.Q)(R)).subscribe(({scale:A,presetValue:x,source:W})=>{const K=document.createEvent("UIEvents");K.initEvent("scalechange",!0,!0),K.scale=A,K.presetValue=x,W.container.dispatchEvent(K)}),Oe(oe,"updateviewarea").pipe((0,De.Q)(R)).subscribe(({location:A,source:x})=>{const W=document.createEvent("UIEvents");W.initEvent("updateviewarea",!0,!0),W.location=A,x.container.dispatchEvent(W)}),Oe(oe,"find").pipe((0,De.Q)(R)).subscribe(({source:A,type:x,query:W,phraseSearch:K,caseSensitive:Q,highlightAll:ue,findPrevious:_e})=>{if(A===window)return;const Se=document.createEvent("CustomEvent");Se.initCustomEvent("find"+x,!0,!0,{query:W,phraseSearch:K,caseSensitive:Q,highlightAll:ue,findPrevious:_e}),window.dispatchEvent(Se)}),Oe(oe,"attachmentsloaded").pipe((0,De.Q)(R)).subscribe(({attachmentsCount:A,source:x})=>{const W=document.createEvent("CustomEvent");W.initCustomEvent("attachmentsloaded",!0,!0,{attachmentsCount:A}),x.container.dispatchEvent(W)}),Oe(oe,"sidebarviewchanged").pipe((0,De.Q)(R)).subscribe(({view:A,source:x})=>{const W=document.createEvent("CustomEvent");W.initCustomEvent("sidebarviewchanged",!0,!0,{view:A}),x.outerContainer.dispatchEvent(W)}),Oe(oe,"pagemode").pipe((0,De.Q)(R)).subscribe(({mode:A,source:x})=>{const W=document.createEvent("CustomEvent");W.initCustomEvent("pagemode",!0,!0,{mode:A}),x.pdfViewer.container.dispatchEvent(W)}),Oe(oe,"namedaction").pipe((0,De.Q)(R)).subscribe(({action:A,source:x})=>{const W=document.createEvent("CustomEvent");W.initCustomEvent("namedaction",!0,!0,{action:A}),x.pdfViewer.container.dispatchEvent(W)}),Oe(oe,"presentationmodechanged").pipe((0,De.Q)(R)).subscribe(({active:A,switchInProgress:x})=>{const W=document.createEvent("CustomEvent");W.initCustomEvent("presentationmodechanged",!0,!0,{active:A,switchInProgress:x}),window.dispatchEvent(W)}),Oe(oe,"outlineloaded").pipe((0,De.Q)(R)).subscribe(({outlineCount:A,source:x})=>{const W=document.createEvent("CustomEvent");W.initCustomEvent("outlineloaded",!0,!0,{outlineCount:A}),x.container.dispatchEvent(W)})}(A,R),A}(Wt,this.destroy$),Oe(this.eventBus,"pagerendered").pipe((0,De.Q)(this.destroy$)).subscribe(A=>{this.pageRendered.emit(A)}),Oe(this.eventBus,"pagesinit").pipe((0,De.Q)(this.destroy$)).subscribe(A=>{this.pageInitialized.emit(A)}),Oe(this.eventBus,"pagechanging").pipe((0,De.Q)(this.destroy$)).subscribe(({pageNumber:A})=>{this.pageScrollTimeout&&clearTimeout(this.pageScrollTimeout),this.pageScrollTimeout=window.setTimeout(()=>{this._latestScrolledPage=A,this.pageChange.emit(A)},100)}),Oe(this.eventBus,"textlayerrendered").pipe((0,De.Q)(this.destroy$)).subscribe(A=>{this.textLayerRendered.emit(A)})}initPDFServices(){this.pdfLinkService=new Xe.PDFLinkService({eventBus:this.eventBus,...this.getPDFLinkServiceConfig()}),this.pdfFindController=new Xe.PDFFindController({eventBus:this.eventBus,linkService:this.pdfLinkService})}getPDFOptions(){return{eventBus:this.eventBus,container:this.element.nativeElement.querySelector("div"),removePageBorders:!this._showBorders,linkService:this.pdfLinkService,textLayerMode:this._renderText?this._renderTextMode:pt.DISABLED,findController:this.pdfFindController,l10n:new Xe.GenericL10n("en"),imageResourcesPath:this._imageResourcesPath,annotationEditorMode:it.AnnotationEditorType.DISABLE}}setupViewer(){ft(ut,"disableTextLayer",!this._renderText),this.initPDFServices(),this.pdfViewer=this._showAll?new Xe.PDFViewer(this.getPDFOptions()):new Xe.PDFSinglePageViewer(this.getPDFOptions()),this.pdfLinkService.setViewer(this.pdfViewer),this.pdfViewer._currentPageNumber=this._page}getValidPageNumber(A){return A<1?1:A>this._pdf.numPages?this._pdf.numPages:A}getDocumentParams(){const A=typeof this.src;if(!this._cMapsUrl)return this.src;const x={cMapUrl:this._cMapsUrl,cMapPacked:!0,enableXfa:!0,isEvalSupported:!1};return"string"===A?x.url=this.src:"object"===A&&(void 0!==this.src.byteLength?x.data=this.src:Object.assign(x,this.src)),x}loadPDF(){if(!this.src)return;if(this.lastLoaded===this.src)return void this.update();this.clear(),this.setupViewer(),this.loadingTask=it.getDocument(this.getDocumentParams()),this.loadingTask.onProgress=x=>{this.onProgress.emit(x)};const A=this.src;(0,bt.H)(this.loadingTask.promise).pipe((0,De.Q)(this.destroy$)).subscribe({next:x=>{this._pdf=x,this.lastLoaded=A,this.afterLoadComplete.emit(x),this.resetPdfDocument(),this.update()},error:x=>{this.lastLoaded=null,this.onError.emit(x)}})}update(){this.page=this._page,this.render()}render(){this._page=this.getValidPageNumber(this._page),(0!==this._rotation||this.pdfViewer.pagesRotation!==this._rotation)&&setTimeout(()=>{this.pdfViewer.pagesRotation=this._rotation}),this._stickToPage&&setTimeout(()=>{this.pdfViewer.currentPageNumber=this._page}),this.updateSize()}getScale(A,x){const W=this._showBorders?2*oe.BORDER_WIDTH:0,K=this.pdfViewerContainer.nativeElement.clientWidth-W,Q=this.pdfViewerContainer.nativeElement.clientHeight-W;if(0===Q||0===x||0===K||0===A)return 1;let ue=1;switch(this._zoomScale){case"page-fit":ue=Math.min(Q/x,K/A);break;case"page-height":ue=Q/x;break;default:ue=K/A}return this._zoom*ue/oe.CSS_UNITS}resetPdfDocument(){this.pdfLinkService.setDocument(this._pdf,null),this.pdfFindController.setDocument(this._pdf),this.pdfViewer.setDocument(this._pdf)}initialize(){ht()||!this.isVisible||(this.isInitialized=!0,this.initEventBus(),this.setupViewer())}setupResizeListener(){ht()||this.ngZone.runOutsideAngular(()=>{Oe(window,"resize").pipe(function Ut(oe,R=Nt.E){return(0,Bt.N)((A,x)=>{let W=null,K=null,Q=null;const ue=()=>{if(W){W.unsubscribe(),W=null;const Se=K;K=null,x.next(Se)}};function _e(){const Se=Q+oe,Ae=R.now();if(Ae<Se)return W=this.schedule(void 0,Se-Ae),void x.add(W);ue()}A.subscribe((0,Vt._)(x,Se=>{K=Se,Q=R.now(),W||(W=R.schedule(_e,oe),x.add(W))},()=>{ue(),x.complete()},void 0,()=>{K=W=null}))})}(100),(0,zt.p)(()=>this._canAutoResize&&!!this._pdf),(0,De.Q)(this.destroy$)).subscribe(()=>{this.updateSize()})})}static \u0275fac=function(x){return new(x||oe)(h.rXU(h.aKT),h.rXU(h.SKi))};static \u0275cmp=h.VBU({type:oe,selectors:[["pdf-viewer"]],viewQuery:function(x,W){if(1&x&&h.GBs(Ht,5),2&x){let K;h.mGM(K=h.lsd())&&(W.pdfViewerContainer=K.first)}},inputs:{src:"src",cMapsUrl:[0,"c-maps-url","cMapsUrl"],page:"page",renderText:[0,"render-text","renderText"],renderTextMode:[0,"render-text-mode","renderTextMode"],originalSize:[0,"original-size","originalSize"],showAll:[0,"show-all","showAll"],stickToPage:[0,"stick-to-page","stickToPage"],zoom:"zoom",zoomScale:[0,"zoom-scale","zoomScale"],rotation:"rotation",externalLinkTarget:[0,"external-link-target","externalLinkTarget"],autoresize:"autoresize",fitToPage:[0,"fit-to-page","fitToPage"],showBorders:[0,"show-borders","showBorders"]},outputs:{afterLoadComplete:"after-load-complete",pageRendered:"page-rendered",pageInitialized:"pages-initialized",textLayerRendered:"text-layer-rendered",onError:"error",onProgress:"on-progress",pageChange:"pageChange"},features:[h.OA$],decls:3,vars:0,consts:[["pdfViewerContainer",""],[1,"ng2-pdf-viewer-container"],[1,"pdfViewer"]],template:function(x,W){1&x&&(h.j41(0,"div",1,0),h.nrm(2,"div",2),h.k0s())},styles:['.ng2-pdf-viewer-container[_ngcontent-%COMP%]{overflow-x:auto;position:absolute;height:100%;width:100%;-webkit-overflow-scrolling:touch}[_nghost-%COMP%]{display:block;position:relative}[_nghost-%COMP%]    {--pdfViewer-padding-bottom: 0;--page-margin: 1px auto -8px;--page-border: 9px solid transparent;--spreadHorizontalWrapped-margin-LR: -3.5px;--viewer-container-height: 0;--annotation-unfocused-field-background: url("data:image/svg+xml;charset=UTF-8,<svg width=\'1px\' height=\'1px\' xmlns=\'http://www.w3.org/2000/svg\'><rect width=\'100%\' height=\'100%\' style=\'fill:rgba(0, 54, 255, 0.13);\'/></svg>");--xfa-unfocused-field-background: var( --annotation-unfocused-field-background );--page-border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAA1ElEQVQ4jbWUWw6EIAxFy2NFs/8NzR4UJhpqLsdi5mOmSSMUOfYWqv3S0gMr4XlYH/64gZa/gN3ANYA7KAXALt4ktoQ5MI9YxqaG8bWmsIysMuT6piSQCa4whZThCu8CM4zP9YJaKci9jicPq3NcBWYoPMGUlhG7ivtkB+gVyFY75wXghOvh8t5mto1Mdim6e+MBqH6XsY+YAwjpq3vGF7weTWQptLEDVCZvPTMl5JZZsdh47FHW6qFMyvLYqjcnmdFfY9Xk/KDOlzCusX2mi/ofM7MPkzBcSp4Q1/wAAAAASUVORK5CYII=) 9 9 repeat;--scale-factor: 1;--focus-outline: solid 2px blue;--hover-outline: dashed 2px blue;--freetext-line-height: 1.35;--freetext-padding: 2px;--editorInk-editing-cursor: pointer}@media screen and (forced-colors: active){[_nghost-%COMP%]    {--pdfViewer-padding-bottom: 9px;--page-margin: 8px auto -1px;--page-border: 1px solid CanvasText;--page-border-image: none;--spreadHorizontalWrapped-margin-LR: 3.5px}}@media (forced-colors: active){[_nghost-%COMP%]    {--focus-outline: solid 3px ButtonText;--hover-outline: dashed 3px ButtonText}}[_nghost-%COMP%]     .textLayer{position:absolute;text-align:initial;inset:0;overflow:hidden;opacity:.2;line-height:1;-webkit-text-size-adjust:none;text-size-adjust:none;forced-color-adjust:none}[_nghost-%COMP%]     .textLayer span, [_nghost-%COMP%]     .textLayer br{color:transparent;position:absolute;white-space:pre;cursor:text;transform-origin:0% 0%}[_nghost-%COMP%]     .textLayer span.markedContent{top:0;height:0}[_nghost-%COMP%]     .textLayer .highlight{margin:-1px;padding:1px;background-color:#b400aa;border-radius:4px}[_nghost-%COMP%]     .textLayer .highlight.appended{position:initial}[_nghost-%COMP%]     .textLayer .highlight.begin{border-radius:4px 0 0 4px}[_nghost-%COMP%]     .textLayer .highlight.end{border-radius:0 4px 4px 0}[_nghost-%COMP%]     .textLayer .highlight.middle{border-radius:0}[_nghost-%COMP%]     .textLayer .highlight.selected{background-color:#006400}[_nghost-%COMP%]     .textLayer ::selection{background:rgb(0,0,255)}[_nghost-%COMP%]     .textLayer br::selection{background:transparent}[_nghost-%COMP%]     .textLayer .endOfContent{display:block;position:absolute;inset:100% 0 0;z-index:-1;cursor:default;-webkit-user-select:none;user-select:none}[_nghost-%COMP%]     .textLayer .endOfContent.active{top:0}@media (forced-colors: active){[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:required, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:required, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:required{outline:1.5px solid selectedItem}}[_nghost-%COMP%]     .annotationLayer{position:absolute;top:0;left:0;pointer-events:none;transform-origin:0 0}[_nghost-%COMP%]     .annotationLayer section{position:absolute;text-align:initial;pointer-events:auto;box-sizing:border-box;transform-origin:0 0}[_nghost-%COMP%]     .annotationLayer .linkAnnotation>a, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>a{position:absolute;font-size:1em;top:0;left:0;width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>canvas{width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .linkAnnotation>a:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>a:hover{opacity:.2;background:rgb(255,255,0);box-shadow:0 2px 10px #ff0}[_nghost-%COMP%]     .annotationLayer .textAnnotation img{position:absolute;cursor:pointer;width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{background-image:var(--annotation-unfocused-field-background);border:1px solid transparent;box-sizing:border-box;font:calc(9px * var(--scale-factor)) sans-serif;height:100%;margin:0;vertical-align:top;width:100%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:required, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:required, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:required{outline:1.5px solid red}[_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select option{padding:0}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{border-radius:50%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea{resize:none}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input[disabled], [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea[disabled], [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select[disabled], [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input[disabled], [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input[disabled]{background:none;border:1px solid transparent;cursor:not-allowed}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:hover, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:hover, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:hover{border:1px solid rgb(0,0,0)}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:focus, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:focus, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:focus{background:none;border:1px solid transparent}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input :focus, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea :focus, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select :focus, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox :focus, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton :focus{background-image:none;background-color:transparent;outline:auto}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{background-color:CanvasText;content:"";display:block;position:absolute}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after{height:80%;left:45%;width:1px}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before{transform:rotate(45deg)}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after{transform:rotate(-45deg)}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{border-radius:50%;height:50%;left:30%;top:20%;width:50%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input.comb{font-family:monospace;padding-left:2px;padding-right:0}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input.comb:focus{width:103%}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{-webkit-appearance:none;appearance:none}[_nghost-%COMP%]     .annotationLayer .popupTriggerArea{height:100%;width:100%}[_nghost-%COMP%]     .annotationLayer .popupWrapper{position:absolute;font-size:calc(9px * var(--scale-factor));width:100%;min-width:calc(180px * var(--scale-factor));pointer-events:none}[_nghost-%COMP%]     .annotationLayer .popup{position:absolute;max-width:calc(180px * var(--scale-factor));background-color:#ff9;box-shadow:0 calc(2px * var(--scale-factor)) calc(5px * var(--scale-factor)) #888;border-radius:calc(2px * var(--scale-factor));padding:calc(6px * var(--scale-factor));margin-left:calc(5px * var(--scale-factor));cursor:pointer;font:message-box;white-space:normal;word-wrap:break-word;pointer-events:auto}[_nghost-%COMP%]     .annotationLayer .popup>*{font-size:calc(9px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .popup h1{display:inline-block}[_nghost-%COMP%]     .annotationLayer .popupDate{display:inline-block;margin-left:calc(5px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .popupContent{border-top:1px solid rgb(51,51,51);margin-top:calc(2px * var(--scale-factor));padding-top:calc(2px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .richText>*{white-space:pre-wrap;font-size:calc(9px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .highlightAnnotation, [_nghost-%COMP%]     .annotationLayer .underlineAnnotation, [_nghost-%COMP%]     .annotationLayer .squigglyAnnotation, [_nghost-%COMP%]     .annotationLayer .strikeoutAnnotation, [_nghost-%COMP%]     .annotationLayer .freeTextAnnotation, [_nghost-%COMP%]     .annotationLayer .lineAnnotation svg line, [_nghost-%COMP%]     .annotationLayer .squareAnnotation svg rect, [_nghost-%COMP%]     .annotationLayer .circleAnnotation svg ellipse, [_nghost-%COMP%]     .annotationLayer .polylineAnnotation svg polyline, [_nghost-%COMP%]     .annotationLayer .polygonAnnotation svg polygon, [_nghost-%COMP%]     .annotationLayer .caretAnnotation, [_nghost-%COMP%]     .annotationLayer .inkAnnotation svg polyline, [_nghost-%COMP%]     .annotationLayer .stampAnnotation, [_nghost-%COMP%]     .annotationLayer .fileAttachmentAnnotation{cursor:pointer}[_nghost-%COMP%]     .annotationLayer section svg{position:absolute;width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .annotationTextContent{position:absolute;width:100%;height:100%;opacity:0;color:transparent;-webkit-user-select:none;user-select:none;pointer-events:none}[_nghost-%COMP%]     .annotationLayer .annotationTextContent span{width:100%;display:inline-block}@media (forced-colors: active){[_nghost-%COMP%]     .xfaLayer *:required{outline:1.5px solid selectedItem}}[_nghost-%COMP%]     .xfaLayer .highlight{margin:-1px;padding:1px;background-color:#efcbed;border-radius:4px}[_nghost-%COMP%]     .xfaLayer .highlight.appended{position:initial}[_nghost-%COMP%]     .xfaLayer .highlight.begin{border-radius:4px 0 0 4px}[_nghost-%COMP%]     .xfaLayer .highlight.end{border-radius:0 4px 4px 0}[_nghost-%COMP%]     .xfaLayer .highlight.middle{border-radius:0}[_nghost-%COMP%]     .xfaLayer .highlight.selected{background-color:#cbdfcb}[_nghost-%COMP%]     .xfaLayer ::selection{background:rgb(0,0,255)}[_nghost-%COMP%]     .xfaPage{overflow:hidden;position:relative}[_nghost-%COMP%]     .xfaContentarea{position:absolute}[_nghost-%COMP%]     .xfaPrintOnly{display:none}[_nghost-%COMP%]     .xfaLayer{position:absolute;text-align:initial;top:0;left:0;transform-origin:0 0;line-height:1.2}[_nghost-%COMP%]     .xfaLayer *{color:inherit;font:inherit;font-style:inherit;font-weight:inherit;font-kerning:inherit;letter-spacing:-.01px;text-align:inherit;text-decoration:inherit;box-sizing:border-box;background-color:transparent;padding:0;margin:0;pointer-events:auto;line-height:inherit}[_nghost-%COMP%]     .xfaLayer *:required{outline:1.5px solid red}[_nghost-%COMP%]     .xfaLayer div{pointer-events:none}[_nghost-%COMP%]     .xfaLayer svg{pointer-events:none}[_nghost-%COMP%]     .xfaLayer svg *{pointer-events:none}[_nghost-%COMP%]     .xfaLayer a{color:#00f}[_nghost-%COMP%]     .xfaRich li{margin-left:3em}[_nghost-%COMP%]     .xfaFont{color:#000;font-weight:400;font-kerning:none;font-size:10px;font-style:normal;letter-spacing:0;text-decoration:none;vertical-align:0}[_nghost-%COMP%]     .xfaCaption{overflow:hidden;flex:0 0 auto}[_nghost-%COMP%]     .xfaCaptionForCheckButton{overflow:hidden;flex:1 1 auto}[_nghost-%COMP%]     .xfaLabel{height:100%;width:100%}[_nghost-%COMP%]     .xfaLeft{display:flex;flex-direction:row;align-items:center}[_nghost-%COMP%]     .xfaRight{display:flex;flex-direction:row-reverse;align-items:center}[_nghost-%COMP%]     .xfaLeft>.xfaCaption, [_nghost-%COMP%]     .xfaLeft>.xfaCaptionForCheckButton, [_nghost-%COMP%]     .xfaRight>.xfaCaption, [_nghost-%COMP%]     .xfaRight>.xfaCaptionForCheckButton{max-height:100%}[_nghost-%COMP%]     .xfaTop{display:flex;flex-direction:column;align-items:flex-start}[_nghost-%COMP%]     .xfaBottom{display:flex;flex-direction:column-reverse;align-items:flex-start}[_nghost-%COMP%]     .xfaTop>.xfaCaption, [_nghost-%COMP%]     .xfaTop>.xfaCaptionForCheckButton, [_nghost-%COMP%]     .xfaBottom>.xfaCaption, [_nghost-%COMP%]     .xfaBottom>.xfaCaptionForCheckButton{width:100%}[_nghost-%COMP%]     .xfaBorder{background-color:transparent;position:absolute;pointer-events:none}[_nghost-%COMP%]     .xfaWrapped{width:100%;height:100%}[_nghost-%COMP%]     .xfaTextfield:focus, [_nghost-%COMP%]     .xfaSelect:focus{background-image:none;background-color:transparent;outline:auto;outline-offset:-1px}[_nghost-%COMP%]     .xfaCheckbox:focus, [_nghost-%COMP%]     .xfaRadio:focus{outline:auto}[_nghost-%COMP%]     .xfaTextfield, [_nghost-%COMP%]     .xfaSelect{height:100%;width:100%;flex:1 1 auto;border:none;resize:none;background-image:var(--xfa-unfocused-field-background)}[_nghost-%COMP%]     .xfaTop>.xfaTextfield, [_nghost-%COMP%]     .xfaTop>.xfaSelect, [_nghost-%COMP%]     .xfaBottom>.xfaTextfield, [_nghost-%COMP%]     .xfaBottom>.xfaSelect{flex:0 1 auto}[_nghost-%COMP%]     .xfaButton{cursor:pointer;width:100%;height:100%;border:none;text-align:center}[_nghost-%COMP%]     .xfaLink{width:100%;height:100%;position:absolute;top:0;left:0}[_nghost-%COMP%]     .xfaCheckbox, [_nghost-%COMP%]     .xfaRadio{width:100%;height:100%;flex:0 0 auto;border:none}[_nghost-%COMP%]     .xfaRich{white-space:pre-wrap;width:100%;height:100%}[_nghost-%COMP%]     .xfaImage{object-position:left top;object-fit:contain;width:100%;height:100%}[_nghost-%COMP%]     .xfaLrTb, [_nghost-%COMP%]     .xfaRlTb, [_nghost-%COMP%]     .xfaTb{display:flex;flex-direction:column;align-items:stretch}[_nghost-%COMP%]     .xfaLr{display:flex;flex-direction:row;align-items:stretch}[_nghost-%COMP%]     .xfaRl{display:flex;flex-direction:row-reverse;align-items:stretch}[_nghost-%COMP%]     .xfaTb>div{justify-content:left}[_nghost-%COMP%]     .xfaPosition{position:relative}[_nghost-%COMP%]     .xfaArea{position:relative}[_nghost-%COMP%]     .xfaValignMiddle{display:flex;align-items:center}[_nghost-%COMP%]     .xfaTable{display:flex;flex-direction:column;align-items:stretch}[_nghost-%COMP%]     .xfaTable .xfaRow{display:flex;flex-direction:row;align-items:stretch}[_nghost-%COMP%]     .xfaTable .xfaRlRow{display:flex;flex-direction:row-reverse;align-items:stretch;flex:1}[_nghost-%COMP%]     .xfaTable .xfaRlRow>div{flex:1}[_nghost-%COMP%]     .xfaNonInteractive input, [_nghost-%COMP%]     .xfaNonInteractive textarea, [_nghost-%COMP%]     .xfaDisabled input, [_nghost-%COMP%]     .xfaDisabled textarea, [_nghost-%COMP%]     .xfaReadOnly input, [_nghost-%COMP%]     .xfaReadOnly textarea{background:initial}@media print{[_nghost-%COMP%]     .xfaTextfield, [_nghost-%COMP%]     .xfaSelect{background:transparent}[_nghost-%COMP%]     .xfaSelect{-webkit-appearance:none;appearance:none;text-indent:1px;text-overflow:""}}[_nghost-%COMP%]     [data-editor-rotation="90"]{transform:rotate(90deg)}[_nghost-%COMP%]     [data-editor-rotation="180"]{transform:rotate(180deg)}[_nghost-%COMP%]     [data-editor-rotation="270"]{transform:rotate(270deg)}[_nghost-%COMP%]     .annotationEditorLayer{background:transparent;position:absolute;top:0;left:0;font-size:calc(100px * var(--scale-factor));transform-origin:0 0}[_nghost-%COMP%]     .annotationEditorLayer .selectedEditor{outline:var(--focus-outline);resize:none}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor{position:absolute;background:transparent;border-radius:3px;padding:calc(var(--freetext-padding) * var(--scale-factor));resize:none;width:auto;height:auto;z-index:1;transform-origin:0 0;touch-action:none}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .internal{background:transparent;border:none;top:0;left:0;overflow:visible;white-space:nowrap;resize:none;font:10px sans-serif;line-height:var(--freetext-line-height)}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .overlay{position:absolute;display:none;background:transparent;top:0;left:0;width:100%;height:100%}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .overlay.enabled{display:block}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .internal:empty:before{content:attr(default-content);color:gray}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .internal:focus{outline:none}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor.disabled{resize:none}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor.disabled.selectedEditor{resize:horizontal}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor:hover:not(.selectedEditor), [_nghost-%COMP%]     .annotationEditorLayer .inkEditor:hover:not(.selectedEditor){outline:var(--hover-outline)}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor{position:absolute;background:transparent;border-radius:3px;overflow:auto;width:100%;height:100%;z-index:1;transform-origin:0 0;cursor:auto}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor.editing{resize:none;cursor:var(--editorInk-editing-cursor),pointer}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor .inkEditorCanvas{position:absolute;top:0;left:0;width:100%;height:100%;touch-action:none}[_nghost-%COMP%]     [data-main-rotation="90"]{transform:rotate(90deg) translateY(-100%)}[_nghost-%COMP%]     [data-main-rotation="180"]{transform:rotate(180deg) translate(-100%,-100%)}[_nghost-%COMP%]     [data-main-rotation="270"]{transform:rotate(270deg) translate(-100%)}[_nghost-%COMP%]     .pdfViewer{padding-bottom:var(--pdfViewer-padding-bottom)}[_nghost-%COMP%]     .pdfViewer .canvasWrapper{overflow:hidden}[_nghost-%COMP%]     .pdfViewer .page{direction:ltr;width:816px;height:1056px;margin:var(--page-margin);position:relative;overflow:visible;border:var(--page-border);border-image:var(--page-border-image);background-clip:content-box;background-color:#fff}[_nghost-%COMP%]     .pdfViewer .dummyPage{position:relative;width:0;height:var(--viewer-container-height)}[_nghost-%COMP%]     .pdfViewer.removePageBorders .page{margin:0 auto 10px;border:none}[_nghost-%COMP%]     .pdfViewer.singlePageView{display:inline-block}[_nghost-%COMP%]     .pdfViewer.singlePageView .page{margin:0;border:none}[_nghost-%COMP%]     .pdfViewer.scrollHorizontal, [_nghost-%COMP%]     .pdfViewer.scrollWrapped, [_nghost-%COMP%]     .spread{margin-left:3.5px;margin-right:3.5px;text-align:center}[_nghost-%COMP%]     .pdfViewer.scrollHorizontal, [_nghost-%COMP%]     .spread{white-space:nowrap}[_nghost-%COMP%]     .pdfViewer.removePageBorders, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .spread, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .spread{margin-left:0;margin-right:0}[_nghost-%COMP%]     .spread .page, [_nghost-%COMP%]     .spread .dummyPage, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .page, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .spread, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .spread{display:inline-block;vertical-align:middle}[_nghost-%COMP%]     .spread .page, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .page{margin-left:var(--spreadHorizontalWrapped-margin-LR);margin-right:var(--spreadHorizontalWrapped-margin-LR)}[_nghost-%COMP%]     .pdfViewer.removePageBorders .spread .page, [_nghost-%COMP%]     .pdfViewer.removePageBorders.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.removePageBorders.scrollWrapped .page{margin-left:5px;margin-right:5px}[_nghost-%COMP%]     .pdfViewer .page canvas{margin:0;display:block}[_nghost-%COMP%]     .pdfViewer .page canvas[hidden]{display:none}[_nghost-%COMP%]     .pdfViewer .page .loadingIcon{position:absolute;display:block;inset:0;background:url(data:image/gif;base64,R0lGODlhGAAYAPQQAM7Ozvr6+uDg4LCwsOjo6I6OjsjIyJycnNjY2KioqMDAwPLy8nZ2doaGhri4uGhoaP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/ilPcHRpbWl6ZWQgd2l0aCBodHRwczovL2V6Z2lmLmNvbS9vcHRpbWl6ZQAh+QQJBwAQACwAAAAAGAAYAAAFmiAkjiTkOGVaBgjZNGSgkgKjjM8zLoI8iy+BKCdiCX8iBeMAhEEIPRXLxViYUE9CbCQoFAzFhHY3zkaT3oPvBz1zE4UBsr1eWZH4vAowOBwGAHk8AoQLfH6Agm0Ed3qOAXWOIgQKiWyFJQgDgJEpdG+WEACNEFNFmKVlVzJQk6qdkwqBoi1mebJ3ALNGeIZHtGSwNDS1RZKueCEAIfkECQcAEAAsAAAAABgAGAAABZcgJI4kpChlWgYCWRQkEKgjURgjw4zOg9CjVwuiEyEeO6CxkBC9nA+HiuUqLEyoBZI0Mx4SAFFgQCDZuguBoGv6Dtg0gvpqdhxQQDkBzuUr/4A1JwMKP39pc2mDhYCIc4GQYn6QCwCMeY91l0p6dBAEJ0OfcFRimZ91Mwt0alxxAIZyRmuAsKxDLKKvZbM1tJxmvGKRpn8hACH5BAkHABAALAAAAAAYABgAAAWhICSOJGQYZVoGAnkcJBKoI3EAY1GMCtPSosSBINKJBIwGkHdwBGGQA0OhYpEGQxNqkYzNIITBACEKKBaxxNfBeOCO4vMy0Hg8nDHFeCktkKtfNAtoS4UqAicKBj9zBAKPC4iKi4aRkISGmWWBmjUIAIyHkCUEAKCVo2WmREecVqoCgZhgP4NHrGWCj7e3szSpuxAsoVWxnp6cVV4kyZW+KSEAIfkECQcAEAAsAAAAABgAGAAABZkgJI4kBABlWgYEOQykEKgjMSDjcYxG0dKi108nEhQKQN4rCIMkCgbawjWYnSCLY2yGVSgEooBhWqsGGwxc0RtNBgoMhmJ1QgETjANYFeBKyUmBKQQIdT9JDmgPDQ6EhoKJD4sOgpWWgiwChyqEBH5hmptSoSOZgJ4kLKWkYTF7C2SaqaM/hEWygay4mYG8t6uffFuzl1iANCEAIfkECQcAEAAsAAAAABgAGAAABZ0gJI4khCBlmhKkopBCoI6LIozDMAIHO4uuBVBnOiR+I4FrCDwAZsKdQnaCLIwwmRUA8JmioprWUCjcwlwUMnAoG0qL03k2KCS8cC0UjOzDCQKBfHQFDAwFU4CCfgqFhy9+kZJWgzSKSAcPZn+BfQENDw8OljGWJAFeDoZPYTBnC1GdSXqnsoBolSulX2GyP6hgvnG0KrS3NJNhuSQhACH5BAkHABAALAAAAAAYABgAAAWaICSOJCQIZZoupGGQRKCOC0CMijIiwz2LABtQZxoMfjQhxAXszWQ7gOwECRhh0MCJJRJARTUoIHFAgbfI6uBwAJS01J/i4PClVYHvfV8lbLlIBmwFbQt+aGmChG18jXeGT4dICQxlb4g/AQUMDER9XjR6BAdiDQwINDBmkAsPDVh4cX4imw53iLKuaVqAcUsPqEiidkt6j4AzIQAh+QQJBwAQACwAAAAAGAAYAAAFmSAkjiREEGWaBiSCtCoZCMsIAKOg1LEo0KKbaKFQ9EYLoOkFuQlirNxzCQkUW9GZ0hQd4nyDAWr4G/esYSbyZFYZwu3jqiuvr8u8I2BwOAwASXh1e31/doeHC3klWnElfAlTd46MfQUGk2stCVEGBQWSdCciDg5VDAVYKoEiDQ0iBwxGcj9RDw8+qHIzebc2DJJQJK6qiKVyIQAh+QQJBwAQACwAAAAAGAAYAAAFmSAkjiS0LGWaBiRBtCoZCKgoCCMB1DF0sz6cCQDo5W62l28XAyZFpyECBv3lnCbhUqHMIo0Qg4Jbmn1jRCa4iV27TzfXGjEecOFWMN1OdvvfPGUuXSoKBw6EXokrAwcHRVU0UAeEBANAAAmUI1gNDyhjJgUHLW0iDg8FIqOnBQZrDA9TELE2rEYIDw4jta2LMpCrqld/YQpgIQAh+QQJBwAQACwAAAAAGAAYAAAFmyAkjiS0LGWaBiRBkKw6BgIqCsJcyyMe4yJajhcEml5H26o1PN2QQd3uFiv2AADlAgflIbDdZLgkABOJgep5LfWty4p4zeU+w+XsvJWXliEKDwdEBgMKYQ4PDw1qK3EDCCMAiQ5BCV0LCj+FSDQkgCgGBiYHAy2MIgoMghAHqw4HAGsNDEMFBTekdgwKI7aRB2MwkL2rVHoQoWchACH5BAkHABAALAAAAAAYABgAAAWWICSOJLQsZZoGJEGQrDoGAioKwlzLIx7jIlqOFwSaXkfbqjU83ZBB3e4WK0qrCxyU55peid0qcUwuixyNx6PhILsAcAJazXYj4lvz2MkLiFsHDAlEcABKZwwMBX8pBgoKQxAIigpBA1sLBj+PSDQkB4uSACYDlTMyBgWDEKVnl2QFBUigN61gBQYjtLV5JZ4jtlR6omMhACH5BAkHABAALAAAAAAYABgAAAWaICSOJLQsZZoGJEGQrDoGAioKwlzLIx7jIlqOFwSaXkdbidYanm7I4AjwYDh6saJuJ3JUG1mZi9srPA7EcRimJLrfJYWZUVC8TziXnEG3u/E+cIJaPAFrPQl1aQAIbRAGBZGHJQiMUQKRBkEKbQsAPZaEXQcslSYKmjMyAAdXj34ACkNEiUgDA5t+PAQHn6Ogjkuzry2DNwhuIQAh+QQFBwAQACwAAAAAGAAYAAAFnCAkjiS0LGVaBgBJEGSguo8zCsK4CPIsMg+ECCcKEH0ix6MwhJl4KiOp8UCdmrEbo6EoHpxF8A6aBBZ6vhf5dmAkkGr0CoWs21WGQ2FvsI9xC3l7B311fy93iWGKJQQOhHCAJQB6A3IqcWwJLU90i2FkUiMKlhBELEI6MwgDXRAGhQgAYD6tTqRFAJxpA6mvrqazSKJJhUWMpjlIIQA7) center no-repeat}[_nghost-%COMP%]     .pdfViewer .page .loadingIcon.notVisible{background:none}[_nghost-%COMP%]     .pdfViewer.enablePermissions .textLayer span{-webkit-user-select:none!important;user-select:none!important;cursor:not-allowed}[_nghost-%COMP%]     .pdfPresentationMode .pdfViewer{padding-bottom:0}[_nghost-%COMP%]     .pdfPresentationMode .spread{margin:0}[_nghost-%COMP%]     .pdfPresentationMode .pdfViewer .page{margin:0 auto;border:2px solid transparent}']})}return oe})(),Xt=(()=>{class oe{static \u0275fac=function(x){return new(x||oe)};static \u0275mod=h.$C({type:oe});static \u0275inj=h.G2t({})}return oe})();function qt(oe,R){if(1&oe){const A=h.RV6();h.j41(0,"div",0)(1,"header",1)(2,"a",2),h.bIt("click",function(){h.eBV(A);const W=h.XpG();return h.Njj(W.location.back())}),h.j41(3,"div",3),h.nrm(4,"icon",4),h.EFF(5," Ir a la biblioteca "),h.k0s()(),h.j41(6,"div")(7,"h1",5),h.EFF(8),h.k0s()()(),h.nrm(9,"pdf-viewer",6),h.j41(10,"div",7),h.nrm(11,"prose",8),h.k0s()()}if(2&oe){const A=R,x=h.XpG();h.R7$(4),h.Y8G("path",x.backIcon)("size",15),h.R7$(4),h.SpI(" ",A.title," "),h.R7$(),h.Y8G("render-text",!0)("original-size",!1),h.R7$(2),h.Y8G("data",A.content)}}const Yt=[{path:"",component:(()=>{class oe{constructor(){this.backIcon=e.jG,this.data=(0,h.vPA)(null),this.location=(0,h.WQX)(n.Location),this.blogService=(0,h.WQX)(p.c),this.platformCheck=(0,h.WQX)(l.f),this.metaService=(0,h.WQX)(i.R),this.paramMap=a((0,h.WQX)(t.ActivatedRoute).paramMap),(0,h.QZP)(A=>{this.sub=this.blogService.get(this.paramMap()?.get("slug")).subscribe(x=>{this.data.set(x),this.metaService.setMetaTags(x.title,x.summary,x.keywords,x.smallImage)}),A(()=>{this.sub.unsubscribe()})})}static#e=this.\u0275fac=function(x){return new(x||oe)};static#t=this.\u0275cmp=h.VBU({type:oe,selectors:[["blog-detail-page"]],standalone:!0,features:[h.aNF],decls:1,vars:1,consts:[[1,"mx-auto","dark:text-white","text-gray-800"],[1,"flex","flex-col","gap-7"],[1,"text-primary-800","hover:text-black","dark:text-primary-200","dark:hover:text-white","font-medium",3,"click"],[1,"flex","items-center","gap-1"],[3,"path","size"],[1,"font-semibold","text-3xl","md:text-4xl","md:!leading-[120%]","lg:text-5xl","max-w-4xl"],["src","https://vadimdez.github.io/ng2-pdf-viewer/assets/pdf-test.pdf",2,"width","1000px","height","1500px",3,"render-text","original-size"],[1,"flex","flex-col","gap-3","text-lg","py-6"],[3,"data"]],template:function(x,W){if(1&x&&h.DNE(0,qt,12,6,"div",0),2&x){let K;h.vxM((K=W.data())?0:-1,K)}},dependencies:[o.I,c,wt,Xt,$t],encapsulation:2,changeDetection:0})}return oe})()}]},717:(module,__unused_webpack_exports,__webpack_require__)=>{var _asyncToGenerator=__webpack_require__(9293).default,m,D;m=globalThis,D=()=>(()=>{"use strict";var __webpack_modules__=[,(J,m)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.VerbosityLevel=m.Util=m.UnknownErrorException=m.UnexpectedResponseException=m.TextRenderingMode=m.RenderingIntentFlag=m.PromiseCapability=m.PermissionFlag=m.PasswordResponses=m.PasswordException=m.PageActionEventType=m.OPS=m.MissingPDFException=m.MAX_IMAGE_SIZE_TO_CACHE=m.LINE_FACTOR=m.LINE_DESCENT_FACTOR=m.InvalidPDFException=m.ImageKind=m.IDENTITY_MATRIX=m.FormatError=m.FeatureTest=m.FONT_IDENTITY_MATRIX=m.DocumentActionEventType=m.CMapCompressionType=m.BaseException=m.BASELINE_FACTOR=m.AnnotationType=m.AnnotationReplyType=m.AnnotationPrefix=m.AnnotationMode=m.AnnotationFlag=m.AnnotationFieldFlag=m.AnnotationEditorType=m.AnnotationEditorPrefix=m.AnnotationEditorParamsType=m.AnnotationBorderStyleType=m.AnnotationActionEventType=m.AbortException=void 0,m.assert=function s(ge,ae){ge||y(ae)},m.bytesToString=H,m.createValidAbsoluteUrl=function _(ge,ae=null,ie=null){if(!ge)return null;try{if(ie&&"string"==typeof ge&&(ie.addDefaultProtocol&&ge.startsWith("www.")&&ge.match(/\./g)?.length>=2&&(ge=`http://${ge}`),ie.tryConvertEncoding))try{ge=me(ge)}catch{}const be=ae?new URL(ge,ae):new URL(ge);if(function f(ge){switch(ge?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(be))return be}catch{}return null},m.getModificationDate=function Ce(ge=new Date){return[ge.getUTCFullYear().toString(),(ge.getUTCMonth()+1).toString().padStart(2,"0"),ge.getUTCDate().toString().padStart(2,"0"),ge.getUTCHours().toString().padStart(2,"0"),ge.getUTCMinutes().toString().padStart(2,"0"),ge.getUTCSeconds().toString().padStart(2,"0")].join("")},m.getUuid=function Ze(){if(typeof crypto<"u"&&"function"==typeof crypto?.randomUUID)return crypto.randomUUID();const ge=new Uint8Array(32);if(typeof crypto<"u"&&"function"==typeof crypto?.getRandomValues)crypto.getRandomValues(ge);else for(let ae=0;ae<32;ae++)ge[ae]=Math.floor(255*Math.random());return H(ge)},m.getVerbosityLevel=function se(){return j},m.info=function te(ge){j>=T.INFOS&&console.log(`Info: ${ge}`)},m.isArrayBuffer=function ye(ge){return"object"==typeof ge&&void 0!==ge?.byteLength},m.isArrayEqual=function xe(ge,ae){if(ge.length!==ae.length)return!1;for(let ie=0,be=ge.length;ie<be;ie++)if(ge[ie]!==ae[ie])return!1;return!0},m.isNodeJS=void 0,m.normalizeUnicode=function Qe(ge){return Ie||(Ie=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Ue=new Map([["\ufb05","\u017ft"]])),ge.replaceAll(Ie,(ae,ie,be)=>ie?ie.normalize("NFKC"):Ue.get(be))},m.objectFromMap=function re(ge){const ae=Object.create(null);for(const[ie,be]of ge)ae[ie]=be;return ae},m.objectSize=function fe(ge){return Object.keys(ge).length},m.setVerbosityLevel=function q(ge){Number.isInteger(ge)&&(j=ge)},m.shadow=b,m.string32=function ee(ge){return String.fromCharCode(ge>>24&255,ge>>16&255,ge>>8&255,255&ge)},m.stringToBytes=Y,m.stringToPDFString=function pe(ge){if(ge[0]>="\xef"){let ie;if("\xfe"===ge[0]&&"\xff"===ge[1]?ie="utf-16be":"\xff"===ge[0]&&"\xfe"===ge[1]?ie="utf-16le":"\xef"===ge[0]&&"\xbb"===ge[1]&&"\xbf"===ge[2]&&(ie="utf-8"),ie)try{const be=new TextDecoder(ie,{fatal:!0}),we=Y(ge);return be.decode(we)}catch(be){z(`stringToPDFString: "${be}".`)}}const ae=[];for(let ie=0,be=ge.length;ie<be;ie++){const we=le[ge.charCodeAt(ie)];ae.push(we?String.fromCharCode(we):ge.charAt(ie))}return ae.join("")},m.stringToUTF8String=me,m.unreachable=y,m.utf8StringToString=function ve(ge){return unescape(encodeURIComponent(ge))},m.warn=z;const D=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);m.isNodeJS=D,m.IDENTITY_MATRIX=[1,0,0,1,0,0],m.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],m.MAX_IMAGE_SIZE_TO_CACHE=1e7,m.LINE_FACTOR=1.35,m.LINE_DESCENT_FACTOR=.35,m.BASELINE_FACTOR=.35/1.35,m.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},m.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},m.AnnotationEditorPrefix="pdfjs_internal_editor_",m.AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15},m.AnnotationEditorParamsType={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23},m.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},m.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},m.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},m.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},m.AnnotationReplyType={GROUP:"Group",REPLY:"R"},m.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},m.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},m.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},m.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"},m.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"},m.PageActionEventType={O:"PageOpen",C:"PageClose"};const T={ERRORS:0,WARNINGS:1,INFOS:5};m.VerbosityLevel=T,m.CMapCompressionType={NONE:0,BINARY:1},m.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},m.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let j=T.WARNINGS;function z(ge){j>=T.WARNINGS&&console.log(`Warning: ${ge}`)}function y(ge){throw new Error(ge)}function b(ge,ae,ie,be=!1){return Object.defineProperty(ge,ae,{value:ie,enumerable:!be,configurable:!0,writable:!1}),ie}const M=function(){function ae(ie,be){this.constructor===ae&&y("Cannot initialize BaseException."),this.message=ie,this.name=be}return ae.prototype=new Error,ae.constructor=ae,ae}();function H(ge){("object"!=typeof ge||void 0===ge?.length)&&y("Invalid argument for bytesToString");const ae=ge.length;if(ae<8192)return String.fromCharCode.apply(null,ge);const be=[];for(let we=0;we<ae;we+=8192){const Me=Math.min(we+8192,ae),Le=ge.subarray(we,Me);be.push(String.fromCharCode.apply(null,Le))}return be.join("")}function Y(ge){"string"!=typeof ge&&y("Invalid argument for stringToBytes");const ae=ge.length,ie=new Uint8Array(ae);for(let be=0;be<ae;++be)ie[be]=255&ge.charCodeAt(be);return ie}m.BaseException=M,m.PasswordException=class O extends M{constructor(ae,ie){super(ae,"PasswordException"),this.code=ie}},m.UnknownErrorException=class I extends M{constructor(ae,ie){super(ae,"UnknownErrorException"),this.details=ie}},m.InvalidPDFException=class g extends M{constructor(ae){super(ae,"InvalidPDFException")}},m.MissingPDFException=class P extends M{constructor(ae){super(ae,"MissingPDFException")}},m.UnexpectedResponseException=class k extends M{constructor(ae,ie){super(ae,"UnexpectedResponseException"),this.status=ie}},m.FormatError=class F extends M{constructor(ae){super(ae,"FormatError")}},m.AbortException=class B extends M{constructor(ae){super(ae,"AbortException")}},m.FeatureTest=class X{static get isLittleEndian(){return b(this,"isLittleEndian",function ce(){const ge=new Uint8Array(4);return ge[0]=1,1===new Uint32Array(ge.buffer,0,1)[0]}())}static get isEvalSupported(){return b(this,"isEvalSupported",function de(){try{return new Function(""),!0}catch{return!1}}())}static get isOffscreenCanvasSupported(){return b(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?b(this,"platform",{isWin:!1,isMac:!1}):b(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){return b(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}};const ne=[...Array(256).keys()].map(ge=>ge.toString(16).padStart(2,"0"));m.Util=class he{static makeHexColor(ae,ie,be){return`#${ne[ae]}${ne[ie]}${ne[be]}`}static scaleMinMax(ae,ie){let be;ae[0]?(ae[0]<0&&(be=ie[0],ie[0]=ie[1],ie[1]=be),ie[0]*=ae[0],ie[1]*=ae[0],ae[3]<0&&(be=ie[2],ie[2]=ie[3],ie[3]=be),ie[2]*=ae[3],ie[3]*=ae[3]):(be=ie[0],ie[0]=ie[2],ie[2]=be,be=ie[1],ie[1]=ie[3],ie[3]=be,ae[1]<0&&(be=ie[2],ie[2]=ie[3],ie[3]=be),ie[2]*=ae[1],ie[3]*=ae[1],ae[2]<0&&(be=ie[0],ie[0]=ie[1],ie[1]=be),ie[0]*=ae[2],ie[1]*=ae[2]),ie[0]+=ae[4],ie[1]+=ae[4],ie[2]+=ae[5],ie[3]+=ae[5]}static transform(ae,ie){return[ae[0]*ie[0]+ae[2]*ie[1],ae[1]*ie[0]+ae[3]*ie[1],ae[0]*ie[2]+ae[2]*ie[3],ae[1]*ie[2]+ae[3]*ie[3],ae[0]*ie[4]+ae[2]*ie[5]+ae[4],ae[1]*ie[4]+ae[3]*ie[5]+ae[5]]}static applyTransform(ae,ie){return[ae[0]*ie[0]+ae[1]*ie[2]+ie[4],ae[0]*ie[1]+ae[1]*ie[3]+ie[5]]}static applyInverseTransform(ae,ie){const be=ie[0]*ie[3]-ie[1]*ie[2];return[(ae[0]*ie[3]-ae[1]*ie[2]+ie[2]*ie[5]-ie[4]*ie[3])/be,(-ae[0]*ie[1]+ae[1]*ie[0]+ie[4]*ie[1]-ie[5]*ie[0])/be]}static getAxialAlignedBoundingBox(ae,ie){const be=this.applyTransform(ae,ie),we=this.applyTransform(ae.slice(2,4),ie),Me=this.applyTransform([ae[0],ae[3]],ie),Le=this.applyTransform([ae[2],ae[1]],ie);return[Math.min(be[0],we[0],Me[0],Le[0]),Math.min(be[1],we[1],Me[1],Le[1]),Math.max(be[0],we[0],Me[0],Le[0]),Math.max(be[1],we[1],Me[1],Le[1])]}static inverseTransform(ae){const ie=ae[0]*ae[3]-ae[1]*ae[2];return[ae[3]/ie,-ae[1]/ie,-ae[2]/ie,ae[0]/ie,(ae[2]*ae[5]-ae[4]*ae[3])/ie,(ae[4]*ae[1]-ae[5]*ae[0])/ie]}static singularValueDecompose2dScale(ae){const ie=[ae[0],ae[2],ae[1],ae[3]],be=ae[0]*ie[0]+ae[1]*ie[2],Le=ae[2]*ie[1]+ae[3]*ie[3],We=(be+Le)/2,He=Math.sqrt((be+Le)**2-4*(be*Le-(ae[2]*ie[0]+ae[3]*ie[2])*(ae[0]*ie[1]+ae[1]*ie[3])))/2,Ne=We-He||1;return[Math.sqrt(We+He||1),Math.sqrt(Ne)]}static normalizeRect(ae){const ie=ae.slice(0);return ae[0]>ae[2]&&(ie[0]=ae[2],ie[2]=ae[0]),ae[1]>ae[3]&&(ie[1]=ae[3],ie[3]=ae[1]),ie}static intersect(ae,ie){const be=Math.max(Math.min(ae[0],ae[2]),Math.min(ie[0],ie[2])),we=Math.min(Math.max(ae[0],ae[2]),Math.max(ie[0],ie[2]));if(be>we)return null;const Me=Math.max(Math.min(ae[1],ae[3]),Math.min(ie[1],ie[3])),Le=Math.min(Math.max(ae[1],ae[3]),Math.max(ie[1],ie[3]));return Me>Le?null:[be,Me,we,Le]}static bezierBoundingBox(ae,ie,be,we,Me,Le,We,He){const Ve=[],Ne=[[],[]];let Ge,ze,Je,Re,et,tt,ct,nt;for(let rt=0;rt<2;++rt)if(0===rt?(ze=6*ae-12*be+6*Me,Ge=-3*ae+9*be-9*Me+3*We,Je=3*be-3*ae):(ze=6*ie-12*we+6*Le,Ge=-3*ie+9*we-9*Le+3*He,Je=3*we-3*ie),Math.abs(Ge)<1e-12){if(Math.abs(ze)<1e-12)continue;Re=-Je/ze,0<Re&&Re<1&&Ve.push(Re)}else ct=ze*ze-4*Je*Ge,nt=Math.sqrt(ct),!(ct<0)&&(et=(-ze+nt)/(2*Ge),0<et&&et<1&&Ve.push(et),tt=(-ze-nt)/(2*Ge),0<tt&&tt<1&&Ve.push(tt));let Fe,$e=Ve.length;const Ye=$e;for(;$e--;)Re=Ve[$e],Fe=1-Re,Ne[0][$e]=Fe*Fe*Fe*ae+3*Fe*Fe*Re*be+3*Fe*Re*Re*Me+Re*Re*Re*We,Ne[1][$e]=Fe*Fe*Fe*ie+3*Fe*Fe*Re*we+3*Fe*Re*Re*Le+Re*Re*Re*He;return Ne[0][Ye]=ae,Ne[1][Ye]=ie,Ne[0][Ye+1]=We,Ne[1][Ye+1]=He,Ne[0].length=Ne[1].length=Ye+2,[Math.min(...Ne[0]),Math.min(...Ne[1]),Math.max(...Ne[0]),Math.max(...Ne[1])]}};const le=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function me(ge){return decodeURIComponent(escape(ge))}m.PromiseCapability=class Be{#e=!1;constructor(){this.promise=new Promise((ae,ie)=>{this.resolve=be=>{this.#e=!0,ae(be)},this.reject=be=>{this.#e=!0,ie(be)}})}get settled(){return this.#e}};let Ie=null,Ue=null;m.AnnotationPrefix="pdfjs_internal_id_"},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;function getDocument(J){if("string"==typeof J||J instanceof URL?J={url:J}:(0,_util.isArrayBuffer)(J)&&(J={data:J}),"object"!=typeof J)throw new Error("Invalid parameter in getDocument, need parameter object.");if(!J.url&&!J.data&&!J.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const m=new PDFDocumentLoadingTask,{docId:D}=m,h=J.url?getUrlProp(J.url):null,L=J.data?getDataProp(J.data):null,G=J.httpHeaders||null,N=!0===J.withCredentials,Z=J.password??null,V=J.range instanceof PDFDataRangeTransport?J.range:null,a=Number.isInteger(J.rangeChunkSize)&&J.rangeChunkSize>0?J.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let r=J.worker instanceof PDFWorker?J.worker:null;const t=J.verbosity,n="string"!=typeof J.docBaseUrl||(0,_display_utils.isDataScheme)(J.docBaseUrl)?null:J.docBaseUrl,p="string"==typeof J.cMapUrl?J.cMapUrl:null,l=!1!==J.cMapPacked,e=J.CMapReaderFactory||DefaultCMapReaderFactory,i="string"==typeof J.standardFontDataUrl?J.standardFontDataUrl:null,o=J.StandardFontDataFactory||DefaultStandardFontDataFactory,c=!0!==J.stopAtErrors,w=Number.isInteger(J.maxImageSize)&&J.maxImageSize>-1?J.maxImageSize:-1,S=!1!==J.isEvalSupported,u="boolean"==typeof J.isOffscreenCanvasSupported?J.isOffscreenCanvasSupported:!_util.isNodeJS,v=Number.isInteger(J.canvasMaxAreaInBytes)?J.canvasMaxAreaInBytes:-1,d="boolean"==typeof J.disableFontFace?J.disableFontFace:_util.isNodeJS,E=!0===J.fontExtraProperties,T=!0===J.enableXfa,U=J.ownerDocument||globalThis.document,C=!0===J.disableRange,$=!0===J.disableStream,j=!0===J.disableAutoFetch,q=!0===J.pdfBug,se=V?V.length:J.length??NaN,te="boolean"==typeof J.useSystemFonts?J.useSystemFonts:!_util.isNodeJS&&!d,z="boolean"==typeof J.useWorkerFetch?J.useWorkerFetch:e===_display_utils.DOMCMapReaderFactory&&o===_display_utils.DOMStandardFontDataFactory&&p&&i&&(0,_display_utils.isValidFetchUrl)(p,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(i,document.baseURI),y=J.canvasFactory||new DefaultCanvasFactory({ownerDocument:U}),s=J.filterFactory||new DefaultFilterFactory({docId:D,ownerDocument:U});(0,_util.setVerbosityLevel)(t);const _={canvasFactory:y,filterFactory:s};if(z||(_.cMapReaderFactory=new e({baseUrl:p,isCompressed:l}),_.standardFontDataFactory=new o({baseUrl:i})),!r){const O={verbosity:t,port:_worker_options.GlobalWorkerOptions.workerPort};r=O.port?PDFWorker.fromPort(O):new PDFWorker(O),m._worker=r}const b={docId:D,apiVersion:"3.11.174",data:L,password:Z,disableAutoFetch:j,rangeChunkSize:a,length:se,docBaseUrl:n,enableXfa:T,evaluatorOptions:{maxImageSize:w,disableFontFace:d,ignoreErrors:c,isEvalSupported:S,isOffscreenCanvasSupported:u,canvasMaxAreaInBytes:v,fontExtraProperties:E,useSystemFonts:te,cMapUrl:z?p:null,standardFontDataUrl:z?i:null}},M={ignoreErrors:c,isEvalSupported:S,disableFontFace:d,fontExtraProperties:E,enableXfa:T,ownerDocument:U,disableAutoFetch:j,pdfBug:q,styleElement:null};return r.promise.then(function(){if(m.destroyed)throw new Error("Loading aborted");const O=_fetchDocument(r,b),I=new Promise(function(g){let P;var F;V?P=new _transport_stream.PDFDataTransportStream({length:se,initialData:V.initialData,progressiveDone:V.progressiveDone,contentDispositionFilename:V.contentDispositionFilename,disableRange:C,disableStream:$},V):L||(F={url:h,length:se,httpHeaders:G,withCredentials:N,rangeChunkSize:a,disableRange:C,disableStream:$},P=_util.isNodeJS?new _displayNode_stream.PDFNodeStream(F):(0,_display_utils.isValidFetchUrl)(F.url)?new _displayFetch_stream.PDFFetchStream(F):new _displayNetwork.PDFNetworkStream(F)),g(P)});return Promise.all([O,I]).then(function([g,P]){if(m.destroyed)throw new Error("Loading aborted");const k=new _message_handler.MessageHandler(D,g,r.port),F=new WorkerTransport(k,m,P,M,_);m._transport=F,k.send("Ready",null)})}).catch(m._capability.reject),m}function _fetchDocument(J,m){return _fetchDocument2.apply(this,arguments)}function _fetchDocument2(){return(_fetchDocument2=_asyncToGenerator(function*(J,m){if(J.destroyed)throw new Error("Worker was destroyed");const D=yield J.messageHandler.sendWithPromise("GetDocRequest",m,m.data?[m.data.buffer]:null);if(J.destroyed)throw new Error("Worker was destroyed");return D})).apply(this,arguments)}function getUrlProp(J){if(J instanceof URL)return J.href;try{return new URL(J,window.location).href}catch{if(_util.isNodeJS&&"string"==typeof J)return J}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(J){if(_util.isNodeJS&&typeof Buffer<"u"&&J instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(J instanceof Uint8Array&&J.byteLength===J.buffer.byteLength)return J;if("string"==typeof J)return(0,_util.stringToBytes)(J);if("object"==typeof J&&!isNaN(J?.length)||(0,_util.isArrayBuffer)(J))return new Uint8Array(J);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;class PDFDocumentLoadingTask{static#e=0;constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId="d"+PDFDocumentLoadingTask.#e++,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}destroy(){var m=this;return _asyncToGenerator(function*(){m.destroyed=!0;try{m._worker?.port&&(m._worker._pendingDestroy=!0),yield m._transport?.destroy()}catch(D){throw m._worker?.port&&delete m._worker._pendingDestroy,D}m._transport=null,m._worker&&(m._worker.destroy(),m._worker=null)})()}}exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(m,D,h=!1,L=null){this.length=m,this.initialData=D,this.progressiveDone=h,this.contentDispositionFilename=L,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(m){this._rangeListeners.push(m)}addProgressListener(m){this._progressListeners.push(m)}addProgressiveReadListener(m){this._progressiveReadListeners.push(m)}addProgressiveDoneListener(m){this._progressiveDoneListeners.push(m)}onDataRange(m,D){for(const h of this._rangeListeners)h(m,D)}onDataProgress(m,D){this._readyCapability.promise.then(()=>{for(const h of this._progressListeners)h(m,D)})}onDataProgressiveRead(m){this._readyCapability.promise.then(()=>{for(const D of this._progressiveReadListeners)D(m)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const m of this._progressiveDoneListeners)m()})}transportReady(){this._readyCapability.resolve()}requestDataRange(m,D){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(m,D){this._pdfInfo=m,this._transport=D,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(h=>{if(!h)return h;const L=[];for(const G in h)L.push(...h[G]);return L}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(m){return this._transport.getPage(m)}getPageIndex(m){return this._transport.getPageIndex(m)}getDestinations(){return this._transport.getDestinations()}getDestination(m){return this._transport.getDestination(m)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(m=!1){return this._transport.startCleanup(m||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{#e=null;#t=!1;constructor(m,D,h,L=!1){this._pageIndex=m,this._pageInfo=D,this._transport=h,this._stats=L?new _display_utils.StatTimer:null,this._pdfBug=L,this.commonObjs=h.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:m,rotation:D=this.rotate,offsetX:h=0,offsetY:L=0,dontFlip:G=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:m,rotation:D,offsetX:h,offsetY:L,dontFlip:G})}getAnnotations({intent:m="display"}={}){const D=this._transport.getRenderingIntent(m);return this._transport.getAnnotations(this._pageIndex,D.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}getXfa(){var m=this;return _asyncToGenerator(function*(){return m._transport._htmlForXfa?.children[m._pageIndex]||null})()}render({canvasContext:m,viewport:D,intent:h="display",annotationMode:L=_util.AnnotationMode.ENABLE,transform:G=null,background:N=null,optionalContentConfigPromise:Z=null,annotationCanvasMap:V=null,pageColors:a=null,printAnnotationStorage:r=null}){this._stats?.time("Overall");const t=this._transport.getRenderingIntent(h,L,r);this.#t=!1,this.#i(),Z||(Z=this._transport.getOptionalContentConfig());let n=this._intentStates.get(t.cacheKey);n||(n=Object.create(null),this._intentStates.set(t.cacheKey,n)),n.streamReaderCancelTimeout&&(clearTimeout(n.streamReaderCancelTimeout),n.streamReaderCancelTimeout=null);const p=!!(t.renderingIntent&_util.RenderingIntentFlag.PRINT);n.displayReadyCapability||(n.displayReadyCapability=new _util.PromiseCapability,n.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(t));const l=o=>{n.renderTasks.delete(e),(this._maybeCleanupAfterRender||p)&&(this.#t=!0),this.#n(!p),o?(e.capability.reject(o),this._abortOperatorList({intentState:n,reason:o instanceof Error?o:new Error(o)})):e.capability.resolve(),this._stats?.timeEnd("Rendering"),this._stats?.timeEnd("Overall")},e=new InternalRenderTask({callback:l,params:{canvasContext:m,viewport:D,transform:G,background:N},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:V,operatorList:n.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!p,pdfBug:this._pdfBug,pageColors:a});(n.renderTasks||=new Set).add(e);const i=e.task;return Promise.all([n.displayReadyCapability.promise,Z]).then(([o,c])=>{this.destroyed?l():(this._stats?.time("Rendering"),e.initializeGraphics({transparency:o,optionalContentConfig:c}),e.operatorListChanged())}).catch(l),i}getOperatorList({intent:m="display",annotationMode:D=_util.AnnotationMode.ENABLE,printAnnotationStorage:h=null}={}){const G=this._transport.getRenderingIntent(m,D,h,!0);let Z,N=this._intentStates.get(G.cacheKey);return N||(N=Object.create(null),this._intentStates.set(G.cacheKey,N)),N.opListReadCapability||(Z=Object.create(null),Z.operatorListChanged=function L(){N.operatorList.lastChunk&&(N.opListReadCapability.resolve(N.operatorList),N.renderTasks.delete(Z))},N.opListReadCapability=new _util.PromiseCapability,(N.renderTasks||=new Set).add(Z),N.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(G)),N.opListReadCapability.promise}streamTextContent({includeMarkedContent:m=!1,disableNormalization:D=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===m,disableNormalization:!0===D},{highWaterMark:100,size:L=>L.items.length})}getTextContent(m={}){if(this._transport._htmlForXfa)return this.getXfa().then(h=>_xfa_text.XfaText.textContent(h));const D=this.streamTextContent(m);return new Promise(function(h,L){const N=D.getReader(),Z={items:[],styles:Object.create(null)};!function G(){N.read().then(function({value:V,done:a}){a?h(Z):(Object.assign(Z.styles,V.styles),Z.items.push(...V.items),G())},L)}()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const m=[];for(const D of this._intentStates.values())if(this._abortOperatorList({intentState:D,reason:new Error("Page was destroyed."),force:!0}),!D.opListReadCapability)for(const h of D.renderTasks)m.push(h.completed),h.cancel();return this.objs.clear(),this.#t=!1,this.#i(),Promise.all(m)}cleanup(m=!1){this.#t=!0;const D=this.#n(!1);return m&&D&&(this._stats&&=new _display_utils.StatTimer),D}#n(m=!1){if(this.#i(),!this.#t||this.destroyed)return!1;if(m)return this.#e=setTimeout(()=>{this.#e=null,this.#n(!1)},DELAYED_CLEANUP_TIMEOUT),!1;for(const{renderTasks:D,operatorList:h}of this._intentStates.values())if(D.size>0||!h.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}#i(){this.#e&&(clearTimeout(this.#e),this.#e=null)}_startRenderPage(m,D){const h=this._intentStates.get(D);h&&(this._stats?.timeEnd("Page Request"),h.displayReadyCapability?.resolve(m))}_renderPageChunk(m,D){for(let h=0,L=m.length;h<L;h++)D.operatorList.fnArray.push(m.fnArray[h]),D.operatorList.argsArray.push(m.argsArray[h]);D.operatorList.lastChunk=m.lastChunk,D.operatorList.separateAnnots=m.separateAnnots;for(const h of D.renderTasks)h.operatorListChanged();m.lastChunk&&this.#n(!0)}_pumpOperatorList({renderingIntent:m,cacheKey:D,annotationStorageSerializable:h}){const{map:L,transfers:G}=h,Z=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:m,cacheKey:D,annotationStorage:L},G).getReader(),V=this._intentStates.get(D);V.streamReader=Z;const a=()=>{Z.read().then(({value:r,done:t})=>{t?V.streamReader=null:this._transport.destroyed||(this._renderPageChunk(r,V),a())},r=>{if(V.streamReader=null,!this._transport.destroyed){if(V.operatorList){V.operatorList.lastChunk=!0;for(const t of V.renderTasks)t.operatorListChanged();this.#n(!0)}if(V.displayReadyCapability)V.displayReadyCapability.reject(r);else{if(!V.opListReadCapability)throw r;V.opListReadCapability.reject(r)}}})};a()}_abortOperatorList({intentState:m,reason:D,force:h=!1}){if(m.streamReader){if(m.streamReaderCancelTimeout&&(clearTimeout(m.streamReaderCancelTimeout),m.streamReaderCancelTimeout=null),!h){if(m.renderTasks.size>0)return;if(D instanceof _display_utils.RenderingCancelledException){let L=RENDERING_CANCELLED_TIMEOUT;return D.extraDelay>0&&D.extraDelay<1e3&&(L+=D.extraDelay),void(m.streamReaderCancelTimeout=setTimeout(()=>{m.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:m,reason:D,force:!0})},L))}}if(m.streamReader.cancel(new _util.AbortException(D.message)).catch(()=>{}),m.streamReader=null,!this._transport.destroyed){for(const[L,G]of this._intentStates)if(G===m){this._intentStates.delete(L);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{#e=new Set;#t=Promise.resolve();postMessage(m,D){const h={data:structuredClone(m,D?{transfer:D}:null)};this.#t.then(()=>{for(const L of this.#e)L.call(this,h)})}addEventListener(m,D){this.#e.add(D)}removeEventListener(m,D){this.#e.delete(D)}terminate(){this.#e.clear()}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};if(exports.PDFWorkerUtil=PDFWorkerUtil,_util.isNodeJS)PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if("object"==typeof document){const J=document?.currentScript?.src;J&&(PDFWorkerUtil.fallbackWorkerSrc=J.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(J,m){let D;try{if(D=new URL(J),!D.origin||"null"===D.origin)return!1}catch{return!1}const h=new URL(m,D);return D.origin===h.origin},PDFWorkerUtil.createCDNWrapper=function(J){return URL.createObjectURL(new Blob([`importScripts("${J}");`]))};class PDFWorker{static#workerPorts;constructor({name:J=null,port:m=null,verbosity:D=(0,_util.getVerbosityLevel)()}={}){if(this.name=J,this.destroyed=!1,this.verbosity=D,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,m){if(PDFWorker.#workerPorts?.has(m))throw new Error("Cannot use more than one PDFWorker per port.");return(PDFWorker.#workerPorts||=new WeakMap).set(m,this),void this._initializeFromPort(m)}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(J){this._port=J,this._messageHandler=new _message_handler.MessageHandler("main","worker",J),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:J}=PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,J)||(J=PDFWorkerUtil.createCDNWrapper(new URL(J,window.location).href));const m=new Worker(J),D=new _message_handler.MessageHandler("main","worker",m),h=()=>{m.removeEventListener("error",L),D.destroy(),m.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},L=()=>{this._webWorker||h()};m.addEventListener("error",L),D.on("test",N=>{m.removeEventListener("error",L),this.destroyed?h():N?(this._messageHandler=D,this._port=m,this._webWorker=m,this._readyCapability.resolve(),D.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),D.destroy(),m.terminate())}),D.on("ready",N=>{if(m.removeEventListener("error",L),this.destroyed)h();else try{G()}catch{this._setupFakeWorker()}});const G=()=>{const N=new Uint8Array;D.send("test",N,[N.buffer])};return void G()}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(J=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const m=new LoopbackPort;this._port=m;const D="fake"+PDFWorkerUtil.fakeWorkerId++,h=new _message_handler.MessageHandler(D+"_worker",D,m);J.setup(h,m);const L=new _message_handler.MessageHandler(D,D+"_worker",m);this._messageHandler=L,this._readyCapability.resolve(),L.send("configure",{verbosity:this.verbosity})}).catch(J=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${J.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),PDFWorker.#workerPorts?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(J){if(!J?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const m=this.#workerPorts?.get(J.port);if(m){if(m._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return m}return new PDFWorker(J)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(null!==PDFWorkerUtil.fallbackWorkerSrc)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){var _this3=this;const loader=function(){var _ref=_asyncToGenerator(function*(){const mainWorkerMessageHandler=_this3._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS){const worker=eval("require")(_this3.workerSrc);return worker.WorkerMessageHandler}return yield(0,_display_utils.loadScript)(_this3.workerSrc),window.pdfjsWorker.WorkerMessageHandler});return function J(){return _ref.apply(this,arguments)}}();return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports.PDFWorker=PDFWorker;class WorkerTransport{#e=new Map;#t=new Map;#n=new Map;#i=null;constructor(m,D,h,L,G){this.messageHandler=m,this.loadingTask=D,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:L.ownerDocument,styleElement:L.styleElement}),this._params=L,this.canvasFactory=G.canvasFactory,this.filterFactory=G.filterFactory,this.cMapReaderFactory=G.cMapReaderFactory,this.standardFontDataFactory=G.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=h,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}#o(m,D=null){const h=this.#e.get(m);if(h)return h;const L=this.messageHandler.sendWithPromise(m,D);return this.#e.set(m,L),L}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(m,D=_util.AnnotationMode.ENABLE,h=null,L=!1){let G=_util.RenderingIntentFlag.DISPLAY,N=_annotation_storage.SerializableEmpty;switch(m){case"any":G=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":G=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${m}`)}switch(D){case _util.AnnotationMode.DISABLE:G+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:G+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:G+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,N=(G&_util.RenderingIntentFlag.PRINT&&h instanceof _annotation_storage.PrintAnnotationStorage?h:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${D}`)}return L&&(G+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:G,cacheKey:`${G}_${N.hash}`,annotationStorageSerializable:N}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,this.#i?.reject(new Error("Worker was destroyed during onPassword callback"));const m=[];for(const h of this.#t.values())m.push(h._destroy());this.#t.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const D=this.messageHandler.sendWithPromise("Terminate",null);return m.push(D),Promise.all(m).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),this._networkStream?.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:m,loadingTask:D}=this;m.on("GetReader",(h,L)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=G=>{this._lastProgress={loaded:G.loaded,total:G.total}},L.onPull=()=>{this._fullReader.read().then(function({value:G,done:N}){N?L.close():((0,_util.assert)(G instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),L.enqueue(new Uint8Array(G),1,[G]))}).catch(G=>{L.error(G)})},L.onCancel=G=>{this._fullReader.cancel(G),L.ready.catch(N=>{if(!this.destroyed)throw N})}}),m.on("ReaderHeadersReady",h=>{const L=new _util.PromiseCapability,G=this._fullReader;return G.headersReady.then(()=>{(!G.isStreamingSupported||!G.isRangeSupported)&&(this._lastProgress&&D.onProgress?.(this._lastProgress),G.onProgress=N=>{D.onProgress?.({loaded:N.loaded,total:N.total})}),L.resolve({isStreamingSupported:G.isStreamingSupported,isRangeSupported:G.isRangeSupported,contentLength:G.contentLength})},L.reject),L.promise}),m.on("GetRangeReader",(h,L)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const G=this._networkStream.getRangeReader(h.begin,h.end);G?(L.onPull=()=>{G.read().then(function({value:N,done:Z}){Z?L.close():((0,_util.assert)(N instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),L.enqueue(new Uint8Array(N),1,[N]))}).catch(N=>{L.error(N)})},L.onCancel=N=>{G.cancel(N),L.ready.catch(Z=>{if(!this.destroyed)throw Z})}):L.close()}),m.on("GetDoc",({pdfInfo:h})=>{this._numPages=h.numPages,this._htmlForXfa=h.htmlForXfa,delete h.htmlForXfa,D._capability.resolve(new PDFDocumentProxy(h,this))}),m.on("DocException",function(h){let L;switch(h.name){case"PasswordException":L=new _util.PasswordException(h.message,h.code);break;case"InvalidPDFException":L=new _util.InvalidPDFException(h.message);break;case"MissingPDFException":L=new _util.MissingPDFException(h.message);break;case"UnexpectedResponseException":L=new _util.UnexpectedResponseException(h.message,h.status);break;case"UnknownErrorException":L=new _util.UnknownErrorException(h.message,h.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}D._capability.reject(L)}),m.on("PasswordRequest",h=>{if(this.#i=new _util.PromiseCapability,D.onPassword){const L=G=>{G instanceof Error?this.#i.reject(G):this.#i.resolve({password:G})};try{D.onPassword(L,h.code)}catch(G){this.#i.reject(G)}}else this.#i.reject(new _util.PasswordException(h.message,h.code));return this.#i.promise}),m.on("DataLoaded",h=>{D.onProgress?.({loaded:h.length,total:h.length}),this.downloadInfoCapability.resolve(h)}),m.on("StartRenderPage",h=>{this.destroyed||this.#t.get(h.pageIndex)._startRenderPage(h.transparency,h.cacheKey)}),m.on("commonobj",([h,L,G])=>{if(!this.destroyed&&!this.commonObjs.has(h))switch(L){case"Font":const N=this._params;if("error"in G){const a=G.error;(0,_util.warn)(`Error during font loading: ${a}`),this.commonObjs.resolve(h,a);break}const Z=N.pdfBug&&globalThis.FontInspector?.enabled?(a,r)=>globalThis.FontInspector.fontAdded(a,r):null,V=new _font_loader.FontFaceObject(G,{isEvalSupported:N.isEvalSupported,disableFontFace:N.disableFontFace,ignoreErrors:N.ignoreErrors,inspectFont:Z});this.fontLoader.bind(V).catch(a=>m.sendWithPromise("FontFallback",{id:h})).finally(()=>{!N.fontExtraProperties&&V.data&&(V.data=null),this.commonObjs.resolve(h,V)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(h,G);break;default:throw new Error(`Got unknown common object type ${L}`)}}),m.on("obj",([h,L,G,N])=>{if(this.destroyed)return;const Z=this.#t.get(L);if(!Z.objs.has(h))switch(G){case"Image":if(Z.objs.resolve(h,N),N){let V;if(N.bitmap){const{width:a,height:r}=N;V=a*r*4}else V=N.data?.length||0;V>_util.MAX_IMAGE_SIZE_TO_CACHE&&(Z._maybeCleanupAfterRender=!0)}break;case"Pattern":Z.objs.resolve(h,N);break;default:throw new Error(`Got unknown object type ${G}`)}}),m.on("DocProgress",h=>{this.destroyed||D.onProgress?.({loaded:h.loaded,total:h.total})}),m.on("FetchBuiltInCMap",h=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(h):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),m.on("FetchStandardFontData",h=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(h):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:m,transfers:D}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:m,filename:this._fullReader?.filename??null},D).finally(()=>{this.annotationStorage.resetModified()})}getPage(m){if(!Number.isInteger(m)||m<=0||m>this._numPages)return Promise.reject(new Error("Invalid page request."));const D=m-1,h=this.#n.get(D);if(h)return h;const L=this.messageHandler.sendWithPromise("GetPage",{pageIndex:D}).then(G=>{if(this.destroyed)throw new Error("Transport destroyed");const N=new PDFPageProxy(D,G,this,this._params.pdfBug);return this.#t.set(D,N),N});return this.#n.set(D,L),L}getPageIndex(m){return"object"!=typeof m||null===m||!Number.isInteger(m.num)||m.num<0||!Number.isInteger(m.gen)||m.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:m.num,gen:m.gen})}getAnnotations(m,D){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:m,intent:D})}getFieldObjects(){return this.#o("GetFieldObjects")}hasJSActions(){return this.#o("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(m){return"string"!=typeof m?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:m})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#o("GetDocJSActions")}getPageJSActions(m){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:m})}getStructTree(m){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:m})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(m=>new _optional_content_config.OptionalContentConfig(m))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const m="GetMetadata",D=this.#e.get(m);if(D)return D;const h=this.messageHandler.sendWithPromise(m,null).then(L=>({info:L[0],metadata:L[1]?new _metadata.Metadata(L[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(m,h),h}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}startCleanup(m=!1){var D=this;return _asyncToGenerator(function*(){if(!D.destroyed){yield D.messageHandler.sendWithPromise("Cleanup",null);for(const h of D.#t.values())if(!h.cleanup())throw new Error(`startCleanup: Page ${h.pageNumber} is currently rendering.`);D.commonObjs.clear(),m||D.fontLoader.clear(),D.#e.clear(),D.filterFactory.destroy(!0)}})()}get loadingParams(){const{disableAutoFetch:m,enableXfa:D}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:m,enableXfa:D})}}class PDFObjects{#e=Object.create(null);#t(m){return this.#e[m]||={capability:new _util.PromiseCapability,data:null}}get(m,D=null){if(D){const L=this.#t(m);return L.capability.promise.then(()=>D(L.data)),null}const h=this.#e[m];if(!h?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${m}.`);return h.data}has(m){return this.#e[m]?.capability.settled||!1}resolve(m,D=null){const h=this.#t(m);h.data=D,h.capability.resolve()}clear(){for(const m in this.#e){const{data:D}=this.#e[m];D?.bitmap?.close()}this.#e=Object.create(null)}}class RenderTask{#e=null;constructor(m){this.#e=m,this.onContinue=null}get promise(){return this.#e.capability.promise}cancel(m=0){this.#e.cancel(null,m)}get separateAnnots(){const{separateAnnots:m}=this.#e.operatorList;if(!m)return!1;const{annotationCanvasMap:D}=this.#e;return m.form||m.canvas&&D?.size>0}}exports.RenderTask=RenderTask;class InternalRenderTask{static#e=new WeakSet;constructor({callback:m,params:D,objs:h,commonObjs:L,annotationCanvasMap:G,operatorList:N,pageIndex:Z,canvasFactory:V,filterFactory:a,useRequestAnimationFrame:r=!1,pdfBug:t=!1,pageColors:n=null}){this.callback=m,this.params=D,this.objs=h,this.commonObjs=L,this.annotationCanvasMap=G,this.operatorListIdx=null,this.operatorList=N,this._pageIndex=Z,this.canvasFactory=V,this.filterFactory=a,this._pdfBug=t,this.pageColors=n,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===r&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=D.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:m=!1,optionalContentConfig:D}){if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:h,viewport:L,transform:G,background:N}=this.params;this.gfx=new _canvas.CanvasGraphics(h,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:D},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:G,viewport:L,transparency:m,background:N}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(m=null,D=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),InternalRenderTask.#e.delete(this._canvas),this.callback(m||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,D))}operatorListChanged(){this.graphicsReady?(this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()):this.graphicsReadyCallback||=this._continueBound}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}_next(){var m=this;return _asyncToGenerator(function*(){m.cancelled||(m.operatorListIdx=m.gfx.executeOperatorList(m.operatorList,m.operatorListIdx,m._continueBound,m.stepper),m.operatorListIdx===m.operatorList.argsArray.length&&(m.running=!1,m.operatorList.lastChunk&&(m.gfx.endDrawing(),InternalRenderTask.#e.delete(m._canvas),m.callback())))})()}}const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(J,m,D)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.SerializableEmpty=m.PrintAnnotationStorage=m.AnnotationStorage=void 0;var h=D(1),L=D(4),G=D(8);const N=Object.freeze({map:null,hash:"",transfers:void 0});m.SerializableEmpty=N;class Z{#e=!1;#t=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(r,t){const n=this.#t.get(r);return void 0===n?t:Object.assign(t,n)}getRawValue(r){return this.#t.get(r)}remove(r){if(this.#t.delete(r),0===this.#t.size&&this.resetModified(),"function"==typeof this.onAnnotationEditor){for(const t of this.#t.values())if(t instanceof L.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(r,t){const n=this.#t.get(r);let p=!1;if(void 0!==n)for(const[l,e]of Object.entries(t))n[l]!==e&&(p=!0,n[l]=e);else p=!0,this.#t.set(r,t);p&&this.#n(),t instanceof L.AnnotationEditor&&"function"==typeof this.onAnnotationEditor&&this.onAnnotationEditor(t.constructor._type)}has(r){return this.#t.has(r)}getAll(){return this.#t.size>0?(0,h.objectFromMap)(this.#t):null}setAll(r){for(const[t,n]of Object.entries(r))this.setValue(t,n)}get size(){return this.#t.size}#n(){this.#e||(this.#e=!0,"function"==typeof this.onSetModified&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,"function"==typeof this.onResetModified&&this.onResetModified())}get print(){return new V(this)}get serializable(){if(0===this.#t.size)return N;const r=new Map,t=new G.MurmurHash3_64,n=[],p=Object.create(null);let l=!1;for(const[e,i]of this.#t){const o=i instanceof L.AnnotationEditor?i.serialize(!1,p):i;o&&(r.set(e,o),t.update(`${e}:${JSON.stringify(o)}`),l||=!!o.bitmap)}if(l)for(const e of r.values())e.bitmap&&n.push(e.bitmap);return r.size>0?{map:r,hash:t.hexdigest(),transfers:n}:N}}m.AnnotationStorage=Z;class V extends Z{#e;constructor(r){super();const{map:t,hash:n,transfers:p}=r.serializable,l=structuredClone(t,p?{transfer:p}:null);this.#e={map:l,hash:n,transfers:p}}get print(){(0,h.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}}m.PrintAnnotationStorage=V},(J,m,D)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.AnnotationEditor=void 0;var h=D(5),L=D(1),G=D(6);class N{#e="";#t=!1;#n=null;#i=null;#o=null;#r=!1;#a=null;#l=this.focusin.bind(this);#c=this.focusout.bind(this);#s=!1;#h=!1;#d=!1;_initialOptions=Object.create(null);_uiManager=null;_focusEventsAllowed=!0;_l10nPromise=null;#f=!1;#p=N._zIndex++;static _borderLineWidth=-1;static _colorManager=new h.ColorManager;static _zIndex=1;static SMALL_EDITOR_SIZE=0;constructor(a){this.constructor===N&&(0,L.unreachable)("Cannot initialize AnnotationEditor."),this.parent=a.parent,this.id=a.id,this.width=this.height=null,this.pageIndex=a.parent.pageIndex,this.name=a.name,this.div=null,this._uiManager=a.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=a.isCentered,this._structTreeParentId=null;const{rotation:r,rawDims:{pageWidth:t,pageHeight:n,pageX:p,pageY:l}}=this.parent.viewport;this.rotation=r,this.pageRotation=(360+r-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[t,n],this.pageTranslation=[p,l];const[e,i]=this.parentDimensions;this.x=a.x/e,this.y=a.y/i,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,L.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(a){const r=new Z({id:a.parent.getNextId(),parent:a.parent,uiManager:a._uiManager});r.annotationElementId=a.annotationElementId,r.deleted=!0,r._uiManager.addToAnnotationStorage(r)}static initialize(a,r=null){if(N._l10nPromise||=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(n=>[n,a.get(n)])),r?.strings)for(const n of r.strings)N._l10nPromise.set(n,a.get(n));if(-1!==N._borderLineWidth)return;const t=getComputedStyle(document.documentElement);N._borderLineWidth=parseFloat(t.getPropertyValue("--outline-width"))||0}static updateDefaultParams(a,r){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(a){return!1}static paste(a,r){(0,L.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#f}set _isDraggable(a){this.#f=a,this.div?.classList.toggle("draggable",a)}center(){const[a,r]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*r/(2*a),this.y+=this.width*a/(2*r);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*r/(2*a),this.y-=this.width*a/(2*r);break;default:this.x-=this.width/2,this.y-=this.height/2}this.fixAndSetPosition()}addCommands(a){this._uiManager.addCommands(a)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#p}setParent(a){null!==a&&(this.pageIndex=a.pageIndex,this.pageDimensions=a.pageDimensions),this.parent=a}focusin(a){this._focusEventsAllowed&&(this.#s?this.#s=!1:this.parent.setSelected(this))}focusout(a){!this._focusEventsAllowed||!this.isAttachedToDOM||a.relatedTarget?.closest(`#${this.id}`)||(a.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(a,r,t,n){const[p,l]=this.parentDimensions;[t,n]=this.screenToPageTranslation(t,n),this.x=(a+t)/p,this.y=(r+n)/l,this.fixAndSetPosition()}#g([a,r],t,n){[t,n]=this.screenToPageTranslation(t,n),this.x+=t/a,this.y+=n/r,this.fixAndSetPosition()}translate(a,r){this.#g(this.parentDimensions,a,r)}translateInPage(a,r){this.#g(this.pageDimensions,a,r),this.div.scrollIntoView({block:"nearest"})}drag(a,r){const[t,n]=this.parentDimensions;if(this.x+=a/t,this.y+=r/n,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:o,y:c}=this.div.getBoundingClientRect();this.parent.findNewParent(this,o,c)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:p,y:l}=this;const[e,i]=this.#m();p+=e,l+=i,this.div.style.left=`${(100*p).toFixed(2)}%`,this.div.style.top=`${(100*l).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}#m(){const[a,r]=this.parentDimensions,{_borderLineWidth:t}=N,n=t/a,p=t/r;switch(this.rotation){case 90:return[-n,p];case 180:return[n,p];case 270:return[n,-p];default:return[-n,-p]}}fixAndSetPosition(){const[a,r]=this.pageDimensions;let{x:t,y:n,width:p,height:l}=this;switch(p*=a,l*=r,t*=a,n*=r,this.rotation){case 0:t=Math.max(0,Math.min(a-p,t)),n=Math.max(0,Math.min(r-l,n));break;case 90:t=Math.max(0,Math.min(a-l,t)),n=Math.min(r,Math.max(p,n));break;case 180:t=Math.min(a,Math.max(p,t)),n=Math.min(r,Math.max(l,n));break;case 270:t=Math.min(a,Math.max(l,t)),n=Math.max(0,Math.min(r-p,n))}this.x=t/=a,this.y=n/=r;const[e,i]=this.#m();t+=e,n+=i;const{style:o}=this.div;o.left=`${(100*t).toFixed(2)}%`,o.top=`${(100*n).toFixed(2)}%`,this.moveInDOM()}static#_(a,r,t){switch(t){case 90:return[r,-a];case 180:return[-a,-r];case 270:return[-r,a];default:return[a,r]}}screenToPageTranslation(a,r){return N.#_(a,r,this.parentRotation)}pageTranslationToScreen(a,r){return N.#_(a,r,360-this.parentRotation)}#u(a){switch(a){case 90:{const[r,t]=this.pageDimensions;return[0,-r/t,t/r,0]}case 180:return[-1,0,0,-1];case 270:{const[r,t]=this.pageDimensions;return[0,r/t,-t/r,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:a,pageDimensions:[r,t]}=this,n=r*a,p=t*a;return L.FeatureTest.isCSSRoundSupported?[Math.round(n),Math.round(p)]:[n,p]}setDims(a,r){const[t,n]=this.parentDimensions;this.div.style.width=`${(100*a/t).toFixed(2)}%`,this.#r||(this.div.style.height=`${(100*r/n).toFixed(2)}%`),this.#n?.classList.toggle("small",a<N.SMALL_EDITOR_SIZE||r<N.SMALL_EDITOR_SIZE)}fixDims(){const{style:a}=this.div,{height:r,width:t}=a,n=t.endsWith("%"),p=!this.#r&&r.endsWith("%");if(n&&p)return;const[l,e]=this.parentDimensions;n||(a.width=`${(100*parseFloat(t)/l).toFixed(2)}%`),!this.#r&&!p&&(a.height=`${(100*parseFloat(r)/e).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#b(){if(this.#a)return;this.#a=document.createElement("div"),this.#a.classList.add("resizers");const a=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||a.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const r of a){const t=document.createElement("div");this.#a.append(t),t.classList.add("resizer",r),t.addEventListener("pointerdown",this.#w.bind(this,r)),t.addEventListener("contextmenu",G.noContextMenu)}this.div.prepend(this.#a)}#w(a,r){r.preventDefault();const{isMac:t}=L.FeatureTest.platform;if(0!==r.button||r.ctrlKey&&t)return;const n=this.#A.bind(this,a),p=this._isDraggable;this._isDraggable=!1;const l={passive:!0,capture:!0};window.addEventListener("pointermove",n,l);const e=this.x,i=this.y,o=this.width,c=this.height,w=this.parent.div.style.cursor,S=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(r.target).cursor;const u=()=>{this._isDraggable=p,window.removeEventListener("pointerup",u),window.removeEventListener("blur",u),window.removeEventListener("pointermove",n,l),this.parent.div.style.cursor=w,this.div.style.cursor=S;const v=this.x,d=this.y,E=this.width,T=this.height;v===e&&d===i&&E===o&&T===c||this.addCommands({cmd:()=>{this.width=E,this.height=T,this.x=v,this.y=d;const[U,C]=this.parentDimensions;this.setDims(U*E,C*T),this.fixAndSetPosition()},undo:()=>{this.width=o,this.height=c,this.x=e,this.y=i;const[U,C]=this.parentDimensions;this.setDims(U*o,C*c),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",u),window.addEventListener("blur",u)}#A(a,r){const[t,n]=this.parentDimensions,p=this.x,l=this.y,e=this.width,i=this.height,o=N.MIN_SIZE/t,c=N.MIN_SIZE/n,w=I=>Math.round(1e4*I)/1e4,S=this.#u(this.rotation),u=(I,g)=>[S[0]*I+S[2]*g,S[1]*I+S[3]*g],v=this.#u(360-this.rotation);let E,T,U=!1,C=!1;switch(a){case"topLeft":U=!0,E=(I,g)=>[0,0],T=(I,g)=>[I,g];break;case"topMiddle":E=(I,g)=>[I/2,0],T=(I,g)=>[I/2,g];break;case"topRight":U=!0,E=(I,g)=>[I,0],T=(I,g)=>[0,g];break;case"middleRight":C=!0,E=(I,g)=>[I,g/2],T=(I,g)=>[0,g/2];break;case"bottomRight":U=!0,E=(I,g)=>[I,g],T=(I,g)=>[0,0];break;case"bottomMiddle":E=(I,g)=>[I/2,g],T=(I,g)=>[I/2,0];break;case"bottomLeft":U=!0,E=(I,g)=>[0,g],T=(I,g)=>[I,0];break;case"middleLeft":C=!0,E=(I,g)=>[0,g/2],T=(I,g)=>[I,g/2]}const $=E(e,i),j=T(e,i);let q=u(...j);const se=w(p+q[0]),te=w(l+q[1]);let z=1,y=1,[s,f]=this.screenToPageTranslation(r.movementX,r.movementY);if([s,f]=[v[0]*(I=s/t)+v[2]*(g=f/n),v[1]*I+v[3]*g],U){const I=Math.hypot(e,i);z=y=Math.max(Math.min(Math.hypot(j[0]-$[0]-s,j[1]-$[1]-f)/I,1/e,1/i),o/e,c/i)}else C?z=Math.max(o,Math.min(1,Math.abs(j[0]-$[0]-s)))/e:y=Math.max(c,Math.min(1,Math.abs(j[1]-$[1]-f)))/i;var I,g;const _=w(e*z),b=w(i*y);q=u(...T(_,b));const M=se-q[0],O=te-q[1];this.width=_,this.height=b,this.x=M,this.y=O,this.setDims(t*_,n*b),this.fixAndSetPosition()}addAltTextButton(){var a=this;return _asyncToGenerator(function*(){if(a.#n)return;const r=a.#n=document.createElement("button");r.className="altText";const t=yield N._l10nPromise.get("editor_alt_text_button_label");r.textContent=t,r.setAttribute("aria-label",t),r.tabIndex="0",r.addEventListener("contextmenu",G.noContextMenu),r.addEventListener("pointerdown",n=>n.stopPropagation()),r.addEventListener("click",n=>{n.preventDefault(),a._uiManager.editAltText(a)},{capture:!0}),r.addEventListener("keydown",n=>{n.target===r&&"Enter"===n.key&&(n.preventDefault(),a._uiManager.editAltText(a))}),a.#y(),a.div.append(r),N.SMALL_EDITOR_SIZE||(N.SMALL_EDITOR_SIZE=Math.min(128,Math.round(1.4*r.getBoundingClientRect().width)))})()}#y(){var a=this;return _asyncToGenerator(function*(){const r=a.#n;if(!r)return;if(!a.#e&&!a.#t)return r.classList.remove("done"),void a.#i?.remove();N._l10nPromise.get("editor_alt_text_edit_button_label").then(n=>{r.setAttribute("aria-label",n)});let t=a.#i;if(!t){a.#i=t=document.createElement("span"),t.className="tooltip",t.setAttribute("role","tooltip");const n=t.id=`alt-text-tooltip-${a.id}`;r.setAttribute("aria-describedby",n);const p=100;r.addEventListener("mouseenter",()=>{a.#o=setTimeout(()=>{a.#o=null,a.#i.classList.add("show"),a._uiManager._eventBus.dispatch("reporttelemetry",{source:a,details:{type:"editing",subtype:a.editorType,data:{action:"alt_text_tooltip"}}})},p)}),r.addEventListener("mouseleave",()=>{clearTimeout(a.#o),a.#o=null,a.#i?.classList.remove("show")})}r.classList.add("done"),t.innerText=a.#t?yield N._l10nPromise.get("editor_alt_text_decorative_tooltip"):a.#e,t.parentNode||r.append(t)})()}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:this.#e,decorative:this.#t}}set altTextData({altText:a,decorative:r}){this.#e===a&&this.#t===r||(this.#e=a,this.#t=r,this.#y())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",this.#l),this.div.addEventListener("focusout",this.#c);const[a,r]=this.parentDimensions;this.parentRotation%180!=0&&(this.div.style.maxWidth=`${(100*r/a).toFixed(2)}%`,this.div.style.maxHeight=`${(100*a/r).toFixed(2)}%`);const[t,n]=this.getInitialTranslation();return this.translate(t,n),(0,h.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(a){const{isMac:r}=L.FeatureTest.platform;0!==a.button||a.ctrlKey&&r?a.preventDefault():(this.#s=!0,this.#S(a))}#S(a){if(!this._isDraggable)return;const r=this._uiManager.isSelected(this);let t,n;this._uiManager.setUpDragSession(),r&&(t={passive:!0,capture:!0},n=l=>{const[e,i]=this.screenToPageTranslation(l.movementX,l.movementY);this._uiManager.dragSelectedEditors(e,i)},window.addEventListener("pointermove",n,t));const p=()=>{if(window.removeEventListener("pointerup",p),window.removeEventListener("blur",p),r&&window.removeEventListener("pointermove",n,t),this.#s=!1,!this._uiManager.endDragSession()){const{isMac:l}=L.FeatureTest.platform;a.ctrlKey&&!l||a.shiftKey||a.metaKey&&l?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",p),window.addEventListener("blur",p)}moveInDOM(){this.parent?.moveEditorInDOM(this)}_setParentAndPosition(a,r,t){a.changeParent(this),this.x=r,this.y=t,this.fixAndSetPosition()}getRect(a,r){const t=this.parentScale,[n,p]=this.pageDimensions,[l,e]=this.pageTranslation,i=a/t,o=r/t,c=this.x*n,w=this.y*p,S=this.width*n,u=this.height*p;switch(this.rotation){case 0:return[c+i+l,p-w-o-u+e,c+i+S+l,p-w-o+e];case 90:return[c+o+l,p-w+i+e,c+o+u+l,p-w+i+S+e];case 180:return[c-i-S+l,p-w+o+e,c-i+l,p-w+o+u+e];case 270:return[c-o-u+l,p-w-i-S+e,c-o+l,p-w-i+e];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(a,r){const[t,n,p,l]=a,e=p-t,i=l-n;switch(this.rotation){case 0:return[t,r-l,e,i];case 90:return[t,r-n,i,e];case 180:return[p,r-n,e,i];case 270:return[p,r-l,i,e];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#d=!0}disableEditMode(){this.#d=!1}isInEditMode(){return this.#d}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){this.div?.addEventListener("focusin",this.#l),this.div?.addEventListener("focusout",this.#c)}serialize(a=!1,r=null){(0,L.unreachable)("An editor must be serializable")}static deserialize(a,r,t){const n=new this.prototype.constructor({parent:r,id:r.getNextId(),uiManager:t});n.rotation=a.rotation;const[p,l]=n.pageDimensions,[e,i,o,c]=n.getRectInCurrentCoords(a.rect,l);return n.x=e/p,n.y=i/l,n.width=o/p,n.height=c/l,n}remove(){this.div.removeEventListener("focusin",this.#l),this.div.removeEventListener("focusout",this.#c),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#n?.remove(),this.#n=null,this.#i=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#b(),this.#a.classList.remove("hidden"))}select(){this.makeResizable(),this.div?.classList.add("selectedEditor")}unselect(){this.#a?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(a,r){}disableEditing(){this.#n&&(this.#n.hidden=!0)}enableEditing(){this.#n&&(this.#n.hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return this.#h}set isEditing(a){this.#h=a,this.parent&&(a?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(a,r){this.#r=!0;const t=a/r,{style:n}=this.div;n.aspectRatio=t,n.height="auto"}static get MIN_SIZE(){return 16}}m.AnnotationEditor=N;class Z extends N{constructor(a){super(a),this.annotationElementId=a.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(J,m,D)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.KeyboardManager=m.CommandManager=m.ColorManager=m.AnnotationEditorUIManager=void 0,m.bindEvents=function G(p,l,e){for(const i of e)l.addEventListener(i,p[i].bind(p))},m.opacityToHex=function N(p){return Math.round(Math.min(255,Math.max(1,255*p))).toString(16).padStart(2,"0")};var h=D(1),L=D(6);class Z{#e=0;getId(){return`${h.AnnotationEditorPrefix}${this.#e++}`}}class V{#e=(0,h.getUuid)();#t=0;#n=null;static get _isSVGFittingCanvas(){const i=new OffscreenCanvas(1,3).getContext("2d"),o=new Image;o.src='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>';const c=o.decode().then(()=>(i.drawImage(o,0,0,1,1,0,0,1,3),0===new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]));return(0,h.shadow)(this,"_isSVGFittingCanvas",c)}#i(l,e){var i=this;return _asyncToGenerator(function*(){i.#n||=new Map;let o=i.#n.get(l);if(null===o)return null;if(o?.bitmap)return o.refCounter+=1,o;try{let c;if(o||={bitmap:null,id:`image_${i.#e}_${i.#t++}`,refCounter:0,isSvg:!1},"string"==typeof e){o.url=e;const w=yield fetch(e);if(!w.ok)throw new Error(w.statusText);c=yield w.blob()}else c=o.file=e;if("image/svg+xml"===c.type){const w=V._isSVGFittingCanvas,S=new FileReader,u=new Image,v=new Promise((d,E)=>{u.onload=()=>{o.bitmap=u,o.isSvg=!0,d()},S.onload=_asyncToGenerator(function*(){const T=o.svgUrl=S.result;u.src=(yield w)?`${T}#svgView(preserveAspectRatio(none))`:T}),u.onerror=S.onerror=E});S.readAsDataURL(c),yield v}else o.bitmap=yield createImageBitmap(c);o.refCounter=1}catch(c){console.error(c),o=null}return i.#n.set(l,o),o&&i.#n.set(o.id,o),o})()}getFromFile(l){var e=this;return _asyncToGenerator(function*(){const{lastModified:i,name:o,size:c,type:w}=l;return e.#i(`${i}_${o}_${c}_${w}`,l)})()}getFromUrl(l){var e=this;return _asyncToGenerator(function*(){return e.#i(l,l)})()}getFromId(l){var e=this;return _asyncToGenerator(function*(){e.#n||=new Map;const i=e.#n.get(l);return i?i.bitmap?(i.refCounter+=1,i):i.file?e.getFromFile(i.file):e.getFromUrl(i.url):null})()}getSvgUrl(l){const e=this.#n.get(l);return e?.isSvg?e.svgUrl:null}deleteId(l){this.#n||=new Map;const e=this.#n.get(l);e&&(e.refCounter-=1,0===e.refCounter&&(e.bitmap=null))}isValidId(l){return l.startsWith(`image_${this.#e}_`)}}class a{#e=[];#t=!1;#n;#i=-1;constructor(l=128){this.#n=l}add({cmd:l,undo:e,mustExec:i,type:o=NaN,overwriteIfSameType:c=!1,keepUndo:w=!1}){if(i&&l(),this.#t)return;const S={cmd:l,undo:e,type:o};if(-1===this.#i)return this.#e.length>0&&(this.#e.length=0),this.#i=0,void this.#e.push(S);if(c&&this.#e[this.#i].type===o)return w&&(S.undo=this.#e[this.#i].undo),void(this.#e[this.#i]=S);const u=this.#i+1;u===this.#n?this.#e.splice(0,1):(this.#i=u,u<this.#e.length&&this.#e.splice(u)),this.#e.push(S)}undo(){-1!==this.#i&&(this.#t=!0,this.#e[this.#i].undo(),this.#t=!1,this.#i-=1)}redo(){this.#i<this.#e.length-1&&(this.#i+=1,this.#t=!0,this.#e[this.#i].cmd(),this.#t=!1)}hasSomethingToUndo(){return-1!==this.#i}hasSomethingToRedo(){return this.#i<this.#e.length-1}destroy(){this.#e=null}}m.CommandManager=a;class r{constructor(l){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=h.FeatureTest.platform;for(const[i,o,c={}]of l)for(const w of i){const S=w.startsWith("mac+");e&&S?(this.callbacks.set(w.slice(4),{callback:o,options:c}),this.allKeys.add(w.split("+").at(-1))):!e&&!S&&(this.callbacks.set(w,{callback:o,options:c}),this.allKeys.add(w.split("+").at(-1)))}}#e(l){l.altKey&&this.buffer.push("alt"),l.ctrlKey&&this.buffer.push("ctrl"),l.metaKey&&this.buffer.push("meta"),l.shiftKey&&this.buffer.push("shift"),this.buffer.push(l.key);const e=this.buffer.join("+");return this.buffer.length=0,e}exec(l,e){if(!this.allKeys.has(e.key))return;const i=this.callbacks.get(this.#e(e));if(!i)return;const{callback:o,options:{bubbles:c=!1,args:w=[],checker:S=null}}=i;S&&!S(l,e)||(o.bind(l,...w)(),c||(e.stopPropagation(),e.preventDefault()))}}m.KeyboardManager=r;class t{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const l=new Map([["CanvasText",null],["Canvas",null]]);return(0,L.getColorValues)(l),(0,h.shadow)(this,"_colors",l)}convert(l){const e=(0,L.getRGB)(l);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[i,o]of this._colors)if(o.every((c,w)=>c===e[w]))return t._colorsMapping.get(i);return e}getHexCode(l){const e=this._colors.get(l);return e?h.Util.makeHexColor(...e):l}}m.ColorManager=t,m.AnnotationEditorUIManager=(()=>{class p{#e=null;#t=new Map;#n=new Map;#i=null;#o=null;#r=new a;#a=0;#l=new Set;#c=null;#s=null;#h=new Set;#d=null;#f=new Z;#p=!1;#g=!1;#m=null;#_=h.AnnotationEditorType.NONE;#u=new Set;#b=null;#w=this.blur.bind(this);#A=this.focus.bind(this);#y=this.copy.bind(this);#S=this.cut.bind(this);#I=this.paste.bind(this);#R=this.keydown.bind(this);#F=this.onEditingAction.bind(this);#v=this.onPageChanging.bind(this);#C=this.onScaleChanging.bind(this);#T=this.onRotationChanging.bind(this);#k={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1};#E=[0,0];#x=null;#M=null;#N=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const e=p.prototype,i=w=>{const{activeElement:S}=document;return S&&w.#M.contains(S)&&w.hasSomethingToControl()},o=this.TRANSLATE_SMALL,c=this.TRANSLATE_BIG;return(0,h.shadow)(this,"_keyboardManager",new r([[["ctrl+a","mac+meta+a"],e.selectAll],[["ctrl+z","mac+meta+z"],e.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-o,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-c,0],checker:i}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[o,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[c,0],checker:i}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-o],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-c],checker:i}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,o],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,c],checker:i}]]))}constructor(e,i,o,c,w,S){this.#M=e,this.#N=i,this.#i=o,this._eventBus=c,this._eventBus._on("editingaction",this.#F),this._eventBus._on("pagechanging",this.#v),this._eventBus._on("scalechanging",this.#C),this._eventBus._on("rotationchanging",this.#T),this.#o=w.annotationStorage,this.#d=w.filterFactory,this.#b=S,this.viewParameters={realScale:L.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){this.#O(),this.#V(),this._eventBus._off("editingaction",this.#F),this._eventBus._off("pagechanging",this.#v),this._eventBus._off("scalechanging",this.#C),this._eventBus._off("rotationchanging",this.#T);for(const e of this.#n.values())e.destroy();this.#n.clear(),this.#t.clear(),this.#h.clear(),this.#e=null,this.#u.clear(),this.#r.destroy(),this.#i.destroy()}get hcmFilter(){return(0,h.shadow)(this,"hcmFilter",this.#b?this.#d.addHCMFilter(this.#b.foreground,this.#b.background):"none")}get direction(){return(0,h.shadow)(this,"direction",getComputedStyle(this.#M).direction)}editAltText(e){this.#i?.editAltText(this,e)}onPageChanging({pageNumber:e}){this.#a=e-1}focusMainContainer(){this.#M.focus()}findParent(e,i){for(const o of this.#n.values()){const{x:c,y:w,width:S,height:u}=o.div.getBoundingClientRect();if(e>=c&&e<=c+S&&i>=w&&i<=w+u)return o}return null}disableUserSelect(e=!1){this.#N.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#h.add(e)}removeShouldRescale(e){this.#h.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*L.PixelsPerInch.PDF_TO_CSS_UNITS;for(const i of this.#h)i.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}addToAnnotationStorage(e){!e.isEmpty()&&this.#o&&!this.#o.has(e.id)&&this.#o.setValue(e.id,e)}#B(){window.addEventListener("focus",this.#A),window.addEventListener("blur",this.#w)}#V(){window.removeEventListener("focus",this.#A),window.removeEventListener("blur",this.#w)}blur(){if(!this.hasSelection)return;const{activeElement:e}=document;for(const i of this.#u)if(i.div.contains(e)){this.#m=[i,e],i._focusEventsAllowed=!1;break}}focus(){if(!this.#m)return;const[e,i]=this.#m;this.#m=null,i.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0}),i.focus()}#U(){window.addEventListener("keydown",this.#R,{capture:!0})}#O(){window.removeEventListener("keydown",this.#R,{capture:!0})}#D(){document.addEventListener("copy",this.#y),document.addEventListener("cut",this.#S),document.addEventListener("paste",this.#I)}#L(){document.removeEventListener("copy",this.#y),document.removeEventListener("cut",this.#S),document.removeEventListener("paste",this.#I)}addEditListeners(){this.#U(),this.#D()}removeEditListeners(){this.#O(),this.#L()}copy(e){if(e.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const i=[];for(const o of this.#u){const c=o.serialize(!0);c&&i.push(c)}0!==i.length&&e.clipboardData.setData("application/pdfjs",JSON.stringify(i))}cut(e){this.copy(e),this.delete()}paste(e){e.preventDefault();const{clipboardData:i}=e;for(const w of i.items)for(const S of this.#s)if(S.isHandlingMimeForPasting(w.type))return void S.paste(w,this.currentLayer);let o=i.getData("application/pdfjs");if(!o)return;try{o=JSON.parse(o)}catch(w){return void(0,h.warn)(`paste: "${w.message}".`)}if(!Array.isArray(o))return;this.unselectAll();const c=this.currentLayer;try{const w=[];for(const v of o){const d=c.deserialize(v);if(!d)return;w.push(d)}this.addCommands({cmd:()=>{for(const v of w)this.#H(v);this.#j(w)},undo:()=>{for(const v of w)v.remove()},mustExec:!0})}catch(w){(0,h.warn)(`paste: "${w.message}".`)}}keydown(e){this.getActive()?.shouldGetKeyboardEvents()||p._keyboardManager.exec(this,e)}onEditingAction(e){["undo","redo","delete","selectAll"].includes(e.name)&&this[e.name]()}#P(e){Object.entries(e).some(([o,c])=>this.#k[o]!==c)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#k,e)})}#z(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#B(),this.#U(),this.#D(),this.#P({isEditing:this.#_!==h.AnnotationEditorType.NONE,isEmpty:this.#W(),hasSomethingToUndo:this.#r.hasSomethingToUndo(),hasSomethingToRedo:this.#r.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#V(),this.#O(),this.#L(),this.#P({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#s){this.#s=e;for(const i of this.#s)this.#z(i.defaultPropertiesToUpdate)}}getId(){return this.#f.getId()}get currentLayer(){return this.#n.get(this.#a)}getLayer(e){return this.#n.get(e)}get currentPageIndex(){return this.#a}addLayer(e){this.#n.set(e.pageIndex,e),this.#p?e.enable():e.disable()}removeLayer(e){this.#n.delete(e.pageIndex)}updateMode(e,i=null){if(this.#_!==e){if(this.#_=e,e===h.AnnotationEditorType.NONE)return this.setEditingState(!1),void this.#$();this.setEditingState(!0),this.#G(),this.unselectAll();for(const o of this.#n.values())o.updateMode(e);if(i)for(const o of this.#t.values())if(o.annotationElementId===i){this.setSelected(o),o.enterInEditMode();break}}}updateToolbar(e){e!==this.#_&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,i){if(this.#s){if(e===h.AnnotationEditorParamsType.CREATE)return void this.currentLayer.addNewEditor(e);for(const o of this.#u)o.updateParams(e,i);for(const o of this.#s)o.updateDefaultParams(e,i)}}enableWaiting(e=!1){if(this.#g!==e){this.#g=e;for(const i of this.#n.values())e?i.disableClick():i.enableClick(),i.div.classList.toggle("waiting",e)}}#G(){if(!this.#p){this.#p=!0;for(const e of this.#n.values())e.enable()}}#$(){if(this.unselectAll(),this.#p){this.#p=!1;for(const e of this.#n.values())e.disable()}}getEditors(e){const i=[];for(const o of this.#t.values())o.pageIndex===e&&i.push(o);return i}getEditor(e){return this.#t.get(e)}addEditor(e){this.#t.set(e.id,e)}removeEditor(e){this.#t.delete(e.id),this.unselect(e),(!e.annotationElementId||!this.#l.has(e.annotationElementId))&&this.#o?.remove(e.id)}addDeletedAnnotationElement(e){this.#l.add(e.annotationElementId),e.deleted=!0}isDeletedAnnotationElement(e){return this.#l.has(e)}removeDeletedAnnotationElement(e){this.#l.delete(e.annotationElementId),e.deleted=!1}#H(e){const i=this.#n.get(e.pageIndex);i?i.addOrRebuild(e):this.addEditor(e)}setActiveEditor(e){this.#e!==e&&(this.#e=e,e&&this.#z(e.propertiesToUpdate))}toggleSelected(e){if(this.#u.has(e))return this.#u.delete(e),e.unselect(),void this.#P({hasSelectedEditor:this.hasSelection});this.#u.add(e),e.select(),this.#z(e.propertiesToUpdate),this.#P({hasSelectedEditor:!0})}setSelected(e){for(const i of this.#u)i!==e&&i.unselect();this.#u.clear(),this.#u.add(e),e.select(),this.#z(e.propertiesToUpdate),this.#P({hasSelectedEditor:!0})}isSelected(e){return this.#u.has(e)}unselect(e){e.unselect(),this.#u.delete(e),this.#P({hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==this.#u.size}undo(){this.#r.undo(),this.#P({hasSomethingToUndo:this.#r.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#W()})}redo(){this.#r.redo(),this.#P({hasSomethingToUndo:!0,hasSomethingToRedo:this.#r.hasSomethingToRedo(),isEmpty:this.#W()})}addCommands(e){this.#r.add(e),this.#P({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#W()})}#W(){if(0===this.#t.size)return!0;if(1===this.#t.size)for(const e of this.#t.values())return e.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...this.#u];this.addCommands({cmd:()=>{for(const c of e)c.remove()},undo:()=>{for(const c of e)this.#H(c)},mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#j(e){this.#u.clear();for(const i of e)i.isEmpty()||(this.#u.add(i),i.select());this.#P({hasSelectedEditor:!0})}selectAll(){for(const e of this.#u)e.commit();this.#j(this.#t.values())}unselectAll(){if(this.#e)this.#e.commitOrRemove();else if(this.hasSelection){for(const e of this.#u)e.unselect();this.#u.clear(),this.#P({hasSelectedEditor:!1})}}translateSelectedEditors(e,i,o=!1){if(o||this.commitOrRemove(),!this.hasSelection)return;this.#E[0]+=e,this.#E[1]+=i;const[c,w]=this.#E,S=[...this.#u];this.#x&&clearTimeout(this.#x),this.#x=setTimeout(()=>{this.#x=null,this.#E[0]=this.#E[1]=0,this.addCommands({cmd:()=>{for(const v of S)this.#t.has(v.id)&&v.translateInPage(c,w)},undo:()=>{for(const v of S)this.#t.has(v.id)&&v.translateInPage(-c,-w)},mustExec:!1})},1e3);for(const v of S)v.translateInPage(e,i)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#c=new Map;for(const e of this.#u)this.#c.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#c)return!1;this.disableUserSelect(!1);const e=this.#c;this.#c=null;let i=!1;for(const[{x:c,y:w,pageIndex:S},u]of e)u.newX=c,u.newY=w,u.newPageIndex=S,i||=c!==u.savedX||w!==u.savedY||S!==u.savedPageIndex;if(!i)return!1;const o=(c,w,S,u)=>{if(this.#t.has(c.id)){const v=this.#n.get(u);v?c._setParentAndPosition(v,w,S):(c.pageIndex=u,c.x=w,c.y=S)}};return this.addCommands({cmd:()=>{for(const[c,{newX:w,newY:S,newPageIndex:u}]of e)o(c,w,S,u)},undo:()=>{for(const[c,{savedX:w,savedY:S,savedPageIndex:u}]of e)o(c,w,S,u)},mustExec:!0}),!0}dragSelectedEditors(e,i){if(this.#c)for(const o of this.#c.keys())o.drag(e,i)}rebuild(e){if(null===e.parent){const i=this.getLayer(e.pageIndex);i?(i.changeParent(e),i.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}isActive(e){return this.#e===e}getActive(){return this.#e}getMode(){return this.#_}get imageManager(){return(0,h.shadow)(this,"imageManager",new V)}}return p})()},(J,m,D)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.StatTimer=m.RenderingCancelledException=m.PixelsPerInch=m.PageViewport=m.PDFDateString=m.DOMStandardFontDataFactory=m.DOMSVGFactory=m.DOMFilterFactory=m.DOMCanvasFactory=m.DOMCMapReaderFactory=void 0,m.deprecated=function E(z){console.log("Deprecated API usage: "+z)},m.getColorValues=function j(z){const y=document.createElement("span");y.style.visibility="hidden",document.body.append(y);for(const s of z.keys()){y.style.color=s;const f=window.getComputedStyle(y).color;z.set(s,$(f))}y.remove()},m.getCurrentTransform=function q(z){const{a:y,b:s,c:f,d:_,e:b,f:M}=z.getTransform();return[y,s,f,_,b,M]},m.getCurrentTransformInverse=function se(z){const{a:y,b:s,c:f,d:_,e:b,f:M}=z.getTransform().invertSelf();return[y,s,f,_,b,M]},m.getFilenameFromUrl=function c(z,y=!1){return y||([z]=z.split(/[#?]/,1)),z.substring(z.lastIndexOf("/")+1)},m.getPdfFilenameFromUrl=function w(z,y="document.pdf"){if("string"!=typeof z)return y;if(i(z))return(0,L.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),y;const f=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,_=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(z);let b=f.exec(_[1])||f.exec(_[2])||f.exec(_[3]);if(b&&(b=b[0],b.includes("%")))try{b=f.exec(decodeURIComponent(b))[0]}catch{}return b||y},m.getRGB=$,m.getXfaPageViewport=function C(z,{scale:y=1,rotation:s=0}){const{width:f,height:_}=z.attributes.style,b=[0,0,parseInt(f),parseInt(_)];return new l({viewBox:b,scale:y,rotation:s})},m.isDataScheme=i,m.isPdfFile=function o(z){return"string"==typeof z&&/\.pdf$/i.test(z)},m.isValidFetchUrl=u,m.loadScript=function d(z,y=!1){return new Promise((s,f)=>{const _=document.createElement("script");_.src=z,_.onload=function(b){y&&_.remove(),s(b)},_.onerror=function(){f(new Error(`Cannot load script at: ${_.src}`))},(document.head||document.documentElement).append(_)})},m.noContextMenu=function v(z){z.preventDefault()},m.setLayerDimensions=function te(z,y,s=!1,f=!0){if(y instanceof l){const{pageWidth:_,pageHeight:b}=y.rawDims,{style:M}=z,O=L.FeatureTest.isCSSRoundSupported,I=`var(--scale-factor) * ${_}px`,g=`var(--scale-factor) * ${b}px`,P=O?`round(${I}, 1px)`:`calc(${I})`,k=O?`round(${g}, 1px)`:`calc(${g})`;s&&y.rotation%180!=0?(M.width=k,M.height=P):(M.width=P,M.height=k)}f&&z.setAttribute("data-main-rotation",y.rotation)};var h=D(7),L=D(1);const G="http://www.w3.org/2000/svg";function a(z){return r.apply(this,arguments)}function r(){return(r=_asyncToGenerator(function*(z,y=!1){if(u(z,document.baseURI)){const s=yield fetch(z);if(!s.ok)throw new Error(s.statusText);return y?new Uint8Array(yield s.arrayBuffer()):(0,L.stringToBytes)(yield s.text())}return new Promise((s,f)=>{const _=new XMLHttpRequest;_.open("GET",z,!0),y&&(_.responseType="arraybuffer"),_.onreadystatechange=()=>{if(_.readyState===XMLHttpRequest.DONE){if(200===_.status||0===_.status){let b;if(y&&_.response?b=new Uint8Array(_.response):!y&&_.responseText&&(b=(0,L.stringToBytes)(_.responseText)),b)return void s(b)}f(new Error(_.statusText))}},_.send(null)})})).apply(this,arguments)}m.PixelsPerInch=class N{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF},m.DOMFilterFactory=class Z extends h.BaseFilterFactory{#e;#t;#n;#i;#o;#r;#a;#l;#c;#s;#h=0;constructor({docId:y,ownerDocument:s=globalThis.document}={}){super(),this.#n=y,this.#i=s}get#d(){return this.#e||=new Map}get#f(){if(!this.#t){const y=this.#i.createElement("div"),{style:s}=y;s.visibility="hidden",s.contain="strict",s.width=s.height=0,s.position="absolute",s.top=s.left=0,s.zIndex=-1;const f=this.#i.createElementNS(G,"svg");f.setAttribute("width",0),f.setAttribute("height",0),this.#t=this.#i.createElementNS(G,"defs"),y.append(f),f.append(this.#t),this.#i.body.append(y)}return this.#t}addFilter(y){if(!y)return"none";let f,_,b,M,s=this.#d.get(y);if(s)return s;if(1===y.length){const P=y[0],k=new Array(256);for(let F=0;F<256;F++)k[F]=P[F]/255;M=f=_=b=k.join(",")}else{const[P,k,F]=y,B=new Array(256),H=new Array(256),Y=new Array(256);for(let ee=0;ee<256;ee++)B[ee]=P[ee]/255,H[ee]=k[ee]/255,Y[ee]=F[ee]/255;f=B.join(","),_=H.join(","),b=Y.join(","),M=`${f}${_}${b}`}if(s=this.#d.get(M),s)return this.#d.set(y,s),s;const O=`g_${this.#n}_transfer_map_${this.#h++}`,I=`url(#${O})`;this.#d.set(y,I),this.#d.set(M,I);const g=this.#g(O);return this.#_(f,_,b,g),I}addHCMFilter(y,s){const f=`${y}-${s}`;if(this.#r===f)return this.#a;if(this.#r=f,this.#a="none",this.#o?.remove(),!y||!s)return this.#a;const _=this.#u(y);y=L.Util.makeHexColor(..._);const b=this.#u(s);if(s=L.Util.makeHexColor(...b),this.#f.style.color="","#000000"===y&&"#ffffff"===s||y===s)return this.#a;const M=new Array(256);for(let k=0;k<=255;k++){const F=k/255;M[k]=F<=.03928?F/12.92:((F+.055)/1.055)**2.4}const O=M.join(","),I=`g_${this.#n}_hcm_filter`,g=this.#l=this.#g(I);this.#_(O,O,O,g),this.#p(g);const P=(k,F)=>{const B=_[k]/255,H=b[k]/255,Y=new Array(F+1);for(let ee=0;ee<=F;ee++)Y[ee]=B+ee/F*(H-B);return Y.join(",")};return this.#_(P(0,5),P(1,5),P(2,5),g),this.#a=`url(#${I})`,this.#a}addHighlightHCMFilter(y,s,f,_){const b=`${y}-${s}-${f}-${_}`;if(this.#c===b)return this.#s;if(this.#c=b,this.#s="none",this.#l?.remove(),!y||!s)return this.#s;const[M,O]=[y,s].map(this.#u.bind(this));let I=Math.round(.2126*M[0]+.7152*M[1]+.0722*M[2]),g=Math.round(.2126*O[0]+.7152*O[1]+.0722*O[2]),[P,k]=[f,_].map(this.#u.bind(this));g<I&&([I,g,P,k]=[g,I,k,P]),this.#f.style.color="";const F=(Y,ee,fe)=>{const re=new Array(256),ce=(g-I)/fe,de=Y/255,X=(ee-Y)/(255*fe);let ne=0;for(let he=0;he<=fe;he++){const le=Math.round(I+he*ce),pe=de+he*X;for(let me=ne;me<=le;me++)re[me]=pe;ne=le+1}for(let he=ne;he<256;he++)re[he]=re[ne-1];return re.join(",")},B=`g_${this.#n}_hcm_highlight_filter`,H=this.#l=this.#g(B);return this.#p(H),this.#_(F(P[0],k[0],5),F(P[1],k[1],5),F(P[2],k[2],5),H),this.#s=`url(#${B})`,this.#s}destroy(y=!1){y&&(this.#a||this.#s)||(this.#t&&(this.#t.parentNode.parentNode.remove(),this.#t=null),this.#e&&(this.#e.clear(),this.#e=null),this.#h=0)}#p(y){const s=this.#i.createElementNS(G,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),y.append(s)}#g(y){const s=this.#i.createElementNS(G,"filter");return s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("id",y),this.#f.append(s),s}#m(y,s,f){const _=this.#i.createElementNS(G,s);_.setAttribute("type","discrete"),_.setAttribute("tableValues",f),y.append(_)}#_(y,s,f,_){const b=this.#i.createElementNS(G,"feComponentTransfer");_.append(b),this.#m(b,"feFuncR",y),this.#m(b,"feFuncG",s),this.#m(b,"feFuncB",f)}#u(y){return this.#f.style.color=y,$(getComputedStyle(this.#f).getPropertyValue("color"))}},m.DOMCanvasFactory=class V extends h.BaseCanvasFactory{constructor({ownerDocument:y=globalThis.document}={}){super(),this._document=y}_createCanvas(y,s){const f=this._document.createElement("canvas");return f.width=y,f.height=s,f}},m.DOMCMapReaderFactory=class t extends h.BaseCMapReaderFactory{_fetchData(y,s){return a(y,this.isCompressed).then(f=>({cMapData:f,compressionType:s}))}},m.DOMStandardFontDataFactory=class n extends h.BaseStandardFontDataFactory{_fetchData(y){return a(y,!0)}},m.DOMSVGFactory=class p extends h.BaseSVGFactory{_createSVG(y){return document.createElementNS(G,y)}};class l{constructor({viewBox:y,scale:s,rotation:f,offsetX:_=0,offsetY:b=0,dontFlip:M=!1}){this.viewBox=y,this.scale=s,this.rotation=f,this.offsetX=_,this.offsetY=b;const O=(y[2]+y[0])/2,I=(y[3]+y[1])/2;let g,P,k,F,B,H,Y,ee;switch((f%=360)<0&&(f+=360),f){case 180:g=-1,P=0,k=0,F=1;break;case 90:g=0,P=1,k=1,F=0;break;case 270:g=0,P=-1,k=-1,F=0;break;case 0:g=1,P=0,k=0,F=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}M&&(k=-k,F=-F),0===g?(B=Math.abs(I-y[1])*s+_,H=Math.abs(O-y[0])*s+b,Y=(y[3]-y[1])*s,ee=(y[2]-y[0])*s):(B=Math.abs(O-y[0])*s+_,H=Math.abs(I-y[1])*s+b,Y=(y[2]-y[0])*s,ee=(y[3]-y[1])*s),this.transform=[g*s,P*s,k*s,F*s,B-g*s*O-k*s*I,H-P*s*O-F*s*I],this.width=Y,this.height=ee}get rawDims(){const{viewBox:y}=this;return(0,L.shadow)(this,"rawDims",{pageWidth:y[2]-y[0],pageHeight:y[3]-y[1],pageX:y[0],pageY:y[1]})}clone({scale:y=this.scale,rotation:s=this.rotation,offsetX:f=this.offsetX,offsetY:_=this.offsetY,dontFlip:b=!1}={}){return new l({viewBox:this.viewBox.slice(),scale:y,rotation:s,offsetX:f,offsetY:_,dontFlip:b})}convertToViewportPoint(y,s){return L.Util.applyTransform([y,s],this.transform)}convertToViewportRectangle(y){const s=L.Util.applyTransform([y[0],y[1]],this.transform),f=L.Util.applyTransform([y[2],y[3]],this.transform);return[s[0],s[1],f[0],f[1]]}convertToPdfPoint(y,s){return L.Util.applyInverseTransform([y,s],this.transform)}}function i(z){const y=z.length;let s=0;for(;s<y&&""===z[s].trim();)s++;return"data:"===z.substring(s,s+5).toLowerCase()}function u(z,y){try{const{protocol:s}=y?new URL(z,y):new URL(z);return"http:"===s||"https:"===s}catch{return!1}}let T;function $(z){if(z.startsWith("#")){const y=parseInt(z.slice(1),16);return[(16711680&y)>>16,(65280&y)>>8,255&y]}return z.startsWith("rgb(")?z.slice(4,-1).split(",").map(y=>parseInt(y)):z.startsWith("rgba(")?z.slice(5,-1).split(",").map(y=>parseInt(y)).slice(0,3):((0,L.warn)(`Not a valid color format: "${z}"`),[0,0,0])}m.PageViewport=l,m.RenderingCancelledException=class e extends L.BaseException{constructor(y,s=0){super(y,"RenderingCancelledException"),this.extraDelay=s}},m.StatTimer=class S{started=Object.create(null);times=[];time(y){y in this.started&&(0,L.warn)(`Timer is already running for ${y}`),this.started[y]=Date.now()}timeEnd(y){y in this.started||(0,L.warn)(`Timer has not been started for ${y}`),this.times.push({name:y,start:this.started[y],end:Date.now()}),delete this.started[y]}toString(){const y=[];let s=0;for(const{name:f}of this.times)s=Math.max(f.length,s);for(const{name:f,start:_,end:b}of this.times)y.push(`${f.padEnd(s)} ${b-_}ms\n`);return y.join("")}},m.PDFDateString=class U{static toDateObject(y){if(!y||"string"!=typeof y)return null;T||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const s=T.exec(y);if(!s)return null;const f=parseInt(s[1],10);let _=parseInt(s[2],10);_=_>=1&&_<=12?_-1:0;let b=parseInt(s[3],10);b=b>=1&&b<=31?b:1;let M=parseInt(s[4],10);M=M>=0&&M<=23?M:0;let O=parseInt(s[5],10);O=O>=0&&O<=59?O:0;let I=parseInt(s[6],10);I=I>=0&&I<=59?I:0;const g=s[7]||"Z";let P=parseInt(s[8],10);P=P>=0&&P<=23?P:0;let k=parseInt(s[9],10)||0;return k=k>=0&&k<=59?k:0,"-"===g?(M+=P,O+=k):"+"===g&&(M-=P,O-=k),new Date(Date.UTC(f,_,b,M,O,I))}}},(J,m,D)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.BaseStandardFontDataFactory=m.BaseSVGFactory=m.BaseFilterFactory=m.BaseCanvasFactory=m.BaseCMapReaderFactory=void 0;var h=D(1);class L{constructor(){this.constructor===L&&(0,h.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(r){return"none"}addHCMFilter(r,t){return"none"}addHighlightHCMFilter(r,t,n,p){return"none"}destroy(r=!1){}}m.BaseFilterFactory=L;class G{constructor(){this.constructor===G&&(0,h.unreachable)("Cannot initialize BaseCanvasFactory.")}create(r,t){if(r<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(r,t);return{canvas:n,context:n.getContext("2d")}}reset(r,t,n){if(!r.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");r.canvas.width=t,r.canvas.height=n}destroy(r){if(!r.canvas)throw new Error("Canvas is not specified");r.canvas.width=0,r.canvas.height=0,r.canvas=null,r.context=null}_createCanvas(r,t){(0,h.unreachable)("Abstract method `_createCanvas` called.")}}m.BaseCanvasFactory=G;class N{constructor({baseUrl:r=null,isCompressed:t=!0}){this.constructor===N&&(0,h.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=r,this.isCompressed=t}fetch({name:r}){var t=this;return _asyncToGenerator(function*(){if(!t.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!r)throw new Error("CMap name must be specified.");const n=t.baseUrl+r+(t.isCompressed?".bcmap":"");return t._fetchData(n,t.isCompressed?h.CMapCompressionType.BINARY:h.CMapCompressionType.NONE).catch(l=>{throw new Error(`Unable to load ${t.isCompressed?"binary ":""}CMap at: ${n}`)})})()}_fetchData(r,t){(0,h.unreachable)("Abstract method `_fetchData` called.")}}m.BaseCMapReaderFactory=N;class Z{constructor({baseUrl:r=null}){this.constructor===Z&&(0,h.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=r}fetch({filename:r}){var t=this;return _asyncToGenerator(function*(){if(!t.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!r)throw new Error("Font filename must be specified.");const n=`${t.baseUrl}${r}`;return t._fetchData(n).catch(p=>{throw new Error(`Unable to load font data at: ${n}`)})})()}_fetchData(r){(0,h.unreachable)("Abstract method `_fetchData` called.")}}m.BaseStandardFontDataFactory=Z;class V{constructor(){this.constructor===V&&(0,h.unreachable)("Cannot initialize BaseSVGFactory.")}create(r,t,n=!1){if(r<=0||t<=0)throw new Error("Invalid SVG dimensions");const p=this._createSVG("svg:svg");return p.setAttribute("version","1.1"),n||(p.setAttribute("width",`${r}px`),p.setAttribute("height",`${t}px`)),p.setAttribute("preserveAspectRatio","none"),p.setAttribute("viewBox",`0 0 ${r} ${t}`),p}createElement(r){if("string"!=typeof r)throw new Error("Invalid SVG element type");return this._createSVG(r)}_createSVG(r){(0,h.unreachable)("Abstract method `_createSVG` called.")}}m.BaseSVGFactory=V},(J,m,D)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.MurmurHash3_64=void 0;var h=D(1);const L=3285377520,G=4294901760,N=65535;m.MurmurHash3_64=class Z{constructor(a){this.h1=a?4294967295&a:L,this.h2=a?4294967295&a:L}update(a){let r,t;if("string"==typeof a){r=new Uint8Array(2*a.length),t=0;for(let d=0,E=a.length;d<E;d++){const T=a.charCodeAt(d);T<=255?r[t++]=T:(r[t++]=T>>>8,r[t++]=255&T)}}else{if(!(0,h.isArrayBuffer)(a))throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");r=a.slice(),t=r.byteLength}const n=t>>2,p=t-4*n,l=new Uint32Array(r.buffer,0,n);let e=0,i=0,o=this.h1,c=this.h2;const w=3432918353,S=461845907,u=w&N,v=S&N;for(let d=0;d<n;d++)1&d?(e=l[d],e=e*w&G|e*u&N,e=e<<15|e>>>17,e=e*S&G|e*v&N,o^=e,o=o<<13|o>>>19,o=5*o+3864292196):(i=l[d],i=i*w&G|i*u&N,i=i<<15|i>>>17,i=i*S&G|i*v&N,c^=i,c=c<<13|c>>>19,c=5*c+3864292196);switch(e=0,p){case 3:e^=r[4*n+2]<<16;case 2:e^=r[4*n+1]<<8;case 1:e^=r[4*n],e=e*w&G|e*u&N,e=e<<15|e>>>17,e=e*S&G|e*v&N,1&n?o^=e:c^=e}this.h1=o,this.h2=c}hexdigest(){let a=this.h1,r=this.h2;return a^=r>>>1,a=3981806797*a&G|36045*a&N,r=4283543511*r&G|(2950163797*(r<<16|a>>>16)&G)>>>16,a^=r>>>1,a=444984403*a&G|60499*a&N,r=3301882366*r&G|(3120437893*(r<<16|a>>>16)&G)>>>16,a^=r>>>1,(a>>>0).toString(16).padStart(8,"0")+(r>>>0).toString(16).padStart(8,"0")}}},(J,m,D)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.FontLoader=m.FontFaceObject=void 0;var h=D(1);m.FontLoader=class L{#e=new Set;constructor({ownerDocument:Z=globalThis.document,styleElement:V=null}){this._document=Z,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(Z){this.nativeFontFaces.add(Z),this._document.fonts.add(Z)}removeNativeFontFace(Z){this.nativeFontFaces.delete(Z),this._document.fonts.delete(Z)}insertRule(Z){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const V=this.styleElement.sheet;V.insertRule(Z,V.cssRules.length)}clear(){for(const Z of this.nativeFontFaces)this._document.fonts.delete(Z);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}loadSystemFont(Z){var V=this;return _asyncToGenerator(function*(){if(Z&&!V.#e.has(Z.loadedName)){if((0,h.assert)(!V.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),V.isFontLoadingAPISupported){const{loadedName:a,src:r,style:t}=Z,n=new FontFace(a,r,t);V.addNativeFontFace(n);try{yield n.load(),V.#e.add(a)}catch{(0,h.warn)(`Cannot load system font: ${Z.baseFontName}, installing it could help to improve PDF rendering.`),V.removeNativeFontFace(n)}return}(0,h.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}})()}bind(Z){var V=this;return _asyncToGenerator(function*(){if(Z.attached||Z.missingFile&&!Z.systemFontInfo)return;if(Z.attached=!0,Z.systemFontInfo)return void(yield V.loadSystemFont(Z.systemFontInfo));if(V.isFontLoadingAPISupported){const r=Z.createNativeFontFace();if(r){V.addNativeFontFace(r);try{yield r.loaded}catch(t){throw(0,h.warn)(`Failed to load font '${r.family}': '${t}'.`),Z.disableFontFace=!0,t}}return}const a=Z.createFontFaceRule();if(a){if(V.insertRule(a),V.isSyncFontLoadingSupported)return;yield new Promise(r=>{const t=V._queueLoadingCallback(r);V._prepareFontLoadEvent(Z,t)})}})()}get isFontLoadingAPISupported(){return(0,h.shadow)(this,"isFontLoadingAPISupported",!!this._document?.fonts)}get isSyncFontLoadingSupported(){let Z=!1;return(h.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(Z=!0),(0,h.shadow)(this,"isSyncFontLoadingSupported",Z)}_queueLoadingCallback(Z){const{loadingRequests:a}=this,r={done:!1,complete:function V(){for((0,h.assert)(!r.done,"completeRequest() cannot be called twice."),r.done=!0;a.length>0&&a[0].done;){const t=a.shift();setTimeout(t.callback,0)}},callback:Z};return a.push(r),r}get _loadTestFont(){const Z=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,h.shadow)(this,"_loadTestFont",Z)}_prepareFontLoadEvent(Z,V){function a(U,C){return U.charCodeAt(C)<<24|U.charCodeAt(C+1)<<16|U.charCodeAt(C+2)<<8|255&U.charCodeAt(C+3)}function r(U,C,$,j){return U.substring(0,C)+j+U.substring(C+$)}let t,n;const p=this._document.createElement("canvas");p.width=1,p.height=1;const l=p.getContext("2d");let e=0;const o=`lt${Date.now()}${this.loadTestFontId++}`;let c=this._loadTestFont;c=r(c,976,o.length,o);const u=1482184792;let v=a(c,16);for(t=0,n=o.length-3;t<n;t+=4)v=v-u+a(o,t)|0;t<o.length&&(v=v-u+a(o+"XXX",t)|0),c=r(c,16,4,(0,h.string32)(v));const d=`url(data:font/opentype;base64,${btoa(c)});`;this.insertRule(`@font-face {font-family:"${o}";src:${d}}`);const T=this._document.createElement("div");T.style.visibility="hidden",T.style.width=T.style.height="10px",T.style.position="absolute",T.style.top=T.style.left="0px";for(const U of[Z.loadedName,o]){const C=this._document.createElement("span");C.textContent="Hi",C.style.fontFamily=U,T.append(C)}this._document.body.append(T),function i(U,C){if(++e>30)return(0,h.warn)("Load test font never loaded."),void C();l.font="30px "+U,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0?C():setTimeout(i.bind(null,U,C))}(o,()=>{T.remove(),V.complete()})}},m.FontFaceObject=class G{constructor(Z,{isEvalSupported:V=!0,disableFontFace:a=!1,ignoreErrors:r=!1,inspectFont:t=null}){this.compiledGlyphs=Object.create(null);for(const n in Z)this[n]=Z[n];this.isEvalSupported=!1!==V,this.disableFontFace=!0===a,this.ignoreErrors=!0===r,this._inspectFont=t}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let Z;if(this.cssFontInfo){const V={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(V.style=`oblique ${this.cssFontInfo.italicAngle}deg`),Z=new FontFace(this.cssFontInfo.fontFamily,this.data,V)}else Z=new FontFace(this.loadedName,this.data,{});return this._inspectFont?.(this),Z}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const Z=(0,h.bytesToString)(this.data),V=`url(data:${this.mimetype};base64,${btoa(Z)});`;let a;if(this.cssFontInfo){let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),a=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${V}}`}else a=`@font-face {font-family:"${this.loadedName}";src:${V}}`;return this._inspectFont?.(this,V),a}getPathGenerator(Z,V){if(void 0!==this.compiledGlyphs[V])return this.compiledGlyphs[V];let a;try{a=Z.get(this.loadedName+"_path_"+V)}catch(r){if(!this.ignoreErrors)throw r;return(0,h.warn)(`getPathGenerator - ignoring character: "${r}".`),this.compiledGlyphs[V]=function(t,n){}}if(this.isEvalSupported&&h.FeatureTest.isEvalSupported){const r=[];for(const t of a){const n=void 0!==t.args?t.args.join(","):"";r.push("c.",t.cmd,"(",n,");\n")}return this.compiledGlyphs[V]=new Function("c","size",r.join(""))}return this.compiledGlyphs[V]=function(r,t){for(const n of a)"scale"===n.cmd&&(n.args=[t,-t]),r[n.cmd].apply(r,n.args)}}}},(J,m,D)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.NodeStandardFontDataFactory=m.NodeFilterFactory=m.NodeCanvasFactory=m.NodeCMapReaderFactory=void 0;var h=D(7);D(1);const G=function(r){return new Promise((t,n)=>{__webpack_require__(3237).readFile(r,(l,e)=>{!l&&e?t(new Uint8Array(e)):n(new Error(l))})})};m.NodeFilterFactory=class N extends h.BaseFilterFactory{},m.NodeCanvasFactory=class Z extends h.BaseCanvasFactory{_createCanvas(t,n){return __webpack_require__(7640).createCanvas(t,n)}},m.NodeCMapReaderFactory=class V extends h.BaseCMapReaderFactory{_fetchData(t,n){return G(t).then(p=>({cMapData:p,compressionType:n}))}},m.NodeStandardFontDataFactory=class a extends h.BaseStandardFontDataFactory{_fetchData(t){return G(t)}}},(J,m,D)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.CanvasGraphics=void 0;var h=D(1),L=D(6),G=D(12),N=D(13);const a=4096,p=16;class e{constructor(s){this.canvasFactory=s,this.cache=Object.create(null)}getCanvas(s,f,_){let b;return void 0!==this.cache[s]?(b=this.cache[s],this.canvasFactory.reset(b,f,_)):(b=this.canvasFactory.create(f,_),this.cache[s]=b),b}delete(s){delete this.cache[s]}clear(){for(const s in this.cache)this.canvasFactory.destroy(this.cache[s]),delete this.cache[s]}}function i(y,s,f,_,b,M,O,I,g,P){const[k,F,B,H,Y,ee]=(0,L.getCurrentTransform)(y);if(0===F&&0===B){const de=Math.round(O*k+Y),ne=Math.round(I*H+ee),le=Math.abs(Math.round((O+g)*k+Y)-de)||1,me=Math.abs(Math.round((I+P)*H+ee)-ne)||1;return y.setTransform(Math.sign(k),0,0,Math.sign(H),de,ne),y.drawImage(s,f,_,b,M,0,0,le,me),y.setTransform(k,F,B,H,Y,ee),[le,me]}if(0===k&&0===H){const de=Math.round(I*B+Y),ne=Math.round(O*F+ee),le=Math.abs(Math.round((I+P)*B+Y)-de)||1,me=Math.abs(Math.round((O+g)*F+ee)-ne)||1;return y.setTransform(0,Math.sign(F),Math.sign(B),0,de,ne),y.drawImage(s,f,_,b,M,0,0,me,le),y.setTransform(k,F,B,H,Y,ee),[me,le]}return y.drawImage(s,f,_,b,M,O,I,g,P),[Math.hypot(k,F)*g,Math.hypot(B,H)*P]}class c{constructor(s,f){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=h.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=h.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=h.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,s,f])}clone(){const s=Object.create(this);return s.clipBox=this.clipBox.slice(),s}setCurrentPoint(s,f){this.x=s,this.y=f}updatePathMinMax(s,f,_){[f,_]=h.Util.applyTransform([f,_],s),this.minX=Math.min(this.minX,f),this.minY=Math.min(this.minY,_),this.maxX=Math.max(this.maxX,f),this.maxY=Math.max(this.maxY,_)}updateRectMinMax(s,f){const _=h.Util.applyTransform(f,s),b=h.Util.applyTransform(f.slice(2),s);this.minX=Math.min(this.minX,_[0],b[0]),this.minY=Math.min(this.minY,_[1],b[1]),this.maxX=Math.max(this.maxX,_[0],b[0]),this.maxY=Math.max(this.maxY,_[1],b[1])}updateScalingPathMinMax(s,f){h.Util.scaleMinMax(s,f),this.minX=Math.min(this.minX,f[0]),this.maxX=Math.max(this.maxX,f[1]),this.minY=Math.min(this.minY,f[2]),this.maxY=Math.max(this.maxY,f[3])}updateCurvePathMinMax(s,f,_,b,M,O,I,g,P,k){const F=h.Util.bezierBoundingBox(f,_,b,M,O,I,g,P);if(k)return k[0]=Math.min(k[0],F[0],F[2]),k[1]=Math.max(k[1],F[0],F[2]),k[2]=Math.min(k[2],F[1],F[3]),void(k[3]=Math.max(k[3],F[1],F[3]));this.updateRectMinMax(s,F)}getPathBoundingBox(s=G.PathType.FILL,f=null){const _=[this.minX,this.minY,this.maxX,this.maxY];if(s===G.PathType.STROKE){f||(0,h.unreachable)("Stroke bounding box must include transform.");const b=h.Util.singularValueDecompose2dScale(f),M=b[0]*this.lineWidth/2,O=b[1]*this.lineWidth/2;_[0]-=M,_[1]-=O,_[2]+=M,_[3]+=O}return _}updateClipFromPath(){const s=h.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(s||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(s){this.clipBox=s,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(s=G.PathType.FILL,f=null){return h.Util.intersect(this.clipBox,this.getPathBoundingBox(s,f))}}function w(y,s){if(typeof ImageData<"u"&&s instanceof ImageData)return void y.putImageData(s,0,0);const f=s.height,_=s.width,b=f%p,M=(f-b)/p,O=0===b?M:M+1,I=y.createImageData(_,p);let P,g=0;const k=s.data,F=I.data;let B,H,Y,ee;if(s.kind===h.ImageKind.GRAYSCALE_1BPP){const fe=k.byteLength,re=new Uint32Array(F.buffer,0,F.byteLength>>2),ce=re.length,de=_+7>>3,X=4294967295,ne=h.FeatureTest.isLittleEndian?4278190080:255;for(B=0;B<O;B++){for(Y=B<M?p:b,P=0,H=0;H<Y;H++){const he=fe-g;let le=0;const pe=he>de?_:8*he-7,me=-8&pe;let ve=0,ye=0;for(;le<me;le+=8)ye=k[g++],re[P++]=128&ye?X:ne,re[P++]=64&ye?X:ne,re[P++]=32&ye?X:ne,re[P++]=16&ye?X:ne,re[P++]=8&ye?X:ne,re[P++]=4&ye?X:ne,re[P++]=2&ye?X:ne,re[P++]=1&ye?X:ne;for(;le<pe;le++)0===ve&&(ye=k[g++],ve=128),re[P++]=ye&ve?X:ne,ve>>=1}for(;P<ce;)re[P++]=0;y.putImageData(I,0,B*p)}}else if(s.kind===h.ImageKind.RGBA_32BPP){for(H=0,ee=_*p*4,B=0;B<M;B++)F.set(k.subarray(g,g+ee)),g+=ee,y.putImageData(I,0,H),H+=p;B<O&&(ee=_*b*4,F.set(k.subarray(g,g+ee)),y.putImageData(I,0,H))}else{if(s.kind!==h.ImageKind.RGB_24BPP)throw new Error(`bad image kind: ${s.kind}`);for(Y=p,ee=_*Y,B=0;B<O;B++){for(B>=M&&(Y=b,ee=_*Y),P=0,H=ee;H--;)F[P++]=k[g++],F[P++]=k[g++],F[P++]=k[g++],F[P++]=255;y.putImageData(I,0,B*p)}}}function S(y,s){if(s.bitmap)return void y.drawImage(s.bitmap,0,0);const f=s.height,_=s.width,b=f%p,M=(f-b)/p,O=0===b?M:M+1,I=y.createImageData(_,p);let g=0;const P=s.data,k=I.data;for(let F=0;F<O;F++){const B=F<M?p:b;({srcPos:g}=(0,N.convertBlackAndWhiteToRGBA)({src:P,srcPos:g,dest:k,width:_,height:B,nonBlackColor:0})),y.putImageData(I,0,F*p)}}function u(y,s){const f=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const _ of f)void 0!==y[_]&&(s[_]=y[_]);void 0!==y.setLineDash&&(s.setLineDash(y.getLineDash()),s.lineDashOffset=y.lineDashOffset)}function v(y){if(y.strokeStyle=y.fillStyle="#000000",y.fillRule="nonzero",y.globalAlpha=1,y.lineWidth=1,y.lineCap="butt",y.lineJoin="miter",y.miterLimit=10,y.globalCompositeOperation="source-over",y.font="10px sans-serif",void 0!==y.setLineDash&&(y.setLineDash([]),y.lineDashOffset=0),!h.isNodeJS){const{filter:s}=y;"none"!==s&&""!==s&&(y.filter="none")}}function d(y,s,f,_){const b=y.length;for(let M=3;M<b;M+=4){const O=y[M];if(0===O)y[M-3]=s,y[M-2]=f,y[M-1]=_;else if(O<255){const I=255-O;y[M-3]=y[M-3]*O+s*I>>8,y[M-2]=y[M-2]*O+f*I>>8,y[M-1]=y[M-1]*O+_*I>>8}}}function E(y,s,f){const _=y.length,b=1/255;for(let M=3;M<_;M+=4)s[M]=s[M]*(f?f[y[M]]:y[M])*b|0}function T(y,s,f){const _=y.length;for(let b=3;b<_;b+=4){const M=77*y[b-3]+152*y[b-2]+28*y[b-1];s[b]=f?s[b]*f[M>>8]>>8:s[b]*M>>16}}function $(y,s){const f=h.Util.singularValueDecompose2dScale(y);f[0]=Math.fround(f[0]),f[1]=Math.fround(f[1]);const _=Math.fround((globalThis.devicePixelRatio||1)*L.PixelsPerInch.PDF_TO_CSS_UNITS);return void 0!==s?s:f[0]<=_||f[1]<=_}const j=["butt","round","square"],q=["miter","round","bevel"],se={},te={};class z{constructor(s,f,_,b,M,{optionalContentConfig:O,markedContentStack:I=null},g,P){this.ctx=s,this.current=new c(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=f,this.objs=_,this.canvasFactory=b,this.filterFactory=M,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=I||[],this.optionalContentConfig=O,this.cachedCanvases=new e(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=g,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=P,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(s,f=null){return"string"==typeof s?s.startsWith("g_")?this.commonObjs.get(s):this.objs.get(s):f}beginDrawing({transform:s,viewport:f,transparency:_=!1,background:b=null}){const M=this.ctx.canvas.width,O=this.ctx.canvas.height,I=this.ctx.fillStyle;if(this.ctx.fillStyle=b||"#ffffff",this.ctx.fillRect(0,0,M,O),this.ctx.fillStyle=I,_){const g=this.cachedCanvases.getCanvas("transparent",M,O);this.compositeCtx=this.ctx,this.transparentCanvas=g.canvas,this.ctx=g.context,this.ctx.save(),this.ctx.transform(...(0,L.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),v(this.ctx),s&&(this.ctx.transform(...s),this.outputScaleX=s[0],this.outputScaleY=s[0]),this.ctx.transform(...f.transform),this.viewportScale=f.scale,this.baseTransform=(0,L.getCurrentTransform)(this.ctx)}executeOperatorList(s,f,_,b){const M=s.argsArray,O=s.fnArray;let I=f||0;const g=M.length;if(g===I)return I;const P=g-I>10&&"function"==typeof _,k=P?Date.now()+15:0;let F=0;const B=this.commonObjs,H=this.objs;let Y;for(;;){if(void 0!==b&&I===b.nextBreakPoint)return b.breakIt(I,_),I;if(Y=O[I],Y!==h.OPS.dependency)this[Y].apply(this,M[I]);else for(const ee of M[I]){const fe=ee.startsWith("g_")?B:H;if(!fe.has(ee))return fe.get(ee,_),I}if(I++,I===g)return I;if(P&&++F>10){if(Date.now()>k)return _(),I;F=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const s of this._cachedBitmapsMap.values()){for(const f of s.values())typeof HTMLCanvasElement<"u"&&f instanceof HTMLCanvasElement&&(f.width=f.height=0);s.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const s=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if("none"!==s){const f=this.ctx.filter;this.ctx.filter=s,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=f}}}_scaleImage(s,f){const _=s.width,b=s.height;let k,F,M=Math.max(Math.hypot(f[0],f[1]),1),O=Math.max(Math.hypot(f[2],f[3]),1),I=_,g=b,P="prescale1";for(;M>2&&I>1||O>2&&g>1;){let B=I,H=g;M>2&&I>1&&(B=I>=16384?Math.floor(I/2)-1||1:Math.ceil(I/2),M/=I/B),O>2&&g>1&&(H=g>=16384?Math.floor(g/2)-1||1:Math.ceil(g)/2,O/=g/H),k=this.cachedCanvases.getCanvas(P,B,H),F=k.context,F.clearRect(0,0,B,H),F.drawImage(s,0,0,I,g,0,0,B,H),s=k.canvas,I=B,g=H,P="prescale1"===P?"prescale2":"prescale1"}return{img:s,paintWidth:I,paintHeight:g}}_createMaskCanvas(s){const f=this.ctx,{width:_,height:b}=s,M=this.current.fillColor,O=this.current.patternFill,I=(0,L.getCurrentTransform)(f);let g,P,k,F;if((s.bitmap||s.data)&&s.count>1){const le=s.bitmap||s.data.buffer;P=JSON.stringify(O?I:[I.slice(0,4),M]),g=this._cachedBitmapsMap.get(le),g||(g=new Map,this._cachedBitmapsMap.set(le,g));const pe=g.get(P);if(pe&&!O)return{canvas:pe,offsetX:Math.round(Math.min(I[0],I[2])+I[4]),offsetY:Math.round(Math.min(I[1],I[3])+I[5])};k=pe}k||(F=this.cachedCanvases.getCanvas("maskCanvas",_,b),S(F.context,s));let B=h.Util.transform(I,[1/_,0,0,-1/b,0,0]);B=h.Util.transform(B,[1,0,0,1,0,-b]);const H=h.Util.applyTransform([0,0],B),Y=h.Util.applyTransform([_,b],B),ee=h.Util.normalizeRect([H[0],H[1],Y[0],Y[1]]),fe=Math.round(ee[2]-ee[0])||1,re=Math.round(ee[3]-ee[1])||1,ce=this.cachedCanvases.getCanvas("fillCanvas",fe,re),de=ce.context,X=Math.min(H[0],Y[0]),ne=Math.min(H[1],Y[1]);de.translate(-X,-ne),de.transform(...B),k||(k=this._scaleImage(F.canvas,(0,L.getCurrentTransformInverse)(de)),k=k.img,g&&O&&g.set(P,k)),de.imageSmoothingEnabled=$((0,L.getCurrentTransform)(de),s.interpolate),i(de,k,0,0,k.width,k.height,0,0,_,b),de.globalCompositeOperation="source-in";const he=h.Util.transform((0,L.getCurrentTransformInverse)(de),[1,0,0,1,-X,-ne]);return de.fillStyle=O?M.getPattern(f,this,he,G.PathType.FILL):M,de.fillRect(0,0,_,b),g&&!O&&(this.cachedCanvases.delete("fillCanvas"),g.set(P,ce.canvas)),{canvas:ce.canvas,offsetX:Math.round(X),offsetY:Math.round(ne)}}setLineWidth(s){s!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=s,this.ctx.lineWidth=s}setLineCap(s){this.ctx.lineCap=j[s]}setLineJoin(s){this.ctx.lineJoin=q[s]}setMiterLimit(s){this.ctx.miterLimit=s}setDash(s,f){const _=this.ctx;void 0!==_.setLineDash&&(_.setLineDash(s),_.lineDashOffset=f)}setRenderingIntent(s){}setFlatness(s){}setGState(s){for(const[f,_]of s)switch(f){case"LW":this.setLineWidth(_);break;case"LC":this.setLineCap(_);break;case"LJ":this.setLineJoin(_);break;case"ML":this.setMiterLimit(_);break;case"D":this.setDash(_[0],_[1]);break;case"RI":this.setRenderingIntent(_);break;case"FL":this.setFlatness(_);break;case"Font":this.setFont(_[0],_[1]);break;case"CA":this.current.strokeAlpha=_;break;case"ca":this.current.fillAlpha=_,this.ctx.globalAlpha=_;break;case"BM":this.ctx.globalCompositeOperation=_;break;case"SMask":this.current.activeSMask=_?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(_)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const s=this.inSMaskMode;this.current.activeSMask&&!s?this.beginSMaskMode():!this.current.activeSMask&&s&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const b=this.cachedCanvases.getCanvas("smaskGroupAt"+this.groupLevel,this.ctx.canvas.width,this.ctx.canvas.height);this.suspendedCtx=this.ctx,this.ctx=b.context;const M=this.ctx;M.setTransform(...(0,L.getCurrentTransform)(this.suspendedCtx)),u(this.suspendedCtx,M),function l(y,s){if(y._removeMirroring)throw new Error("Context is already forwarding operations.");y.__originalSave=y.save,y.__originalRestore=y.restore,y.__originalRotate=y.rotate,y.__originalScale=y.scale,y.__originalTranslate=y.translate,y.__originalTransform=y.transform,y.__originalSetTransform=y.setTransform,y.__originalResetTransform=y.resetTransform,y.__originalClip=y.clip,y.__originalMoveTo=y.moveTo,y.__originalLineTo=y.lineTo,y.__originalBezierCurveTo=y.bezierCurveTo,y.__originalRect=y.rect,y.__originalClosePath=y.closePath,y.__originalBeginPath=y.beginPath,y._removeMirroring=()=>{y.save=y.__originalSave,y.restore=y.__originalRestore,y.rotate=y.__originalRotate,y.scale=y.__originalScale,y.translate=y.__originalTranslate,y.transform=y.__originalTransform,y.setTransform=y.__originalSetTransform,y.resetTransform=y.__originalResetTransform,y.clip=y.__originalClip,y.moveTo=y.__originalMoveTo,y.lineTo=y.__originalLineTo,y.bezierCurveTo=y.__originalBezierCurveTo,y.rect=y.__originalRect,y.closePath=y.__originalClosePath,y.beginPath=y.__originalBeginPath,delete y._removeMirroring},y.save=function(){s.save(),this.__originalSave()},y.restore=function(){s.restore(),this.__originalRestore()},y.translate=function(_,b){s.translate(_,b),this.__originalTranslate(_,b)},y.scale=function(_,b){s.scale(_,b),this.__originalScale(_,b)},y.transform=function(_,b,M,O,I,g){s.transform(_,b,M,O,I,g),this.__originalTransform(_,b,M,O,I,g)},y.setTransform=function(_,b,M,O,I,g){s.setTransform(_,b,M,O,I,g),this.__originalSetTransform(_,b,M,O,I,g)},y.resetTransform=function(){s.resetTransform(),this.__originalResetTransform()},y.rotate=function(_){s.rotate(_),this.__originalRotate(_)},y.clip=function(_){s.clip(_),this.__originalClip(_)},y.moveTo=function(f,_){s.moveTo(f,_),this.__originalMoveTo(f,_)},y.lineTo=function(f,_){s.lineTo(f,_),this.__originalLineTo(f,_)},y.bezierCurveTo=function(f,_,b,M,O,I){s.bezierCurveTo(f,_,b,M,O,I),this.__originalBezierCurveTo(f,_,b,M,O,I)},y.rect=function(f,_,b,M){s.rect(f,_,b,M),this.__originalRect(f,_,b,M)},y.closePath=function(){s.closePath(),this.__originalClosePath()},y.beginPath=function(){s.beginPath(),this.__originalBeginPath()}}(M,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),u(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(s){this.current.activeSMask&&(s?(s[0]=Math.floor(s[0]),s[1]=Math.floor(s[1]),s[2]=Math.ceil(s[2]),s[3]=Math.ceil(s[3])):s=[0,0,this.ctx.canvas.width,this.ctx.canvas.height],function C(y,s,f,_){const b=_[0],M=_[1],O=_[2]-b,I=_[3]-M;0===O||0===I||(function U(y,s,f,_,b,M,O,I,g,P,k){const F=!!M,B=F?M[0]:0,H=F?M[1]:0,Y=F?M[2]:0,ee="Luminosity"===b?T:E,re=Math.min(_,Math.ceil(1048576/f));for(let ce=0;ce<_;ce+=re){const de=Math.min(re,_-ce),X=y.getImageData(I-P,ce+(g-k),f,de),ne=s.getImageData(I,ce+g,f,de);F&&d(X.data,B,H,Y),ee(X.data,ne.data,O),s.putImageData(ne,I,ce+g)}}(s.context,f,O,I,s.subtype,s.backdrop,s.transferMap,b,M,s.offsetX,s.offsetY),y.save(),y.globalAlpha=1,y.globalCompositeOperation="source-over",y.setTransform(1,0,0,1,0,0),y.drawImage(f.canvas,0,0),y.restore())}(this.suspendedCtx,this.current.activeSMask,this.ctx,s),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore())}save(){this.inSMaskMode?(u(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const s=this.current;this.stateStack.push(s),this.current=s.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),u(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(s,f,_,b,M,O){this.ctx.transform(s,f,_,b,M,O),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(s,f,_){const b=this.ctx,M=this.current;let g,P,O=M.x,I=M.y;const k=(0,L.getCurrentTransform)(b),F=0===k[0]&&0===k[3]||0===k[1]&&0===k[2],B=F?_.slice(0):null;for(let H=0,Y=0,ee=s.length;H<ee;H++)switch(0|s[H]){case h.OPS.rectangle:O=f[Y++],I=f[Y++];const fe=f[Y++],re=f[Y++],ce=O+fe,de=I+re;b.moveTo(O,I),0===fe||0===re?b.lineTo(ce,de):(b.lineTo(ce,I),b.lineTo(ce,de),b.lineTo(O,de)),F||M.updateRectMinMax(k,[O,I,ce,de]),b.closePath();break;case h.OPS.moveTo:O=f[Y++],I=f[Y++],b.moveTo(O,I),F||M.updatePathMinMax(k,O,I);break;case h.OPS.lineTo:O=f[Y++],I=f[Y++],b.lineTo(O,I),F||M.updatePathMinMax(k,O,I);break;case h.OPS.curveTo:g=O,P=I,O=f[Y+4],I=f[Y+5],b.bezierCurveTo(f[Y],f[Y+1],f[Y+2],f[Y+3],O,I),M.updateCurvePathMinMax(k,g,P,f[Y],f[Y+1],f[Y+2],f[Y+3],O,I,B),Y+=6;break;case h.OPS.curveTo2:g=O,P=I,b.bezierCurveTo(O,I,f[Y],f[Y+1],f[Y+2],f[Y+3]),M.updateCurvePathMinMax(k,g,P,O,I,f[Y],f[Y+1],f[Y+2],f[Y+3],B),O=f[Y+2],I=f[Y+3],Y+=4;break;case h.OPS.curveTo3:g=O,P=I,O=f[Y+2],I=f[Y+3],b.bezierCurveTo(f[Y],f[Y+1],O,I,O,I),M.updateCurvePathMinMax(k,g,P,f[Y],f[Y+1],O,I,O,I,B),Y+=4;break;case h.OPS.closePath:b.closePath()}F&&M.updateScalingPathMinMax(k,B),M.setCurrentPoint(O,I)}closePath(){this.ctx.closePath()}stroke(s=!0){const f=this.ctx,_=this.current.strokeColor;f.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"==typeof _&&_?.getPattern?(f.save(),f.strokeStyle=_.getPattern(f,this,(0,L.getCurrentTransformInverse)(f),G.PathType.STROKE),this.rescaleAndStroke(!1),f.restore()):this.rescaleAndStroke(!0)),s&&this.consumePath(this.current.getClippedPathBoundingBox()),f.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(s=!0){const f=this.ctx,_=this.current.fillColor;let M=!1;this.current.patternFill&&(f.save(),f.fillStyle=_.getPattern(f,this,(0,L.getCurrentTransformInverse)(f),G.PathType.FILL),M=!0);const O=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==O&&(this.pendingEOFill?(f.fill("evenodd"),this.pendingEOFill=!1):f.fill()),M&&f.restore(),s&&this.consumePath(O)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=se}eoClip(){this.pendingClip=te}beginText(){this.current.textMatrix=h.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const s=this.pendingTextPaths,f=this.ctx;if(void 0!==s){f.save(),f.beginPath();for(const _ of s)f.setTransform(..._.transform),f.translate(_.x,_.y),_.addToPath(f,_.fontSize);f.restore(),f.clip(),f.beginPath(),delete this.pendingTextPaths}else f.beginPath()}setCharSpacing(s){this.current.charSpacing=s}setWordSpacing(s){this.current.wordSpacing=s}setHScale(s){this.current.textHScale=s/100}setLeading(s){this.current.leading=-s}setFont(s,f){const _=this.commonObjs.get(s),b=this.current;if(!_)throw new Error(`Can't find font for ${s}`);if(b.fontMatrix=_.fontMatrix||h.FONT_IDENTITY_MATRIX,(0===b.fontMatrix[0]||0===b.fontMatrix[3])&&(0,h.warn)("Invalid font matrix for font "+s),f<0?(f=-f,b.fontDirection=-1):b.fontDirection=1,this.current.font=_,this.current.fontSize=f,_.isType3Font)return;const M=_.loadedName||"sans-serif",O=_.systemFontInfo?.css||`"${M}", ${_.fallbackName}`;let I="normal";_.black?I="900":_.bold&&(I="bold");const g=_.italic?"italic":"normal";let P=f;f<16?P=16:f>100&&(P=100),this.current.fontSizeScale=f/P,this.ctx.font=`${g} ${I} ${P}px ${O}`}setTextRenderingMode(s){this.current.textRenderingMode=s}setTextRise(s){this.current.textRise=s}moveText(s,f){this.current.x=this.current.lineX+=s,this.current.y=this.current.lineY+=f}setLeadingMoveText(s,f){this.setLeading(-f),this.moveText(s,f)}setTextMatrix(s,f,_,b,M,O){this.current.textMatrix=[s,f,_,b,M,O],this.current.textMatrixScale=Math.hypot(s,f),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(s,f,_,b){const M=this.ctx,O=this.current,I=O.font,g=O.textRenderingMode,P=O.fontSize/O.fontSizeScale,k=g&h.TextRenderingMode.FILL_STROKE_MASK,F=!!(g&h.TextRenderingMode.ADD_TO_PATH_FLAG),B=O.patternFill&&!I.missingFile;let H;(I.disableFontFace||F||B)&&(H=I.getPathGenerator(this.commonObjs,s)),I.disableFontFace||B?(M.save(),M.translate(f,_),M.beginPath(),H(M,P),b&&M.setTransform(...b),(k===h.TextRenderingMode.FILL||k===h.TextRenderingMode.FILL_STROKE)&&M.fill(),(k===h.TextRenderingMode.STROKE||k===h.TextRenderingMode.FILL_STROKE)&&M.stroke(),M.restore()):((k===h.TextRenderingMode.FILL||k===h.TextRenderingMode.FILL_STROKE)&&M.fillText(s,f,_),(k===h.TextRenderingMode.STROKE||k===h.TextRenderingMode.FILL_STROKE)&&M.strokeText(s,f,_)),F&&(this.pendingTextPaths||=[]).push({transform:(0,L.getCurrentTransform)(M),x:f,y:_,fontSize:P,addToPath:H})}get isFontSubpixelAAEnabled(){const{context:s}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);s.scale(1.5,1),s.fillText("I",0,10);const f=s.getImageData(0,0,10,10).data;let _=!1;for(let b=3;b<f.length;b+=4)if(f[b]>0&&f[b]<255){_=!0;break}return(0,h.shadow)(this,"isFontSubpixelAAEnabled",_)}showText(s){const f=this.current,_=f.font;if(_.isType3Font)return this.showType3Text(s);const b=f.fontSize;if(0===b)return;const M=this.ctx,O=f.fontSizeScale,I=f.charSpacing,g=f.wordSpacing,P=f.fontDirection,k=f.textHScale*P,F=s.length,B=_.vertical,H=B?1:-1,Y=_.defaultVMetrics,ee=b*f.fontMatrix[0],fe=f.textRenderingMode===h.TextRenderingMode.FILL&&!_.disableFontFace&&!f.patternFill;let re;if(M.save(),M.transform(...f.textMatrix),M.translate(f.x,f.y+f.textRise),M.scale(k,P>0?-1:1),f.patternFill){M.save();const he=f.fillColor.getPattern(M,this,(0,L.getCurrentTransformInverse)(M),G.PathType.FILL);re=(0,L.getCurrentTransform)(M),M.restore(),M.fillStyle=he}let ce=f.lineWidth;const de=f.textMatrixScale;if(0===de||0===ce){const he=f.textRenderingMode&h.TextRenderingMode.FILL_STROKE_MASK;(he===h.TextRenderingMode.STROKE||he===h.TextRenderingMode.FILL_STROKE)&&(ce=this.getSinglePixelWidth())}else ce/=de;if(1!==O&&(M.scale(O,O),ce/=O),M.lineWidth=ce,_.isInvalidPDFjsFont){const he=[];let le=0;for(const pe of s)he.push(pe.unicode),le+=pe.width;return M.fillText(he.join(""),0,0),f.x+=le*ee*k,M.restore(),void this.compose()}let ne,X=0;for(ne=0;ne<F;++ne){const he=s[ne];if("number"==typeof he){X+=H*he*b/1e3;continue}let le=!1;const pe=(he.isSpace?g:0)+I,me=he.fontChar,ve=he.accent;let ye,xe,Ce=he.width;if(B){const Ie=he.vmetric||Y,Ue=-(he.vmetric?Ie[1]:.5*Ce)*ee;Ce=Ie?-Ie[0]:Ce,ye=Ue/O,xe=(X+Ie[2]*ee)/O}else ye=X/O,xe=0;if(_.remeasure&&Ce>0){const Ie=1e3*M.measureText(me).width/b*O;if(Ce<Ie&&this.isFontSubpixelAAEnabled){const Ue=Ce/Ie;le=!0,M.save(),M.scale(Ue,1),ye/=Ue}else Ce!==Ie&&(ye+=(Ce-Ie)/2e3*b/O)}this.contentVisible&&(he.isInFont||_.missingFile)&&(fe&&!ve?M.fillText(me,ye,xe):(this.paintChar(me,ye,xe,re),ve&&this.paintChar(ve.fontChar,ye+b*ve.offset.x/O,xe-b*ve.offset.y/O,re))),X+=B?Ce*ee-pe*P:Ce*ee+pe*P,le&&M.restore()}B?f.y-=X:f.x+=X*k,M.restore(),this.compose()}showType3Text(s){const f=this.ctx,_=this.current,b=_.font,M=_.fontSize,O=_.fontDirection,I=b.vertical?1:-1,g=_.charSpacing,P=_.wordSpacing,k=_.textHScale*O,F=_.fontMatrix||h.FONT_IDENTITY_MATRIX,B=s.length;let Y,ee,fe,re;if(_.textRenderingMode!==h.TextRenderingMode.INVISIBLE&&0!==M){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,f.save(),f.transform(..._.textMatrix),f.translate(_.x,_.y),f.scale(k,O),Y=0;Y<B;++Y){if(ee=s[Y],"number"==typeof ee){re=I*ee*M/1e3,this.ctx.translate(re,0),_.x+=re*k;continue}const ce=(ee.isSpace?P:0)+g,de=b.charProcOperatorList[ee.operatorListId];de?(this.contentVisible&&(this.processingType3=ee,this.save(),f.scale(M,M),f.transform(...F),this.executeOperatorList(de),this.restore()),fe=h.Util.applyTransform([ee.width,0],F)[0]*M+ce,f.translate(fe,0),_.x+=fe*k):(0,h.warn)(`Type3 character "${ee.operatorListId}" is not available.`)}f.restore(),this.processingType3=null}}setCharWidth(s,f){}setCharWidthAndBounds(s,f,_,b,M,O){this.ctx.rect(_,b,M-_,O-b),this.ctx.clip(),this.endPath()}getColorN_Pattern(s){let f;if("TilingPattern"===s[0]){const _=s[1],b=this.baseTransform||(0,L.getCurrentTransform)(this.ctx);f=new G.TilingPattern(s,_,this.ctx,{createCanvasGraphics:O=>new z(O,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})},b)}else f=this._getPattern(s[1],s[2]);return f}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(s,f,_){const b=h.Util.makeHexColor(s,f,_);this.ctx.strokeStyle=b,this.current.strokeColor=b}setFillRGBColor(s,f,_){const b=h.Util.makeHexColor(s,f,_);this.ctx.fillStyle=b,this.current.fillColor=b,this.current.patternFill=!1}_getPattern(s,f=null){let _;return this.cachedPatterns.has(s)?_=this.cachedPatterns.get(s):(_=(0,G.getShadingPattern)(this.getObject(s)),this.cachedPatterns.set(s,_)),f&&(_.matrix=f),_}shadingFill(s){if(!this.contentVisible)return;const f=this.ctx;this.save();const _=this._getPattern(s);f.fillStyle=_.getPattern(f,this,(0,L.getCurrentTransformInverse)(f),G.PathType.SHADING);const b=(0,L.getCurrentTransformInverse)(f);if(b){const{width:M,height:O}=f.canvas,[I,g,P,k]=h.Util.getAxialAlignedBoundingBox([0,0,M,O],b);this.ctx.fillRect(I,g,P-I,k-g)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,h.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,h.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(s,f){this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(s)&&6===s.length&&this.transform(...s),this.baseTransform=(0,L.getCurrentTransform)(this.ctx),f)&&(this.ctx.rect(f[0],f[1],f[2]-f[0],f[3]-f[1]),this.current.updateRectMinMax((0,L.getCurrentTransform)(this.ctx),f),this.clip(),this.endPath())}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(s){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const f=this.ctx;s.isolated||(0,h.info)("TODO: Support non-isolated groups."),s.knockout&&(0,h.warn)("Knockout groups not supported.");const _=(0,L.getCurrentTransform)(f);if(s.matrix&&f.transform(...s.matrix),!s.bbox)throw new Error("Bounding box is required.");let b=h.Util.getAxialAlignedBoundingBox(s.bbox,(0,L.getCurrentTransform)(f));b=h.Util.intersect(b,[0,0,f.canvas.width,f.canvas.height])||[0,0,0,0];const O=Math.floor(b[0]),I=Math.floor(b[1]);let g=Math.max(Math.ceil(b[2])-O,1),P=Math.max(Math.ceil(b[3])-I,1),k=1,F=1;g>a&&(k=g/a,g=a),P>a&&(F=P/a,P=a),this.current.startNewPathAndClipBox([0,0,g,P]);let B="groupAt"+this.groupLevel;s.smask&&(B+="_smask_"+this.smaskCounter++%2);const H=this.cachedCanvases.getCanvas(B,g,P),Y=H.context;Y.scale(1/k,1/F),Y.translate(-O,-I),Y.transform(..._),s.smask?this.smaskStack.push({canvas:H.canvas,context:Y,offsetX:O,offsetY:I,scaleX:k,scaleY:F,subtype:s.smask.subtype,backdrop:s.smask.backdrop,transferMap:s.smask.transferMap||null,startTransformInverse:null}):(f.setTransform(1,0,0,1,0,0),f.translate(O,I),f.scale(k,F),f.save()),u(f,Y),this.ctx=Y,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(f),this.groupLevel++}endGroup(s){if(!this.contentVisible)return;this.groupLevel--;const f=this.ctx,_=this.groupStack.pop();if(this.ctx=_,this.ctx.imageSmoothingEnabled=!1,s.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const b=(0,L.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...b);const M=h.Util.getAxialAlignedBoundingBox([0,0,f.canvas.width,f.canvas.height],b);this.ctx.drawImage(f.canvas,0,0),this.ctx.restore(),this.compose(M)}}beginAnnotation(s,f,_,b,M){if(this.#e(),v(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(f)&&4===f.length){const O=f[2]-f[0],I=f[3]-f[1];if(M&&this.annotationCanvasMap){(_=_.slice())[4]-=f[0],_[5]-=f[1],(f=f.slice())[0]=f[1]=0,f[2]=O,f[3]=I;const[g,P]=h.Util.singularValueDecompose2dScale((0,L.getCurrentTransform)(this.ctx)),{viewportScale:k}=this,F=Math.ceil(O*this.outputScaleX*k),B=Math.ceil(I*this.outputScaleY*k);this.annotationCanvas=this.canvasFactory.create(F,B);const{canvas:H,context:Y}=this.annotationCanvas;this.annotationCanvasMap.set(s,H),this.annotationCanvas.savedCtx=this.ctx,this.ctx=Y,this.ctx.save(),this.ctx.setTransform(g,0,0,-P,0,I*P),v(this.ctx)}else v(this.ctx),this.ctx.rect(f[0],f[1],O,I),this.ctx.clip(),this.endPath()}this.current=new c(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(..._),this.transform(...b)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(s){if(!this.contentVisible)return;const f=s.count;(s=this.getObject(s.data,s)).count=f;const _=this.ctx,b=this.processingType3;if(b&&(void 0===b.compiled&&(b.compiled=function o(y){const{width:s,height:f}=y;if(s>1e3||f>1e3)return null;const b=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),M=s+1;let I,g,P,O=new Uint8Array(M*(f+1));const k=s+7&-8;let F=new Uint8Array(k*f),B=0;for(const re of y.data){let ce=128;for(;ce>0;)F[B++]=re&ce?0:255,ce>>=1}let H=0;for(B=0,0!==F[B]&&(O[0]=1,++H),g=1;g<s;g++)F[B]!==F[B+1]&&(O[g]=F[B]?2:1,++H),B++;for(0!==F[B]&&(O[g]=2,++H),I=1;I<f;I++){B=I*k,P=I*M,F[B-k]!==F[B]&&(O[P]=F[B]?1:8,++H);let re=(F[B]?4:0)+(F[B-k]?8:0);for(g=1;g<s;g++)re=(re>>2)+(F[B+1]?4:0)+(F[B-k+1]?8:0),b[re]&&(O[P+g]=b[re],++H),B++;if(F[B-k]!==F[B]&&(O[P+g]=F[B]?2:4,++H),H>1e3)return null}for(B=k*(f-1),P=I*M,0!==F[B]&&(O[P]=8,++H),g=1;g<s;g++)F[B]!==F[B+1]&&(O[P+g]=F[B]?4:8,++H),B++;if(0!==F[B]&&(O[P+g]=4,++H),H>1e3)return null;const Y=new Int32Array([0,M,-1,0,-M,0,0,0,1]),ee=new Path2D;for(I=0;H&&I<=f;I++){let re=I*M;const ce=re+s;for(;re<ce&&!O[re];)re++;if(re===ce)continue;ee.moveTo(re%M,I);const de=re;let X=O[re];do{const ne=Y[X];do{re+=ne}while(!O[re]);const he=O[re];5!==he&&10!==he?(X=he,O[re]=0):(X=he&51*X>>4,O[re]&=X>>2|X<<2),ee.lineTo(re%M,re/M|0),O[re]||--H}while(de!==re);--I}return F=null,O=null,function(re){re.save(),re.scale(1/s,-1/f),re.translate(0,-f),re.fill(ee),re.beginPath(),re.restore()}}(s)),b.compiled))return void b.compiled(_);const M=this._createMaskCanvas(s),O=M.canvas;_.save(),_.setTransform(1,0,0,1,0,0),_.drawImage(O,M.offsetX,M.offsetY),_.restore(),this.compose()}paintImageMaskXObjectRepeat(s,f,_=0,b=0,M,O){if(!this.contentVisible)return;s=this.getObject(s.data,s);const I=this.ctx;I.save();const g=(0,L.getCurrentTransform)(I);I.transform(f,_,b,M,0,0);const P=this._createMaskCanvas(s);I.setTransform(1,0,0,1,P.offsetX-g[4],P.offsetY-g[5]);for(let k=0,F=O.length;k<F;k+=2){const B=h.Util.transform(g,[f,_,b,M,O[k],O[k+1]]),[H,Y]=h.Util.applyTransform([0,0],B);I.drawImage(P.canvas,H,Y)}I.restore(),this.compose()}paintImageMaskXObjectGroup(s){if(!this.contentVisible)return;const f=this.ctx,_=this.current.fillColor,b=this.current.patternFill;for(const M of s){const{data:O,width:I,height:g,transform:P}=M,k=this.cachedCanvases.getCanvas("maskCanvas",I,g),F=k.context;F.save(),S(F,this.getObject(O,M)),F.globalCompositeOperation="source-in",F.fillStyle=b?_.getPattern(F,this,(0,L.getCurrentTransformInverse)(f),G.PathType.FILL):_,F.fillRect(0,0,I,g),F.restore(),f.save(),f.transform(...P),f.scale(1,-1),i(f,k.canvas,0,0,I,g,0,-1,1,1),f.restore()}this.compose()}paintImageXObject(s){if(!this.contentVisible)return;const f=this.getObject(s);f?this.paintInlineImageXObject(f):(0,h.warn)("Dependent image isn't ready yet")}paintImageXObjectRepeat(s,f,_,b){if(!this.contentVisible)return;const M=this.getObject(s);if(!M)return void(0,h.warn)("Dependent image isn't ready yet");const O=M.width,I=M.height,g=[];for(let P=0,k=b.length;P<k;P+=2)g.push({transform:[f,0,0,_,b[P],b[P+1]],x:0,y:0,w:O,h:I});this.paintInlineImageXObjectGroup(M,g)}applyTransferMapsToCanvas(s){return"none"!==this.current.transferMaps&&(s.filter=this.current.transferMaps,s.drawImage(s.canvas,0,0),s.filter="none"),s.canvas}applyTransferMapsToBitmap(s){if("none"===this.current.transferMaps)return s.bitmap;const{bitmap:f,width:_,height:b}=s,M=this.cachedCanvases.getCanvas("inlineImage",_,b),O=M.context;return O.filter=this.current.transferMaps,O.drawImage(f,0,0),O.filter="none",M.canvas}paintInlineImageXObject(s){if(!this.contentVisible)return;const f=s.width,_=s.height,b=this.ctx;if(this.save(),!h.isNodeJS){const{filter:I}=b;"none"!==I&&""!==I&&(b.filter="none")}let M;if(b.scale(1/f,-1/_),s.bitmap)M=this.applyTransferMapsToBitmap(s);else if("function"==typeof HTMLElement&&s instanceof HTMLElement||!s.data)M=s;else{const g=this.cachedCanvases.getCanvas("inlineImage",f,_).context;w(g,s),M=this.applyTransferMapsToCanvas(g)}const O=this._scaleImage(M,(0,L.getCurrentTransformInverse)(b));b.imageSmoothingEnabled=$((0,L.getCurrentTransform)(b),s.interpolate),i(b,O.img,0,0,O.paintWidth,O.paintHeight,0,-_,f,_),this.compose(),this.restore()}paintInlineImageXObjectGroup(s,f){if(!this.contentVisible)return;const _=this.ctx;let b;if(s.bitmap)b=s.bitmap;else{const g=this.cachedCanvases.getCanvas("inlineImage",s.width,s.height).context;w(g,s),b=this.applyTransferMapsToCanvas(g)}for(const M of f)_.save(),_.transform(...M.transform),_.scale(1,-1),i(_,b,M.x,M.y,M.w,M.h,0,-1,1,1),_.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(s){}markPointProps(s,f){}beginMarkedContent(s){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(s,f){this.markedContentStack.push("OC"===s?{visible:this.optionalContentConfig.isVisible(f)}:{visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(s){const f=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(s);const _=this.ctx;this.pendingClip&&(f||(this.pendingClip===te?_.clip("evenodd"):_.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),_.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const s=(0,L.getCurrentTransform)(this.ctx);if(0===s[1]&&0===s[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(s[0]),Math.abs(s[3]));else{const f=Math.abs(s[0]*s[3]-s[2]*s[1]),_=Math.hypot(s[0],s[2]),b=Math.hypot(s[1],s[3]);this._cachedGetSinglePixelWidth=Math.max(_,b)/f}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(-1===this._cachedScaleForStroking[0]){const{lineWidth:s}=this.current,{a:f,b:_,c:b,d:M}=this.ctx.getTransform();let O,I;if(0===_&&0===b){const g=Math.abs(f),P=Math.abs(M);if(g===P)if(0===s)O=I=1/g;else{const k=g*s;O=I=k<1?1/k:1}else if(0===s)O=1/g,I=1/P;else{const k=g*s,F=P*s;O=k<1?1/k:1,I=F<1?1/F:1}}else{const g=Math.abs(f*M-_*b),P=Math.hypot(f,_),k=Math.hypot(b,M);if(0===s)O=k/g,I=P/g;else{const F=s*g;O=k>F?k/F:1,I=P>F?P/F:1}}this._cachedScaleForStroking[0]=O,this._cachedScaleForStroking[1]=I}return this._cachedScaleForStroking}rescaleAndStroke(s){const{ctx:f}=this,{lineWidth:_}=this.current,[b,M]=this.getScaleForStroking();if(f.lineWidth=_||1,1===b&&1===M)return void f.stroke();const O=f.getLineDash();if(s&&f.save(),f.scale(b,M),O.length>0){const I=Math.max(b,M);f.setLineDash(O.map(g=>g/I)),f.lineDashOffset/=I}f.stroke(),s&&f.restore()}isContentVisible(){for(let s=this.markedContentStack.length-1;s>=0;s--)if(!this.markedContentStack[s].visible)return!1;return!0}}m.CanvasGraphics=z;for(const y in h.OPS)void 0!==z.prototype[y]&&(z.prototype[h.OPS[y]]=z.prototype[y])},(J,m,D)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.TilingPattern=m.PathType=void 0,m.getShadingPattern=function p(i){switch(i[0]){case"RadialAxial":return new V(i);case"Mesh":return new t(i);case"Dummy":return new n}throw new Error(`Unknown IR type: ${i[0]}`)};var h=D(1),L=D(6);const G={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function N(i,o){if(!o)return;const c=o[2]-o[0],w=o[3]-o[1],S=new Path2D;S.rect(o[0],o[1],c,w),i.clip(S)}m.PathType=G;class Z{constructor(){this.constructor===Z&&(0,h.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,h.unreachable)("Abstract method `getPattern` called.")}}class V extends Z{constructor(o){super(),this._type=o[1],this._bbox=o[2],this._colorStops=o[3],this._p0=o[4],this._p1=o[5],this._r0=o[6],this._r1=o[7],this.matrix=null}_createGradient(o){let c;"axial"===this._type?c=o.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(c=o.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const w of this._colorStops)c.addColorStop(w[0],w[1]);return c}getPattern(o,c,w,S){let u;if(S===G.STROKE||S===G.FILL){const v=c.current.getClippedPathBoundingBox(S,(0,L.getCurrentTransform)(o))||[0,0,0,0],d=Math.ceil(v[2]-v[0])||1,E=Math.ceil(v[3]-v[1])||1,T=c.cachedCanvases.getCanvas("pattern",d,E,!0),U=T.context;U.clearRect(0,0,U.canvas.width,U.canvas.height),U.beginPath(),U.rect(0,0,U.canvas.width,U.canvas.height),U.translate(-v[0],-v[1]),w=h.Util.transform(w,[1,0,0,1,v[0],v[1]]),U.transform(...c.baseTransform),this.matrix&&U.transform(...this.matrix),N(U,this._bbox),U.fillStyle=this._createGradient(U),U.fill(),u=o.createPattern(T.canvas,"no-repeat");const C=new DOMMatrix(w);u.setTransform(C)}else N(o,this._bbox),u=this._createGradient(o);return u}}function a(i,o,c,w,S,u,v,d){const E=o.coords,T=o.colors,U=i.data,C=4*i.width;let $;E[c+1]>E[w+1]&&($=c,c=w,w=$,$=u,u=v,v=$),E[w+1]>E[S+1]&&($=w,w=S,S=$,$=v,v=d,d=$),E[c+1]>E[w+1]&&($=c,c=w,w=$,$=u,u=v,v=$);const j=(E[c]+o.offsetX)*o.scaleX,q=(E[c+1]+o.offsetY)*o.scaleY,se=(E[w]+o.offsetX)*o.scaleX,te=(E[w+1]+o.offsetY)*o.scaleY,z=(E[S]+o.offsetX)*o.scaleX,y=(E[S+1]+o.offsetY)*o.scaleY;if(q>=y)return;const s=T[u],f=T[u+1],_=T[u+2],b=T[v],M=T[v+1],O=T[v+2],I=T[d],g=T[d+1],P=T[d+2],k=Math.round(q),F=Math.round(y);let B,H,Y,ee,fe,re,ce,de;for(let X=k;X<=F;X++){if(X<te){const me=X<q?0:(q-X)/(q-te);B=j-(j-se)*me,H=s-(s-b)*me,Y=f-(f-M)*me,ee=_-(_-O)*me}else{let me;me=X>y?1:te===y?0:(te-X)/(te-y),B=se-(se-z)*me,H=b-(b-I)*me,Y=M-(M-g)*me,ee=O-(O-P)*me}let ne;ne=X<q?0:X>y?1:(q-X)/(q-y),fe=j-(j-z)*ne,re=s-(s-I)*ne,ce=f-(f-g)*ne,de=_-(_-P)*ne;const he=Math.round(Math.min(B,fe)),le=Math.round(Math.max(B,fe));let pe=C*X+4*he;for(let me=he;me<=le;me++)ne=(B-me)/(B-fe),ne<0?ne=0:ne>1&&(ne=1),U[pe++]=H-(H-re)*ne|0,U[pe++]=Y-(Y-ce)*ne|0,U[pe++]=ee-(ee-de)*ne|0,U[pe++]=255}}function r(i,o,c){const w=o.coords,S=o.colors;let u,v;switch(o.type){case"lattice":const d=o.verticesPerRow,E=Math.floor(w.length/d)-1,T=d-1;for(u=0;u<E;u++){let U=u*d;for(let C=0;C<T;C++,U++)a(i,c,w[U],w[U+1],w[U+d],S[U],S[U+1],S[U+d]),a(i,c,w[U+d+1],w[U+1],w[U+d],S[U+d+1],S[U+1],S[U+d])}break;case"triangles":for(u=0,v=w.length;u<v;u+=3)a(i,c,w[u],w[u+1],w[u+2],S[u],S[u+1],S[u+2]);break;default:throw new Error("illegal figure")}}class t extends Z{constructor(o){super(),this._coords=o[2],this._colors=o[3],this._figures=o[4],this._bounds=o[5],this._bbox=o[7],this._background=o[8],this.matrix=null}_createMeshCanvas(o,c,w){const d=Math.floor(this._bounds[0]),E=Math.floor(this._bounds[1]),T=Math.ceil(this._bounds[2])-d,U=Math.ceil(this._bounds[3])-E,C=Math.min(Math.ceil(Math.abs(T*o[0]*1.1)),3e3),$=Math.min(Math.ceil(Math.abs(U*o[1]*1.1)),3e3),j=T/C,q=U/$,se={coords:this._coords,colors:this._colors,offsetX:-d,offsetY:-E,scaleX:1/j,scaleY:1/q},y=w.getCanvas("mesh",C+4,$+4,!1),s=y.context,f=s.createImageData(C,$);if(c){const b=f.data;for(let M=0,O=b.length;M<O;M+=4)b[M]=c[0],b[M+1]=c[1],b[M+2]=c[2],b[M+3]=255}for(const b of this._figures)r(f,b,se);return s.putImageData(f,2,2),{canvas:y.canvas,offsetX:d-2*j,offsetY:E-2*q,scaleX:j,scaleY:q}}getPattern(o,c,w,S){let u;if(N(o,this._bbox),S===G.SHADING)u=h.Util.singularValueDecompose2dScale((0,L.getCurrentTransform)(o));else if(u=h.Util.singularValueDecompose2dScale(c.baseTransform),this.matrix){const d=h.Util.singularValueDecompose2dScale(this.matrix);u=[u[0]*d[0],u[1]*d[1]]}const v=this._createMeshCanvas(u,S===G.SHADING?null:this._background,c.cachedCanvases);return S!==G.SHADING&&(o.setTransform(...c.baseTransform),this.matrix&&o.transform(...this.matrix)),o.translate(v.offsetX,v.offsetY),o.scale(v.scaleX,v.scaleY),o.createPattern(v.canvas,"no-repeat")}}class n extends Z{getPattern(){return"hotpink"}}m.TilingPattern=(()=>{class i{static MAX_PATTERN_SIZE=3e3;constructor(c,w,S,u,v){this.operatorList=c[2],this.matrix=c[3]||[1,0,0,1,0,0],this.bbox=c[4],this.xstep=c[5],this.ystep=c[6],this.paintType=c[7],this.tilingType=c[8],this.color=w,this.ctx=S,this.canvasGraphicsFactory=u,this.baseTransform=v}createPatternCanvas(c){const w=this.operatorList,S=this.bbox,u=this.xstep,v=this.ystep,d=this.paintType,T=this.color,U=this.canvasGraphicsFactory;(0,h.info)("TilingType: "+this.tilingType);const C=S[0],$=S[1],j=S[2],q=S[3],se=h.Util.singularValueDecompose2dScale(this.matrix),te=h.Util.singularValueDecompose2dScale(this.baseTransform),z=[se[0]*te[0],se[1]*te[1]],y=this.getSizeAndScale(u,this.ctx.canvas.width,z[0]),s=this.getSizeAndScale(v,this.ctx.canvas.height,z[1]),f=c.cachedCanvases.getCanvas("pattern",y.size,s.size,!0),_=f.context,b=U.createCanvasGraphics(_);b.groupLevel=c.groupLevel,this.setFillAndStrokeStyleToContext(b,d,T);let M=C,O=$,I=j,g=q;return C<0&&(M=0,I+=Math.abs(C)),$<0&&(O=0,g+=Math.abs($)),_.translate(-y.scale*M,-s.scale*O),b.transform(y.scale,0,0,s.scale,0,0),_.save(),this.clipBbox(b,M,O,I,g),b.baseTransform=(0,L.getCurrentTransform)(b.ctx),b.executeOperatorList(w),b.endDrawing(),{canvas:f.canvas,scaleX:y.scale,scaleY:s.scale,offsetX:M,offsetY:O}}getSizeAndScale(c,w,S){c=Math.abs(c);const u=Math.max(i.MAX_PATTERN_SIZE,w);let v=Math.ceil(c*S);return v>=u?v=u:S=v/c,{scale:S,size:v}}clipBbox(c,w,S,u,v){c.ctx.rect(w,S,u-w,v-S),c.current.updateRectMinMax((0,L.getCurrentTransform)(c.ctx),[w,S,u,v]),c.clip(),c.endPath()}setFillAndStrokeStyleToContext(c,w,S){const u=c.ctx,v=c.current;switch(w){case 1:const d=this.ctx;u.fillStyle=d.fillStyle,u.strokeStyle=d.strokeStyle,v.fillColor=d.fillStyle,v.strokeColor=d.strokeStyle;break;case 2:const E=h.Util.makeHexColor(S[0],S[1],S[2]);u.fillStyle=E,u.strokeStyle=E,v.fillColor=E,v.strokeColor=E;break;default:throw new h.FormatError(`Unsupported paint type: ${w}`)}}getPattern(c,w,S,u){let v=S;u!==G.SHADING&&(v=h.Util.transform(v,w.baseTransform),this.matrix&&(v=h.Util.transform(v,this.matrix)));const d=this.createPatternCanvas(w);let E=new DOMMatrix(v);E=E.translate(d.offsetX,d.offsetY),E=E.scale(1/d.scaleX,1/d.scaleY);const T=c.createPattern(d.canvas,"repeat");return T.setTransform(E),T}}return i})()},(J,m,D)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.convertBlackAndWhiteToRGBA=G,m.convertToRGBA=function L(V){switch(V.kind){case h.ImageKind.GRAYSCALE_1BPP:return G(V);case h.ImageKind.RGB_24BPP:return function N({src:V,srcPos:a=0,dest:r,destPos:t=0}){let l=0;const e=V.length>>2,i=new Uint32Array(V.buffer,a,e);if(h.FeatureTest.isLittleEndian){for(;l<e-2;l+=3,t+=4){const o=i[l],c=i[l+1],w=i[l+2];r[t]=4278190080|o,r[t+1]=o>>>24|c<<8|4278190080,r[t+2]=c>>>16|w<<16|4278190080,r[t+3]=w>>>8|4278190080}for(let o=4*l,c=V.length;o<c;o+=3)r[t++]=V[o]|V[o+1]<<8|V[o+2]<<16|4278190080}else{for(;l<e-2;l+=3,t+=4){const o=i[l],c=i[l+1],w=i[l+2];r[t]=255|o,r[t+1]=o<<24|c>>>8|255,r[t+2]=c<<16|w>>>16|255,r[t+3]=w<<8|255}for(let o=4*l,c=V.length;o<c;o+=3)r[t++]=V[o]<<24|V[o+1]<<16|V[o+2]<<8|255}return{srcPos:a,destPos:t}}(V)}return null},m.grayToRGBA=function Z(V,a){if(h.FeatureTest.isLittleEndian)for(let r=0,t=V.length;r<t;r++)a[r]=65793*V[r]|4278190080;else for(let r=0,t=V.length;r<t;r++)a[r]=16843008*V[r]|255};var h=D(1);function G({src:V,srcPos:a=0,dest:r,width:t,height:n,nonBlackColor:p=4294967295,inverseDecode:l=!1}){const e=h.FeatureTest.isLittleEndian?4278190080:255,[i,o]=l?[p,e]:[e,p],c=t>>3,w=7&t,S=V.length;r=new Uint32Array(r.buffer);let u=0;for(let v=0;v<n;v++){for(const E=a+c;a<E;a++){const T=a<S?V[a]:255;r[u++]=128&T?o:i,r[u++]=64&T?o:i,r[u++]=32&T?o:i,r[u++]=16&T?o:i,r[u++]=8&T?o:i,r[u++]=4&T?o:i,r[u++]=2&T?o:i,r[u++]=1&T?o:i}if(0===w)continue;const d=a<S?V[a++]:255;for(let E=0;E<w;E++)r[u++]=d&1<<7-E?o:i}return{srcPos:a,destPos:u}}},(J,m)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.GlobalWorkerOptions=void 0;const D=Object.create(null);m.GlobalWorkerOptions=D,D.workerPort=null,D.workerSrc=""},(J,m,D)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.MessageHandler=void 0;var h=D(1);function N(V){switch(V instanceof Error||"object"==typeof V&&null!==V||(0,h.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),V.name){case"AbortException":return new h.AbortException(V.message);case"MissingPDFException":return new h.MissingPDFException(V.message);case"PasswordException":return new h.PasswordException(V.message,V.code);case"UnexpectedResponseException":return new h.UnexpectedResponseException(V.message,V.status);case"UnknownErrorException":return new h.UnknownErrorException(V.message,V.details);default:return new h.UnknownErrorException(V.message,V.toString())}}m.MessageHandler=class Z{constructor(a,r,t){this.sourceName=a,this.targetName=r,this.comObj=t,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=n=>{const p=n.data;if(p.targetName!==this.sourceName)return;if(p.stream)return void this.#t(p);if(p.callback){const e=p.callbackId,i=this.callbackCapabilities[e];if(!i)throw new Error(`Cannot resolve callback ${e}`);if(delete this.callbackCapabilities[e],1===p.callback)i.resolve(p.data);else{if(2!==p.callback)throw new Error("Unexpected callback case");i.reject(N(p.reason))}return}const l=this.actionHandler[p.action];if(!l)throw new Error(`Unknown action from worker: ${p.action}`);if(p.callbackId){const e=this.sourceName,i=p.sourceName;new Promise(function(o){o(l(p.data))}).then(function(o){t.postMessage({sourceName:e,targetName:i,callback:1,callbackId:p.callbackId,data:o})},function(o){t.postMessage({sourceName:e,targetName:i,callback:2,callbackId:p.callbackId,reason:N(o)})})}else p.streamId?this.#e(p):l(p.data)},t.addEventListener("message",this._onComObjOnMessage)}on(a,r){const t=this.actionHandler;if(t[a])throw new Error(`There is already an actionName called "${a}"`);t[a]=r}send(a,r,t){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:a,data:r},t)}sendWithPromise(a,r,t){const n=this.callbackId++,p=new h.PromiseCapability;this.callbackCapabilities[n]=p;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:a,callbackId:n,data:r},t)}catch(l){p.reject(l)}return p.promise}sendWithStream(a,r,t,n){const p=this.streamId++,l=this.sourceName,e=this.targetName,i=this.comObj;return new ReadableStream({start:o=>{const c=new h.PromiseCapability;return this.streamControllers[p]={controller:o,startCall:c,pullCall:null,cancelCall:null,isClosed:!1},i.postMessage({sourceName:l,targetName:e,action:a,streamId:p,data:r,desiredSize:o.desiredSize},n),c.promise},pull:o=>{const c=new h.PromiseCapability;return this.streamControllers[p].pullCall=c,i.postMessage({sourceName:l,targetName:e,stream:6,streamId:p,desiredSize:o.desiredSize}),c.promise},cancel:o=>{(0,h.assert)(o instanceof Error,"cancel must have a valid reason");const c=new h.PromiseCapability;return this.streamControllers[p].cancelCall=c,this.streamControllers[p].isClosed=!0,i.postMessage({sourceName:l,targetName:e,stream:1,streamId:p,reason:N(o)}),c.promise}},t)}#e(a){const r=a.streamId,t=this.sourceName,n=a.sourceName,p=this.comObj,l=this,e=this.actionHandler[a.action],i={enqueue(o,c=1,w){if(this.isCancelled)return;const S=this.desiredSize;this.desiredSize-=c,S>0&&this.desiredSize<=0&&(this.sinkCapability=new h.PromiseCapability,this.ready=this.sinkCapability.promise),p.postMessage({sourceName:t,targetName:n,stream:4,streamId:r,chunk:o},w)},close(){this.isCancelled||(this.isCancelled=!0,p.postMessage({sourceName:t,targetName:n,stream:3,streamId:r}),delete l.streamSinks[r])},error(o){(0,h.assert)(o instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,p.postMessage({sourceName:t,targetName:n,stream:5,streamId:r,reason:N(o)}))},sinkCapability:new h.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:a.desiredSize,ready:null};i.sinkCapability.resolve(),i.ready=i.sinkCapability.promise,this.streamSinks[r]=i,new Promise(function(o){o(e(a.data,i))}).then(function(){p.postMessage({sourceName:t,targetName:n,stream:8,streamId:r,success:!0})},function(o){p.postMessage({sourceName:t,targetName:n,stream:8,streamId:r,reason:N(o)})})}#t(a){const r=a.streamId,t=this.sourceName,n=a.sourceName,p=this.comObj,l=this.streamControllers[r],e=this.streamSinks[r];switch(a.stream){case 8:a.success?l.startCall.resolve():l.startCall.reject(N(a.reason));break;case 7:a.success?l.pullCall.resolve():l.pullCall.reject(N(a.reason));break;case 6:if(!e){p.postMessage({sourceName:t,targetName:n,stream:7,streamId:r,success:!0});break}e.desiredSize<=0&&a.desiredSize>0&&e.sinkCapability.resolve(),e.desiredSize=a.desiredSize,new Promise(function(i){i(e.onPull?.())}).then(function(){p.postMessage({sourceName:t,targetName:n,stream:7,streamId:r,success:!0})},function(i){p.postMessage({sourceName:t,targetName:n,stream:7,streamId:r,reason:N(i)})});break;case 4:if((0,h.assert)(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(a.chunk);break;case 3:if((0,h.assert)(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),this.#n(l,r);break;case 5:(0,h.assert)(l,"error should have stream controller"),l.controller.error(N(a.reason)),this.#n(l,r);break;case 2:a.success?l.cancelCall.resolve():l.cancelCall.reject(N(a.reason)),this.#n(l,r);break;case 1:if(!e)break;new Promise(function(i){i(e.onCancel?.(N(a.reason)))}).then(function(){p.postMessage({sourceName:t,targetName:n,stream:2,streamId:r,success:!0})},function(i){p.postMessage({sourceName:t,targetName:n,stream:2,streamId:r,reason:N(i)})}),e.sinkCapability.reject(N(a.reason)),e.isCancelled=!0,delete this.streamSinks[r];break;default:throw new Error("Unexpected stream case")}}#n(a,r){var t=this;return _asyncToGenerator(function*(){yield Promise.allSettled([a.startCall?.promise,a.pullCall?.promise,a.cancelCall?.promise]),delete t.streamControllers[r]})()}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},(J,m,D)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.Metadata=void 0;var h=D(1);m.Metadata=class L{#e;#t;constructor({parsedData:N,rawData:Z}){this.#e=N,this.#t=Z}getRaw(){return this.#t}get(N){return this.#e.get(N)??null}getAll(){return(0,h.objectFromMap)(this.#e)}has(N){return this.#e.has(N)}}},(J,m,D)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.OptionalContentConfig=void 0;var h=D(1),L=D(8);const G=Symbol("INTERNAL");class N{#e=!0;constructor(a,r){this.name=a,this.intent=r}get visible(){return this.#e}_setVisible(a,r){a!==G&&(0,h.unreachable)("Internal method `_setVisible` called."),this.#e=r}}m.OptionalContentConfig=class Z{#e=null;#t=new Map;#n=null;#i=null;constructor(a){if(this.name=null,this.creator=null,null!==a){this.name=a.name,this.creator=a.creator,this.#i=a.order;for(const r of a.groups)this.#t.set(r.id,new N(r.name,r.intent));if("OFF"===a.baseState)for(const r of this.#t.values())r._setVisible(G,!1);for(const r of a.on)this.#t.get(r)._setVisible(G,!0);for(const r of a.off)this.#t.get(r)._setVisible(G,!1);this.#n=this.getHash()}}#o(a){const r=a.length;if(r<2)return!0;const t=a[0];for(let n=1;n<r;n++){const p=a[n];let l;if(Array.isArray(p))l=this.#o(p);else{if(!this.#t.has(p))return(0,h.warn)(`Optional content group not found: ${p}`),!0;l=this.#t.get(p).visible}switch(t){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return"And"===t}isVisible(a){if(0===this.#t.size)return!0;if(!a)return(0,h.warn)("Optional content group not defined."),!0;if("OCG"===a.type)return this.#t.has(a.id)?this.#t.get(a.id).visible:((0,h.warn)(`Optional content group not found: ${a.id}`),!0);if("OCMD"===a.type){if(a.expression)return this.#o(a.expression);if(!a.policy||"AnyOn"===a.policy){for(const r of a.ids){if(!this.#t.has(r))return(0,h.warn)(`Optional content group not found: ${r}`),!0;if(this.#t.get(r).visible)return!0}return!1}if("AllOn"===a.policy){for(const r of a.ids){if(!this.#t.has(r))return(0,h.warn)(`Optional content group not found: ${r}`),!0;if(!this.#t.get(r).visible)return!1}return!0}if("AnyOff"===a.policy){for(const r of a.ids){if(!this.#t.has(r))return(0,h.warn)(`Optional content group not found: ${r}`),!0;if(!this.#t.get(r).visible)return!0}return!1}if("AllOff"===a.policy){for(const r of a.ids){if(!this.#t.has(r))return(0,h.warn)(`Optional content group not found: ${r}`),!0;if(this.#t.get(r).visible)return!1}return!0}return(0,h.warn)(`Unknown optional content policy ${a.policy}.`),!0}return(0,h.warn)(`Unknown group type ${a.type}.`),!0}setVisibility(a,r=!0){this.#t.has(a)?(this.#t.get(a)._setVisible(G,!!r),this.#e=null):(0,h.warn)(`Optional content group not found: ${a}`)}get hasInitialVisibility(){return null===this.#n||this.getHash()===this.#n}getOrder(){return this.#t.size?this.#i?this.#i.slice():[...this.#t.keys()]:null}getGroups(){return this.#t.size>0?(0,h.objectFromMap)(this.#t):null}getGroup(a){return this.#t.get(a)||null}getHash(){if(null!==this.#e)return this.#e;const a=new L.MurmurHash3_64;for(const[r,t]of this.#t)a.update(`${r}:${t.visible}`);return this.#e=a.hexdigest()}}},(J,m,D)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.PDFDataTransportStream=void 0;var h=D(1),L=D(6);m.PDFDataTransportStream=class G{constructor({length:a,initialData:r,progressiveDone:t=!1,contentDispositionFilename:n=null,disableRange:p=!1,disableStream:l=!1},e){if((0,h.assert)(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=t,this._contentDispositionFilename=n,r?.length>0){const i=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(i)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!l,this._isRangeSupported=!p,this._contentLength=a,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((i,o)=>{this._onReceiveData({begin:i,chunk:o})}),this._pdfDataRangeTransport.addProgressListener((i,o)=>{this._onProgress({loaded:i,total:o})}),this._pdfDataRangeTransport.addProgressiveReadListener(i=>{this._onReceiveData({chunk:i})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:a,chunk:r}){const t=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;if(void 0===a)this._fullRequestReader?this._fullRequestReader._enqueue(t):this._queuedChunks.push(t);else{const n=this._rangeReaders.some(function(p){return p._begin===a&&(p._enqueue(t),!0)});(0,h.assert)(n,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(a){void 0===a.total?this._rangeReaders[0]?.onProgress?.({loaded:a.loaded}):this._fullRequestReader?.onProgress?.({loaded:a.loaded,total:a.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(a){const r=this._rangeReaders.indexOf(a);r>=0&&this._rangeReaders.splice(r,1)}getFullReader(){(0,h.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const a=this._queuedChunks;return this._queuedChunks=null,new N(this,a,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(a,r){if(r<=this._progressiveDataLength)return null;const t=new Z(this,a,r);return this._pdfDataRangeTransport.requestDataRange(a,r),this._rangeReaders.push(t),t}cancelAllRequests(a){this._fullRequestReader?.cancel(a);for(const r of this._rangeReaders.slice(0))r.cancel(a);this._pdfDataRangeTransport.abort()}};class N{constructor(a,r,t=!1,n=null){this._stream=a,this._done=t||!1,this._filename=(0,L.isPdfFile)(n)?n:null,this._queuedChunks=r||[],this._loaded=0;for(const p of this._queuedChunks)this._loaded+=p.byteLength;this._requests=[],this._headersReady=Promise.resolve(),a._fullRequestReader=this,this.onProgress=null}_enqueue(a){this._done||(this._requests.length>0?this._requests.shift().resolve({value:a,done:!1}):this._queuedChunks.push(a),this._loaded+=a.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}read(){var a=this;return _asyncToGenerator(function*(){if(a._queuedChunks.length>0)return{value:a._queuedChunks.shift(),done:!1};if(a._done)return{value:void 0,done:!0};const r=new h.PromiseCapability;return a._requests.push(r),r.promise})()}cancel(a){this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Z{constructor(a,r,t){this._stream=a,this._begin=r,this._end=t,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(a){if(!this._done){if(0===this._requests.length)this._queuedChunk=a;else{this._requests.shift().resolve({value:a,done:!1});for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}read(){var a=this;return _asyncToGenerator(function*(){if(a._queuedChunk){const t=a._queuedChunk;return a._queuedChunk=null,{value:t,done:!1}}if(a._done)return{value:void 0,done:!0};const r=new h.PromiseCapability;return a._requests.push(r),r.promise})()}cancel(a){this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(J,m,D)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.PDFFetchStream=void 0;var h=D(1),L=D(20);function G(t,n,p){return{method:"GET",headers:t,signal:p.signal,mode:"cors",credentials:n?"include":"same-origin",redirect:"follow"}}function N(t){const n=new Headers;for(const p in t){const l=t[p];void 0!==l&&n.append(p,l)}return n}function Z(t){return t instanceof Uint8Array?t.buffer:t instanceof ArrayBuffer?t:((0,h.warn)(`getArrayBuffer - unexpected data format: ${t}`),new Uint8Array(t).buffer)}m.PDFFetchStream=class V{constructor(n){this.source=n,this.isHttp=/^https?:/i.test(n.url),this.httpHeaders=this.isHttp&&n.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,h.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new a(this),this._fullRequestReader}getRangeReader(n,p){if(p<=this._progressiveDataLength)return null;const l=new r(this,n,p);return this._rangeRequestReaders.push(l),l}cancelAllRequests(n){this._fullRequestReader?.cancel(n);for(const p of this._rangeRequestReaders.slice(0))p.cancel(n)}};class a{constructor(n){this._stream=n,this._reader=null,this._loaded=0,this._filename=null;const p=n.source;this._withCredentials=p.withCredentials||!1,this._contentLength=p.length,this._headersCapability=new h.PromiseCapability,this._disableRange=p.disableRange||!1,this._rangeChunkSize=p.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!p.disableStream,this._isRangeSupported=!p.disableRange,this._headers=N(this._stream.httpHeaders);const l=p.url;fetch(l,G(this._headers,this._withCredentials,this._abortController)).then(e=>{if(!(0,L.validateResponseStatus)(e.status))throw(0,L.createResponseStatusError)(e.status,l);this._reader=e.body.getReader(),this._headersCapability.resolve();const i=w=>e.headers.get(w),{allowRangeRequests:o,suggestedLength:c}=(0,L.validateRangeRequestCapabilities)({getResponseHeader:i,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=c||this._contentLength,this._filename=(0,L.extractFilenameFromHeader)(i),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new h.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var n=this;return _asyncToGenerator(function*(){yield n._headersCapability.promise;const{value:p,done:l}=yield n._reader.read();return l?{value:p,done:l}:(n._loaded+=p.byteLength,n.onProgress?.({loaded:n._loaded,total:n._contentLength}),{value:Z(p),done:!1})})()}cancel(n){this._reader?.cancel(n),this._abortController.abort()}}class r{constructor(n,p,l){this._stream=n,this._reader=null,this._loaded=0;const e=n.source;this._withCredentials=e.withCredentials||!1,this._readCapability=new h.PromiseCapability,this._isStreamingSupported=!e.disableStream,this._abortController=new AbortController,this._headers=N(this._stream.httpHeaders),this._headers.append("Range",`bytes=${p}-${l-1}`);const i=e.url;fetch(i,G(this._headers,this._withCredentials,this._abortController)).then(o=>{if(!(0,L.validateResponseStatus)(o.status))throw(0,L.createResponseStatusError)(o.status,i);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}read(){var n=this;return _asyncToGenerator(function*(){yield n._readCapability.promise;const{value:p,done:l}=yield n._reader.read();return l?{value:p,done:l}:(n._loaded+=p.byteLength,n.onProgress?.({loaded:n._loaded}),{value:Z(p),done:!1})})()}cancel(n){this._reader?.cancel(n),this._abortController.abort()}}},(J,m,D)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.createResponseStatusError=function V(r,t){return 404===r||0===r&&t.startsWith("file:")?new h.MissingPDFException('Missing PDF "'+t+'".'):new h.UnexpectedResponseException(`Unexpected server response (${r}) while retrieving PDF "${t}".`,r)},m.extractFilenameFromHeader=function Z(r){const t=r("Content-Disposition");if(t){let n=(0,L.getFilenameFromContentDispositionHeader)(t);if(n.includes("%"))try{n=decodeURIComponent(n)}catch{}if((0,G.isPdfFile)(n))return n}return null},m.validateRangeRequestCapabilities=function N({getResponseHeader:r,isHttp:t,rangeChunkSize:n,disableRange:p}){const l={allowRangeRequests:!1,suggestedLength:void 0},e=parseInt(r("Content-Length"),10);return!Number.isInteger(e)||(l.suggestedLength=e,e<=2*n)||p||!t||"bytes"!==r("Accept-Ranges")||"identity"!==(r("Content-Encoding")||"identity")||(l.allowRangeRequests=!0),l},m.validateResponseStatus=function a(r){return 200===r||206===r};var h=D(1),L=D(21),G=D(6)},(J,m,D)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.getFilenameFromContentDispositionHeader=function L(G){let N=!0,Z=V("filename\\*","i").exec(G);if(Z){Z=Z[1];let e=n(Z);return e=unescape(e),e=p(e),e=l(e),r(e)}if(Z=function t(e){const i=[];let o;const c=V("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(o=c.exec(e));){let[,S,u,v]=o;if(S=parseInt(S,10),S in i){if(0===S)break}else i[S]=[u,v]}const w=[];for(let S=0;S<i.length&&S in i;++S){let[u,v]=i[S];v=n(v),u&&(v=unescape(v),0===S&&(v=p(v))),w.push(v)}return w.join("")}(G),Z)return r(l(Z));if(Z=V("filename","i").exec(G),Z){Z=Z[1];let e=n(Z);return e=l(e),r(e)}function V(e,i){return new RegExp("(?:^|;)\\s*"+e+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',i)}function a(e,i){if(e){if(!/^[\x00-\xFF]+$/.test(i))return i;try{const o=new TextDecoder(e,{fatal:!0}),c=(0,h.stringToBytes)(i);i=o.decode(c),N=!1}catch{}}return i}function r(e){return N&&/[\x80-\xff]/.test(e)&&(e=a("utf-8",e),N&&(e=a("iso-8859-1",e))),e}function n(e){if(e.startsWith('"')){const i=e.slice(1).split('\\"');for(let o=0;o<i.length;++o){const c=i[o].indexOf('"');-1!==c&&(i[o]=i[o].slice(0,c),i.length=o+1),i[o]=i[o].replaceAll(/\\(.)/g,"$1")}e=i.join('"')}return e}function p(e){const i=e.indexOf("'");return-1===i?e:a(e.slice(0,i),e.slice(i+1).replace(/^[^']*'/,""))}function l(e){return!e.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(e)?e:e.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(i,o,c,w){if("q"===c||"Q"===c)return a(o,w=(w=w.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,function(S,u){return String.fromCharCode(parseInt(u,16))}));try{w=atob(w)}catch{}return a(o,w)})}return""};var h=D(1)},(J,m,D)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.PDFNetworkStream=void 0;var h=D(1),L=D(20);class V{constructor(p,l={}){this.url=p,this.isHttp=/^https?:/i.test(p),this.httpHeaders=this.isHttp&&l.httpHeaders||Object.create(null),this.withCredentials=l.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(p,l,e){const i={begin:p,end:l};for(const o in e)i[o]=e[o];return this.request(i)}requestFull(p){return this.request(p)}request(p){const l=new XMLHttpRequest,e=this.currXhrId++,i=this.pendingRequests[e]={xhr:l};l.open("GET",this.url),l.withCredentials=this.withCredentials;for(const o in this.httpHeaders){const c=this.httpHeaders[o];void 0!==c&&l.setRequestHeader(o,c)}return this.isHttp&&"begin"in p&&"end"in p?(l.setRequestHeader("Range",`bytes=${p.begin}-${p.end-1}`),i.expectedStatus=206):i.expectedStatus=200,l.responseType="arraybuffer",p.onError&&(l.onerror=function(o){p.onError(l.status)}),l.onreadystatechange=this.onStateChange.bind(this,e),l.onprogress=this.onProgress.bind(this,e),i.onHeadersReceived=p.onHeadersReceived,i.onDone=p.onDone,i.onError=p.onError,i.onProgress=p.onProgress,l.send(null),e}onProgress(p,l){const e=this.pendingRequests[p];e&&e.onProgress?.(l)}onStateChange(p,l){const e=this.pendingRequests[p];if(!e)return;const i=e.xhr;if(i.readyState>=2&&e.onHeadersReceived&&(e.onHeadersReceived(),delete e.onHeadersReceived),4!==i.readyState||!(p in this.pendingRequests))return;if(delete this.pendingRequests[p],0===i.status&&this.isHttp)return void e.onError?.(i.status);const o=i.status||200;if((200!==o||206!==e.expectedStatus)&&o!==e.expectedStatus)return void e.onError?.(i.status);const w=function Z(n){const p=n.response;return"string"!=typeof p?p:(0,h.stringToBytes)(p).buffer}(i);if(206===o){const S=i.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(S);e.onDone({begin:parseInt(u[1],10),chunk:w})}else w?e.onDone({begin:0,chunk:w}):e.onError?.(i.status)}getRequestXhr(p){return this.pendingRequests[p].xhr}isPendingRequest(p){return p in this.pendingRequests}abortRequest(p){const l=this.pendingRequests[p].xhr;delete this.pendingRequests[p],l.abort()}}m.PDFNetworkStream=class a{constructor(p){this._source=p,this._manager=new V(p.url,{httpHeaders:p.httpHeaders,withCredentials:p.withCredentials}),this._rangeChunkSize=p.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(p){const l=this._rangeRequestReaders.indexOf(p);l>=0&&this._rangeRequestReaders.splice(l,1)}getFullReader(){return(0,h.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new r(this._manager,this._source),this._fullRequestReader}getRangeReader(p,l){const e=new t(this._manager,p,l);return e.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(e),e}cancelAllRequests(p){this._fullRequestReader?.cancel(p);for(const l of this._rangeRequestReaders.slice(0))l.cancel(p)}};class r{constructor(p,l){this._manager=p;const e={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=l.url,this._fullRequestId=p.requestFull(e),this._headersReceivedCapability=new h.PromiseCapability,this._disableRange=l.disableRange||!1,this._contentLength=l.length,this._rangeChunkSize=l.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const p=this._fullRequestId,l=this._manager.getRequestXhr(p),e=c=>l.getResponseHeader(c),{allowRangeRequests:i,suggestedLength:o}=(0,L.validateRangeRequestCapabilities)({getResponseHeader:e,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=(0,L.extractFilenameFromHeader)(e),this._isRangeSupported&&this._manager.abortRequest(p),this._headersReceivedCapability.resolve()}_onDone(p){if(p&&(this._requests.length>0?this._requests.shift().resolve({value:p.chunk,done:!1}):this._cachedChunks.push(p.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const l of this._requests)l.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(p){this._storedError=(0,L.createResponseStatusError)(p,this._url),this._headersReceivedCapability.reject(this._storedError);for(const l of this._requests)l.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(p){this.onProgress?.({loaded:p.loaded,total:p.lengthComputable?p.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}read(){var p=this;return _asyncToGenerator(function*(){if(p._storedError)throw p._storedError;if(p._cachedChunks.length>0)return{value:p._cachedChunks.shift(),done:!1};if(p._done)return{value:void 0,done:!0};const l=new h.PromiseCapability;return p._requests.push(l),l.promise})()}cancel(p){this._done=!0,this._headersReceivedCapability.reject(p);for(const l of this._requests)l.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class t{constructor(p,l,e){this._manager=p;const i={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=p.url,this._requestId=p.requestRange(l,e,i),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(p){const l=p.chunk;this._requests.length>0?this._requests.shift().resolve({value:l,done:!1}):this._queuedChunk=l,this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(p){this._storedError=(0,L.createResponseStatusError)(p,this._url);for(const l of this._requests)l.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(p){this.isStreamingSupported||this.onProgress?.({loaded:p.loaded})}get isStreamingSupported(){return!1}read(){var p=this;return _asyncToGenerator(function*(){if(p._storedError)throw p._storedError;if(null!==p._queuedChunk){const e=p._queuedChunk;return p._queuedChunk=null,{value:e,done:!1}}if(p._done)return{value:void 0,done:!0};const l=new h.PromiseCapability;return p._requests.push(l),l.promise})()}cancel(p){this._done=!0;for(const l of this._requests)l.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(J,m,D)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.PDFNodeStream=void 0;var h=D(1),L=D(20);const G=/^file:\/\/\/[a-zA-Z]:\//;m.PDFNodeStream=class Z{constructor(i){this.source=i,this.url=function N(e){const i=__webpack_require__(6671),o=i.parse(e);return"file:"===o.protocol||o.host?o:/^[a-z]:[/\\]/i.test(e)?i.parse(`file:///${e}`):(o.host||(o.protocol="file:"),o)}(i.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&i.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,h.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new p(this):new t(this),this._fullRequestReader}getRangeReader(i,o){if(o<=this._progressiveDataLength)return null;const c=this.isFsUrl?new l(this,i,o):new n(this,i,o);return this._rangeRequestReaders.push(c),c}cancelAllRequests(i){this._fullRequestReader?.cancel(i);for(const o of this._rangeRequestReaders.slice(0))o.cancel(i)}};class V{constructor(i){this._url=i.url,this._done=!1,this._storedError=null,this.onProgress=null;const o=i.source;this._contentLength=o.length,this._loaded=0,this._filename=null,this._disableRange=o.disableRange||!1,this._rangeChunkSize=o.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!o.disableStream,this._isRangeSupported=!o.disableRange,this._readableStream=null,this._readCapability=new h.PromiseCapability,this._headersCapability=new h.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var i=this;return _asyncToGenerator(function*(){if(yield i._readCapability.promise,i._done)return{value:void 0,done:!0};if(i._storedError)throw i._storedError;const o=i._readableStream.read();return null===o?(i._readCapability=new h.PromiseCapability,i.read()):(i._loaded+=o.length,i.onProgress?.({loaded:i._loaded,total:i._contentLength}),{value:new Uint8Array(o).buffer,done:!1})})()}cancel(i){this._readableStream?this._readableStream.destroy(i):this._error(i)}_error(i){this._storedError=i,this._readCapability.resolve()}_setReadableStream(i){this._readableStream=i,i.on("readable",()=>{this._readCapability.resolve()}),i.on("end",()=>{i.destroy(),this._done=!0,this._readCapability.resolve()}),i.on("error",o=>{this._error(o)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new h.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class a{constructor(i){this._url=i.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new h.PromiseCapability,this._isStreamingSupported=!i.source.disableStream}get isStreamingSupported(){return this._isStreamingSupported}read(){var i=this;return _asyncToGenerator(function*(){if(yield i._readCapability.promise,i._done)return{value:void 0,done:!0};if(i._storedError)throw i._storedError;const o=i._readableStream.read();return null===o?(i._readCapability=new h.PromiseCapability,i.read()):(i._loaded+=o.length,i.onProgress?.({loaded:i._loaded}),{value:new Uint8Array(o).buffer,done:!1})})()}cancel(i){this._readableStream?this._readableStream.destroy(i):this._error(i)}_error(i){this._storedError=i,this._readCapability.resolve()}_setReadableStream(i){this._readableStream=i,i.on("readable",()=>{this._readCapability.resolve()}),i.on("end",()=>{i.destroy(),this._done=!0,this._readCapability.resolve()}),i.on("error",o=>{this._error(o)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function r(e,i){return{protocol:e.protocol,auth:e.auth,host:e.hostname,port:e.port,path:e.path,method:"GET",headers:i}}class t extends V{constructor(i){super(i);const o=c=>{if(404===c.statusCode){const v=new h.MissingPDFException(`Missing PDF "${this._url}".`);return this._storedError=v,void this._headersCapability.reject(v)}this._headersCapability.resolve(),this._setReadableStream(c);const w=v=>this._readableStream.headers[v.toLowerCase()],{allowRangeRequests:S,suggestedLength:u}=(0,L.validateRangeRequestCapabilities)({getResponseHeader:w,isHttp:i.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=S,this._contentLength=u||this._contentLength,this._filename=(0,L.extractFilenameFromHeader)(w)};if(this._request=null,"http:"===this._url.protocol){const c=__webpack_require__(7492);this._request=c.request(r(this._url,i.httpHeaders),o)}else{const c=__webpack_require__(1815);this._request=c.request(r(this._url,i.httpHeaders),o)}this._request.on("error",c=>{this._storedError=c,this._headersCapability.reject(c)}),this._request.end()}}class n extends a{constructor(i,o,c){super(i),this._httpHeaders={};for(const S in i.httpHeaders){const u=i.httpHeaders[S];void 0!==u&&(this._httpHeaders[S]=u)}this._httpHeaders.Range=`bytes=${o}-${c-1}`;const w=S=>{if(404!==S.statusCode)this._setReadableStream(S);else{const u=new h.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=u}};if(this._request=null,"http:"===this._url.protocol){const S=__webpack_require__(7492);this._request=S.request(r(this._url,this._httpHeaders),w)}else{const S=__webpack_require__(1815);this._request=S.request(r(this._url,this._httpHeaders),w)}this._request.on("error",S=>{this._storedError=S}),this._request.end()}}class p extends V{constructor(i){super(i);let o=decodeURIComponent(this._url.path);G.test(this._url.href)&&(o=o.replace(/^\//,""));const c=__webpack_require__(3237);c.lstat(o,(w,S)=>{if(w)return"ENOENT"===w.code&&(w=new h.MissingPDFException(`Missing PDF "${o}".`)),this._storedError=w,void this._headersCapability.reject(w);this._contentLength=S.size,this._setReadableStream(c.createReadStream(o)),this._headersCapability.resolve()})}}class l extends a{constructor(i,o,c){super(i);let w=decodeURIComponent(this._url.path);G.test(this._url.href)&&(w=w.replace(/^\//,""));const S=__webpack_require__(3237);this._setReadableStream(S.createReadStream(w,{start:o,end:c-1}))}}},(J,m,D)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.SVGGraphics=void 0;var h=D(6),L=D(1);const V=["butt","round","square"],a=["miter","round","bevel"],r=function(S,u="",v=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!v)return URL.createObjectURL(new Blob([S],{type:u}));const d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let E=`data:${u};base64,`;for(let T=0,U=S.length;T<U;T+=3){const C=255&S[T],$=255&S[T+1],j=255&S[T+2];E+=d[C>>2]+d[(3&C)<<4|$>>4]+d[T+1<U?(15&$)<<2|j>>6:64]+d[T+2<U?63&j:64]}return E},t=function(){const S=new Uint8Array([137,80,78,71,13,10,26,10]),v=new Int32Array(256);for(let j=0;j<256;j++){let q=j;for(let se=0;se<8;se++)q=1&q?3988292384^q>>1&2147483647:q>>1&2147483647;v[j]=q}function E(j,q,se,te){let z=te;const y=q.length;se[z]=y>>24&255,se[z+1]=y>>16&255,se[z+2]=y>>8&255,se[z+3]=255&y,z+=4,se[z]=255&j.charCodeAt(0),se[z+1]=255&j.charCodeAt(1),se[z+2]=255&j.charCodeAt(2),se[z+3]=255&j.charCodeAt(3),z+=4,se.set(q,z),z+=q.length;const s=function d(j,q,se){let te=-1;for(let z=q;z<se;z++)te=te>>>8^v[255&(te^j[z])];return~te}(se,te+4,z);se[z]=s>>24&255,se[z+1]=s>>16&255,se[z+2]=s>>8&255,se[z+3]=255&s}function C(j){let q=j.length;const se=65535,te=Math.ceil(q/se),z=new Uint8Array(2+q+5*te+4);let y=0;z[y++]=120,z[y++]=156;let s=0;for(;q>se;)z[y++]=0,z[y++]=255,z[y++]=255,z[y++]=0,z[y++]=0,z.set(j.subarray(s,s+se),y),y+=se,s+=se,q-=se;z[y++]=1,z[y++]=255&q,z[y++]=q>>8&255,z[y++]=255&~q,z[y++]=(65535&~q)>>8&255,z.set(j.subarray(s),y),y+=j.length-s;const f=function T(j,q,se){let te=1,z=0;for(let y=q;y<se;++y)te=(te+(255&j[y]))%65521,z=(z+te)%65521;return z<<16|te}(j,0,j.length);return z[y++]=f>>24&255,z[y++]=f>>16&255,z[y++]=f>>8&255,z[y++]=255&f,z}return function(q,se,te){return function $(j,q,se,te){const z=j.width,y=j.height;let s,f,_;const b=j.data;switch(q){case L.ImageKind.GRAYSCALE_1BPP:f=0,s=1,_=z+7>>3;break;case L.ImageKind.RGB_24BPP:f=2,s=8,_=3*z;break;case L.ImageKind.RGBA_32BPP:f=6,s=8,_=4*z;break;default:throw new Error("invalid format")}const M=new Uint8Array((1+_)*y);let O=0,I=0;for(let H=0;H<y;++H)M[O++]=0,M.set(b.subarray(I,I+_),O),I+=_,O+=_;if(q===L.ImageKind.GRAYSCALE_1BPP&&te){O=0;for(let H=0;H<y;H++){O++;for(let Y=0;Y<_;Y++)M[O++]^=255}}const g=new Uint8Array([z>>24&255,z>>16&255,z>>8&255,255&z,y>>24&255,y>>16&255,y>>8&255,255&y,s,f,0,0,0]),P=function U(j){if(!L.isNodeJS)return C(j);try{const q=parseInt(process.versions.node)>=8?j:Buffer.from(j),se=__webpack_require__(2787).deflateSync(q,{level:9});return se instanceof Uint8Array?se:new Uint8Array(se)}catch(q){(0,L.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+q)}return C(j)}(M),F=new Uint8Array(S.length+36+g.length+P.length);let B=0;return F.set(S,B),B+=S.length,E("IHDR",g,F,B),B+=12+g.length,E("IDATA",P,F,B),B+=12+P.length,E("IEND",new Uint8Array(0),F,B),r(F,"image/png",se)}(q,void 0===q.kind?L.ImageKind.GRAYSCALE_1BPP:q.kind,se,te)}}();class n{constructor(){this.fontSizeScale=1,this.fontWeight="normal",this.fontSize=0,this.textMatrix=L.IDENTITY_MATRIX,this.fontMatrix=L.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=L.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(u,v){this.x=u,this.y=v}}function l(S){if(Number.isInteger(S))return S.toString();const u=S.toFixed(10);let v=u.length-1;if("0"!==u[v])return u;do{v--}while("0"===u[v]);return u.substring(0,"."===u[v]?v:v+1)}function e(S){if(0===S[4]&&0===S[5]){if(0===S[1]&&0===S[2])return 1===S[0]&&1===S[3]?"":`scale(${l(S[0])} ${l(S[3])})`;if(S[0]===S[3]&&S[1]===-S[2])return`rotate(${l(180*Math.acos(S[0])/Math.PI)})`}else if(1===S[0]&&0===S[1]&&0===S[2]&&1===S[3])return`translate(${l(S[4])} ${l(S[5])})`;return`matrix(${l(S[0])} ${l(S[1])} ${l(S[2])} ${l(S[3])} ${l(S[4])} ${l(S[5])})`}let i=0,o=0,c=0;m.SVGGraphics=class w{constructor(u,v,d=!1){(0,h.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new h.DOMSVGFactory,this.current=new n,this.transformMatrix=L.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=u,this.objs=v,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!d,this._operatorIdMapping=[];for(const E in L.OPS)this._operatorIdMapping[L.OPS[E]]=E}getObject(u,v=null){return"string"==typeof u?u.startsWith("g_")?this.commonObjs.get(u):this.objs.get(u):v}save(){this.transformStack.push(this.transformMatrix);const u=this.current;this.extraStack.push(u),this.current=u.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(u){this.save(),this.executeOpTree(u),this.restore()}loadDependencies(u){const v=u.fnArray,d=u.argsArray;for(let E=0,T=v.length;E<T;E++)if(v[E]===L.OPS.dependency)for(const U of d[E]){const C=U.startsWith("g_")?this.commonObjs:this.objs,$=new Promise(j=>{C.get(U,j)});this.current.dependencies.push($)}return Promise.all(this.current.dependencies)}transform(u,v,d,E,T,U){this.transformMatrix=L.Util.transform(this.transformMatrix,[u,v,d,E,T,U]),this.tgrp=null}getSVG(u,v){this.viewport=v;const d=this._initialize(v);return this.loadDependencies(u).then(()=>(this.transformMatrix=L.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(u)),d))}convertOpList(u){const v=this._operatorIdMapping,d=u.argsArray,E=u.fnArray,T=[];for(let U=0,C=E.length;U<C;U++){const $=E[U];T.push({fnId:$,fn:v[$],args:d[U]})}return function p(S){let u=[];const v=[];for(const d of S)"save"!==d.fn?"restore"===d.fn?u=v.pop():u.push(d):(u.push({fnId:92,fn:"group",items:[]}),v.push(u),u=u.at(-1).items);return u}(T)}executeOpTree(u){for(const v of u){const d=v.fn,T=v.args;switch(0|v.fnId){case L.OPS.beginText:this.beginText();break;case L.OPS.dependency:break;case L.OPS.setLeading:this.setLeading(T);break;case L.OPS.setLeadingMoveText:this.setLeadingMoveText(T[0],T[1]);break;case L.OPS.setFont:this.setFont(T);break;case L.OPS.showText:case L.OPS.showSpacedText:this.showText(T[0]);break;case L.OPS.endText:this.endText();break;case L.OPS.moveText:this.moveText(T[0],T[1]);break;case L.OPS.setCharSpacing:this.setCharSpacing(T[0]);break;case L.OPS.setWordSpacing:this.setWordSpacing(T[0]);break;case L.OPS.setHScale:this.setHScale(T[0]);break;case L.OPS.setTextMatrix:this.setTextMatrix(T[0],T[1],T[2],T[3],T[4],T[5]);break;case L.OPS.setTextRise:this.setTextRise(T[0]);break;case L.OPS.setTextRenderingMode:this.setTextRenderingMode(T[0]);break;case L.OPS.setLineWidth:this.setLineWidth(T[0]);break;case L.OPS.setLineJoin:this.setLineJoin(T[0]);break;case L.OPS.setLineCap:this.setLineCap(T[0]);break;case L.OPS.setMiterLimit:this.setMiterLimit(T[0]);break;case L.OPS.setFillRGBColor:this.setFillRGBColor(T[0],T[1],T[2]);break;case L.OPS.setStrokeRGBColor:this.setStrokeRGBColor(T[0],T[1],T[2]);break;case L.OPS.setStrokeColorN:this.setStrokeColorN(T);break;case L.OPS.setFillColorN:this.setFillColorN(T);break;case L.OPS.shadingFill:this.shadingFill(T[0]);break;case L.OPS.setDash:this.setDash(T[0],T[1]);break;case L.OPS.setRenderingIntent:this.setRenderingIntent(T[0]);break;case L.OPS.setFlatness:this.setFlatness(T[0]);break;case L.OPS.setGState:this.setGState(T[0]);break;case L.OPS.fill:this.fill();break;case L.OPS.eoFill:this.eoFill();break;case L.OPS.stroke:this.stroke();break;case L.OPS.fillStroke:this.fillStroke();break;case L.OPS.eoFillStroke:this.eoFillStroke();break;case L.OPS.clip:this.clip("nonzero");break;case L.OPS.eoClip:this.clip("evenodd");break;case L.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case L.OPS.paintImageXObject:this.paintImageXObject(T[0]);break;case L.OPS.paintInlineImageXObject:this.paintInlineImageXObject(T[0]);break;case L.OPS.paintImageMaskXObject:this.paintImageMaskXObject(T[0]);break;case L.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(T[0],T[1]);break;case L.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case L.OPS.closePath:this.closePath();break;case L.OPS.closeStroke:this.closeStroke();break;case L.OPS.closeFillStroke:this.closeFillStroke();break;case L.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case L.OPS.nextLine:this.nextLine();break;case L.OPS.transform:this.transform(T[0],T[1],T[2],T[3],T[4],T[5]);break;case L.OPS.constructPath:this.constructPath(T[0],T[1]);break;case L.OPS.endPath:this.endPath();break;case 92:this.group(v.items);break;default:(0,L.warn)(`Unimplemented operator ${d}`)}}}setWordSpacing(u){this.current.wordSpacing=u}setCharSpacing(u){this.current.charSpacing=u}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(u,v,d,E,T,U){const C=this.current;C.textMatrix=C.lineMatrix=[u,v,d,E,T,U],C.textMatrixScale=Math.hypot(u,v),C.x=C.lineX=0,C.y=C.lineY=0,C.xcoords=[],C.ycoords=[],C.tspan=this.svgFactory.createElement("svg:tspan"),C.tspan.setAttributeNS(null,"font-family",C.fontFamily),C.tspan.setAttributeNS(null,"font-size",`${l(C.fontSize)}px`),C.tspan.setAttributeNS(null,"y",l(-C.y)),C.txtElement=this.svgFactory.createElement("svg:text"),C.txtElement.append(C.tspan)}beginText(){const u=this.current;u.x=u.lineX=0,u.y=u.lineY=0,u.textMatrix=L.IDENTITY_MATRIX,u.lineMatrix=L.IDENTITY_MATRIX,u.textMatrixScale=1,u.tspan=this.svgFactory.createElement("svg:tspan"),u.txtElement=this.svgFactory.createElement("svg:text"),u.txtgrp=this.svgFactory.createElement("svg:g"),u.xcoords=[],u.ycoords=[]}moveText(u,v){const d=this.current;d.x=d.lineX+=u,d.y=d.lineY+=v,d.xcoords=[],d.ycoords=[],d.tspan=this.svgFactory.createElement("svg:tspan"),d.tspan.setAttributeNS(null,"font-family",d.fontFamily),d.tspan.setAttributeNS(null,"font-size",`${l(d.fontSize)}px`),d.tspan.setAttributeNS(null,"y",l(-d.y))}showText(u){const v=this.current,d=v.font,E=v.fontSize;if(0===E)return;const T=v.fontSizeScale,U=v.charSpacing,C=v.wordSpacing,$=v.fontDirection,j=v.textHScale*$,q=d.vertical,se=q?1:-1,te=d.defaultVMetrics,z=E*v.fontMatrix[0];let y=0;for(const _ of u){if(null===_){y+=$*C;continue}if("number"==typeof _){y+=se*_*E/1e3;continue}const b=(_.isSpace?C:0)+U,M=_.fontChar;let O,I,g=_.width;if(q){let k;const F=_.vmetric||te;k=_.vmetric?F[1]:.5*g,k=-k*z,g=F?-F[0]:g,O=k/T,I=(y+F[2]*z)/T}else O=y/T,I=0;(_.isInFont||d.missingFile)&&(v.xcoords.push(v.x+O),q&&v.ycoords.push(-v.y+I),v.tspan.textContent+=M),y+=q?g*z-b*$:g*z+b*$}v.tspan.setAttributeNS(null,"x",v.xcoords.map(l).join(" ")),v.tspan.setAttributeNS(null,"y",q?v.ycoords.map(l).join(" "):l(-v.y)),q?v.y-=y:v.x+=y*j,v.tspan.setAttributeNS(null,"font-family",v.fontFamily),v.tspan.setAttributeNS(null,"font-size",`${l(v.fontSize)}px`),"normal"!==v.fontStyle&&v.tspan.setAttributeNS(null,"font-style",v.fontStyle),"normal"!==v.fontWeight&&v.tspan.setAttributeNS(null,"font-weight",v.fontWeight);const s=v.textRenderingMode&L.TextRenderingMode.FILL_STROKE_MASK;s===L.TextRenderingMode.FILL||s===L.TextRenderingMode.FILL_STROKE?("#000000"!==v.fillColor&&v.tspan.setAttributeNS(null,"fill",v.fillColor),v.fillAlpha<1&&v.tspan.setAttributeNS(null,"fill-opacity",v.fillAlpha)):v.tspan.setAttributeNS(null,"fill",v.textRenderingMode===L.TextRenderingMode.ADD_TO_PATH?"transparent":"none"),(s===L.TextRenderingMode.STROKE||s===L.TextRenderingMode.FILL_STROKE)&&this._setStrokeAttributes(v.tspan,1/(v.textMatrixScale||1));let f=v.textMatrix;0!==v.textRise&&(f=f.slice(),f[5]+=v.textRise),v.txtElement.setAttributeNS(null,"transform",`${e(f)} scale(${l(j)}, -1)`),v.txtElement.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),v.txtElement.append(v.tspan),v.txtgrp.append(v.txtElement),this._ensureTransformGroup().append(v.txtElement)}setLeadingMoveText(u,v){this.setLeading(-v),this.moveText(u,v)}addFontStyle(u){if(!u.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const v=r(u.data,u.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${u.loadedName}"; src: url(${v}); }\n`}setFont(u){const v=this.current,d=this.commonObjs.get(u[0]);let E=u[1];v.font=d,this.embedFonts&&!d.missingFile&&!this.embeddedFonts[d.loadedName]&&(this.addFontStyle(d),this.embeddedFonts[d.loadedName]=d),v.fontMatrix=d.fontMatrix||L.FONT_IDENTITY_MATRIX;let T="normal";d.black?T="900":d.bold&&(T="bold");const U=d.italic?"italic":"normal";E<0?(E=-E,v.fontDirection=-1):v.fontDirection=1,v.fontSize=E,v.fontFamily=d.loadedName,v.fontWeight=T,v.fontStyle=U,v.tspan=this.svgFactory.createElement("svg:tspan"),v.tspan.setAttributeNS(null,"y",l(-v.y)),v.xcoords=[],v.ycoords=[]}endText(){const u=this.current;u.textRenderingMode&L.TextRenderingMode.ADD_TO_PATH_FLAG&&u.txtElement?.hasChildNodes()&&(u.element=u.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(u){u>0&&(this.current.lineWidth=u)}setLineCap(u){this.current.lineCap=V[u]}setLineJoin(u){this.current.lineJoin=a[u]}setMiterLimit(u){this.current.miterLimit=u}setStrokeAlpha(u){this.current.strokeAlpha=u}setStrokeRGBColor(u,v,d){this.current.strokeColor=L.Util.makeHexColor(u,v,d)}setFillAlpha(u){this.current.fillAlpha=u}setFillRGBColor(u,v,d){this.current.fillColor=L.Util.makeHexColor(u,v,d),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(u){this.current.strokeColor=this._makeColorN_Pattern(u)}setFillColorN(u){this.current.fillColor=this._makeColorN_Pattern(u)}shadingFill(u){const{width:v,height:d}=this.viewport,E=L.Util.inverseTransform(this.transformMatrix),[T,U,C,$]=L.Util.getAxialAlignedBoundingBox([0,0,v,d],E),j=this.svgFactory.createElement("svg:rect");j.setAttributeNS(null,"x",T),j.setAttributeNS(null,"y",U),j.setAttributeNS(null,"width",C-T),j.setAttributeNS(null,"height",$-U),j.setAttributeNS(null,"fill",this._makeShadingPattern(u)),this.current.fillAlpha<1&&j.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(j)}_makeColorN_Pattern(u){return"TilingPattern"===u[0]?this._makeTilingPattern(u):this._makeShadingPattern(u)}_makeTilingPattern(u){const v=u[1],d=u[2],E=u[3]||L.IDENTITY_MATRIX,[T,U,C,$]=u[4],j=u[5],q=u[6],se=u[7],te="shading"+c++,[z,y,s,f]=L.Util.normalizeRect([...L.Util.applyTransform([T,U],E),...L.Util.applyTransform([C,$],E)]),[_,b]=L.Util.singularValueDecompose2dScale(E),M=j*_,O=q*b,I=this.svgFactory.createElement("svg:pattern");I.setAttributeNS(null,"id",te),I.setAttributeNS(null,"patternUnits","userSpaceOnUse"),I.setAttributeNS(null,"width",M),I.setAttributeNS(null,"height",O),I.setAttributeNS(null,"x",`${z}`),I.setAttributeNS(null,"y",`${y}`);const g=this.svg,P=this.transformMatrix,k=this.current.fillColor,F=this.current.strokeColor,B=this.svgFactory.create(s-z,f-y);if(this.svg=B,this.transformMatrix=E,2===se){const H=L.Util.makeHexColor(...v);this.current.fillColor=H,this.current.strokeColor=H}return this.executeOpTree(this.convertOpList(d)),this.svg=g,this.transformMatrix=P,this.current.fillColor=k,this.current.strokeColor=F,I.append(B.childNodes[0]),this.defs.append(I),`url(#${te})`}_makeShadingPattern(u){switch("string"==typeof u&&(u=this.objs.get(u)),u[0]){case"RadialAxial":const v="shading"+c++,d=u[3];let E;switch(u[1]){case"axial":const T=u[4],U=u[5];E=this.svgFactory.createElement("svg:linearGradient"),E.setAttributeNS(null,"id",v),E.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),E.setAttributeNS(null,"x1",T[0]),E.setAttributeNS(null,"y1",T[1]),E.setAttributeNS(null,"x2",U[0]),E.setAttributeNS(null,"y2",U[1]);break;case"radial":const C=u[4],$=u[5],j=u[6],q=u[7];E=this.svgFactory.createElement("svg:radialGradient"),E.setAttributeNS(null,"id",v),E.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),E.setAttributeNS(null,"cx",$[0]),E.setAttributeNS(null,"cy",$[1]),E.setAttributeNS(null,"r",q),E.setAttributeNS(null,"fx",C[0]),E.setAttributeNS(null,"fy",C[1]),E.setAttributeNS(null,"fr",j);break;default:throw new Error(`Unknown RadialAxial type: ${u[1]}`)}for(const T of d){const U=this.svgFactory.createElement("svg:stop");U.setAttributeNS(null,"offset",T[0]),U.setAttributeNS(null,"stop-color",T[1]),E.append(U)}return this.defs.append(E),`url(#${v})`;case"Mesh":return(0,L.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${u[0]}`)}}setDash(u,v){this.current.dashArray=u,this.current.dashPhase=v}constructPath(u,v){const d=this.current;let E=d.x,T=d.y,U=[],C=0;for(const $ of u)switch(0|$){case L.OPS.rectangle:E=v[C++],T=v[C++];const se=E+v[C++],te=T+v[C++];U.push("M",l(E),l(T),"L",l(se),l(T),"L",l(se),l(te),"L",l(E),l(te),"Z");break;case L.OPS.moveTo:E=v[C++],T=v[C++],U.push("M",l(E),l(T));break;case L.OPS.lineTo:E=v[C++],T=v[C++],U.push("L",l(E),l(T));break;case L.OPS.curveTo:E=v[C+4],T=v[C+5],U.push("C",l(v[C]),l(v[C+1]),l(v[C+2]),l(v[C+3]),l(E),l(T)),C+=6;break;case L.OPS.curveTo2:U.push("C",l(E),l(T),l(v[C]),l(v[C+1]),l(v[C+2]),l(v[C+3])),E=v[C+2],T=v[C+3],C+=4;break;case L.OPS.curveTo3:E=v[C+2],T=v[C+3],U.push("C",l(v[C]),l(v[C+1]),l(E),l(T),l(E),l(T)),C+=4;break;case L.OPS.closePath:U.push("Z")}U=U.join(" "),d.path&&u.length>0&&u[0]!==L.OPS.rectangle&&u[0]!==L.OPS.moveTo?U=d.path.getAttributeNS(null,"d")+U:(d.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(d.path)),d.path.setAttributeNS(null,"d",U),d.path.setAttributeNS(null,"fill","none"),d.element=d.path,d.setCurrentPoint(E,T)}endPath(){const u=this.current;if(u.path=null,!this.pendingClip)return;if(!u.element)return void(this.pendingClip=null);const v="clippath"+i++,d=this.svgFactory.createElement("svg:clipPath");d.setAttributeNS(null,"id",v),d.setAttributeNS(null,"transform",e(this.transformMatrix));const E=u.element.cloneNode(!0);if(E.setAttributeNS(null,"clip-rule","evenodd"===this.pendingClip?"evenodd":"nonzero"),this.pendingClip=null,d.append(E),this.defs.append(d),u.activeClipUrl){u.clipGroup=null;for(const T of this.extraStack)T.clipGroup=null;d.setAttributeNS(null,"clip-path",u.activeClipUrl)}u.activeClipUrl=`url(#${v})`,this.tgrp=null}clip(u){this.pendingClip=u}closePath(){const u=this.current;if(u.path){const v=`${u.path.getAttributeNS(null,"d")}Z`;u.path.setAttributeNS(null,"d",v)}}setLeading(u){this.current.leading=-u}setTextRise(u){this.current.textRise=u}setTextRenderingMode(u){this.current.textRenderingMode=u}setHScale(u){this.current.textHScale=u/100}setRenderingIntent(u){}setFlatness(u){}setGState(u){for(const[v,d]of u)switch(v){case"LW":this.setLineWidth(d);break;case"LC":this.setLineCap(d);break;case"LJ":this.setLineJoin(d);break;case"ML":this.setMiterLimit(d);break;case"D":this.setDash(d[0],d[1]);break;case"RI":this.setRenderingIntent(d);break;case"FL":this.setFlatness(d);break;case"Font":this.setFont(d);break;case"CA":this.setStrokeAlpha(d);break;case"ca":this.setFillAlpha(d);break;default:(0,L.warn)(`Unimplemented graphic state operator ${v}`)}}fill(){const u=this.current;u.element&&(u.element.setAttributeNS(null,"fill",u.fillColor),u.element.setAttributeNS(null,"fill-opacity",u.fillAlpha),this.endPath())}stroke(){const u=this.current;u.element&&(this._setStrokeAttributes(u.element),u.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(u,v=1){const d=this.current;let E=d.dashArray;1!==v&&E.length>0&&(E=E.map(function(T){return v*T})),u.setAttributeNS(null,"stroke",d.strokeColor),u.setAttributeNS(null,"stroke-opacity",d.strokeAlpha),u.setAttributeNS(null,"stroke-miterlimit",l(d.miterLimit)),u.setAttributeNS(null,"stroke-linecap",d.lineCap),u.setAttributeNS(null,"stroke-linejoin",d.lineJoin),u.setAttributeNS(null,"stroke-width",l(v*d.lineWidth)+"px"),u.setAttributeNS(null,"stroke-dasharray",E.map(l).join(" ")),u.setAttributeNS(null,"stroke-dashoffset",l(v*d.dashPhase)+"px")}eoFill(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const u=this.svgFactory.createElement("svg:rect");u.setAttributeNS(null,"x","0"),u.setAttributeNS(null,"y","0"),u.setAttributeNS(null,"width","1px"),u.setAttributeNS(null,"height","1px"),u.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(u)}paintImageXObject(u){const v=this.getObject(u);v?this.paintInlineImageXObject(v):(0,L.warn)(`Dependent image with object ID ${u} is not ready yet`)}paintInlineImageXObject(u,v){const d=u.width,E=u.height,T=t(u,this.forceDataSchema,!!v),U=this.svgFactory.createElement("svg:rect");U.setAttributeNS(null,"x","0"),U.setAttributeNS(null,"y","0"),U.setAttributeNS(null,"width",l(d)),U.setAttributeNS(null,"height",l(E)),this.current.element=U,this.clip("nonzero");const C=this.svgFactory.createElement("svg:image");C.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",T),C.setAttributeNS(null,"x","0"),C.setAttributeNS(null,"y",l(-E)),C.setAttributeNS(null,"width",l(d)+"px"),C.setAttributeNS(null,"height",l(E)+"px"),C.setAttributeNS(null,"transform",`scale(${l(1/d)} ${l(-1/E)})`),v?v.append(C):this._ensureTransformGroup().append(C)}paintImageMaskXObject(u){const v=this.getObject(u.data,u);if(v.bitmap)return void(0,L.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");const d=this.current,E=v.width,T=v.height,U=d.fillColor;d.maskId="mask"+o++;const C=this.svgFactory.createElement("svg:mask");C.setAttributeNS(null,"id",d.maskId);const $=this.svgFactory.createElement("svg:rect");$.setAttributeNS(null,"x","0"),$.setAttributeNS(null,"y","0"),$.setAttributeNS(null,"width",l(E)),$.setAttributeNS(null,"height",l(T)),$.setAttributeNS(null,"fill",U),$.setAttributeNS(null,"mask",`url(#${d.maskId})`),this.defs.append(C),this._ensureTransformGroup().append($),this.paintInlineImageXObject(v,C)}paintFormXObjectBegin(u,v){if(Array.isArray(u)&&6===u.length&&this.transform(u[0],u[1],u[2],u[3],u[4],u[5]),v){const d=v[2]-v[0],E=v[3]-v[1],T=this.svgFactory.createElement("svg:rect");T.setAttributeNS(null,"x",v[0]),T.setAttributeNS(null,"y",v[1]),T.setAttributeNS(null,"width",l(d)),T.setAttributeNS(null,"height",l(E)),this.current.element=T,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(u){const v=this.svgFactory.create(u.width,u.height),d=this.svgFactory.createElement("svg:defs");v.append(d),this.defs=d;const E=this.svgFactory.createElement("svg:g");return E.setAttributeNS(null,"transform",e(u.transform)),v.append(E),this.svg=E,v}_ensureClipGroup(){if(!this.current.clipGroup){const u=this.svgFactory.createElement("svg:g");u.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(u),this.current.clipGroup=u}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",e(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}},(J,m)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.XfaText=void 0;class D{static textContent(L){const G=[],N={items:G,styles:Object.create(null)};return function Z(V){if(!V)return;let a=null;const r=V.name;if("#text"===r)a=V.value;else{if(!D.shouldBuildText(r))return;V?.attributes?.textContent?a=V.attributes.textContent:V.value&&(a=V.value)}if(null!==a&&G.push({str:a}),V.children)for(const t of V.children)Z(t)}(L),N}static shouldBuildText(L){return!("textarea"===L||"input"===L||"option"===L||"select"===L)}}m.XfaText=D},(J,m,D)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.TextLayerRenderTask=void 0,m.renderTextLayer=function e(o){!o.textContentSource&&(o.textContent||o.textContentStream)&&((0,L.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),o.textContentSource=o.textContent||o.textContentStream);const{container:c,viewport:w}=o,S=getComputedStyle(c),u=S.getPropertyValue("visibility"),v=parseFloat(S.getPropertyValue("--scale-factor"));"visible"===u&&(!v||Math.abs(v-w.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const d=new l(o);return d._render(),d},m.updateTextLayer=function i({container:o,viewport:c,textDivs:w,textDivProperties:S,isOffscreenCanvasSupported:u,mustRotate:v=!0,mustRescale:d=!0}){if(v&&(0,L.setLayerDimensions)(o,{rotation:c.rotation}),d){const E=a(0,u),U={prevFontSize:null,prevFontFamily:null,div:null,scale:c.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:E};for(const C of w)U.properties=S.get(C),U.div=C,n(U)}};var h=D(1),L=D(6);const N=30,V=new Map;function a(o,c){let w;if(c&&h.FeatureTest.isOffscreenCanvasSupported)w=new OffscreenCanvas(o,o).getContext("2d",{alpha:!1});else{const S=document.createElement("canvas");S.width=S.height=o,w=S.getContext("2d",{alpha:!1})}return w}function t(o,c,w){const S=document.createElement("span"),u={angle:0,canvasWidth:0,hasText:""!==c.str,hasEOL:c.hasEOL,fontSize:0};o._textDivs.push(S);const v=h.Util.transform(o._transform,c.transform);let d=Math.atan2(v[1],v[0]);const E=w[c.fontName];E.vertical&&(d+=Math.PI/2);const T=Math.hypot(v[2],v[3]),U=T*function r(o,c){const w=V.get(o);if(w)return w;const S=a(N,c);S.font=`30px ${o}`;const u=S.measureText("");let v=u.fontBoundingBoxAscent,d=Math.abs(u.fontBoundingBoxDescent);if(v){const T=v/(v+d);return V.set(o,T),S.canvas.width=S.canvas.height=0,T}S.strokeStyle="red",S.clearRect(0,0,N,N),S.strokeText("g",0,0);let E=S.getImageData(0,0,N,N).data;d=0;for(let T=E.length-1-3;T>=0;T-=4)if(E[T]>0){d=Math.ceil(T/4/N);break}S.clearRect(0,0,N,N),S.strokeText("A",0,N),E=S.getImageData(0,0,N,N).data,v=0;for(let T=0,U=E.length;T<U;T+=4)if(E[T]>0){v=N-Math.floor(T/4/N);break}if(S.canvas.width=S.canvas.height=0,v){const T=v/(v+d);return V.set(o,T),T}return V.set(o,.8),.8}(E.fontFamily,o._isOffscreenCanvasSupported);let C,$;0===d?(C=v[4],$=v[5]-U):(C=v[4]+U*Math.sin(d),$=v[5]-U*Math.cos(d));const j="calc(var(--scale-factor)*",q=S.style;o._container===o._rootContainer?(q.left=`${(100*C/o._pageWidth).toFixed(2)}%`,q.top=`${(100*$/o._pageHeight).toFixed(2)}%`):(q.left=`${j}${C.toFixed(2)}px)`,q.top=`${j}${$.toFixed(2)}px)`),q.fontSize=`${j}${T.toFixed(2)}px)`,q.fontFamily=E.fontFamily,u.fontSize=T,S.setAttribute("role","presentation"),S.textContent=c.str,S.dir=c.dir,o._fontInspectorEnabled&&(S.dataset.fontName=c.fontName),0!==d&&(u.angle=d*(180/Math.PI));let se=!1;if(c.str.length>1)se=!0;else if(" "!==c.str&&c.transform[0]!==c.transform[3]){const te=Math.abs(c.transform[0]),z=Math.abs(c.transform[3]);te!==z&&Math.max(te,z)/Math.min(te,z)>1.5&&(se=!0)}se&&(u.canvasWidth=E.vertical?c.height:c.width),o._textDivProperties.set(S,u),o._isReadableStream&&o._layoutText(S)}function n(o){const{div:c,scale:w,properties:S,ctx:u,prevFontSize:v,prevFontFamily:d}=o,{style:E}=c;let T="";if(0!==S.canvasWidth&&S.hasText){const{fontFamily:U}=E,{canvasWidth:C,fontSize:$}=S;(v!==$||d!==U)&&(u.font=`${$*w}px ${U}`,o.prevFontSize=$,o.prevFontFamily=U);const{width:j}=u.measureText(c.textContent);j>0&&(T=`scaleX(${C*w/j})`)}0!==S.angle&&(T=`rotate(${S.angle}deg) ${T}`),T.length>0&&(E.transform=T)}class l{constructor({textContentSource:c,container:w,viewport:S,textDivs:u,textDivProperties:v,textContentItemsStr:d,isOffscreenCanvasSupported:E}){this._textContentSource=c,this._isReadableStream=c instanceof ReadableStream,this._container=this._rootContainer=w,this._textDivs=u||[],this._textContentItemsStr=d||[],this._isOffscreenCanvasSupported=E,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._textDivProperties=v||new WeakMap,this._canceled=!1,this._capability=new h.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:S.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:a(0,E)};const{pageWidth:T,pageHeight:U,pageX:C,pageY:$}=S.rawDims;this._transform=[1,0,0,-1,-C,$+U],this._pageWidth=T,this._pageHeight=U,(0,L.setLayerDimensions)(w,S),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new h.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new h.AbortException("TextLayer task cancelled."))}_processItems(c,w){for(const S of c)if(void 0!==S.str)this._textContentItemsStr.push(S.str),t(this,S,w);else if("beginMarkedContentProps"===S.type||"beginMarkedContent"===S.type){const u=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),null!==S.id&&this._container.setAttribute("id",`${S.id}`),u.append(this._container)}else"endMarkedContent"===S.type&&(this._container=this._container.parentNode)}_layoutText(c){const w=this._layoutTextParams.properties=this._textDivProperties.get(c);if(this._layoutTextParams.div=c,n(this._layoutTextParams),w.hasText&&this._container.append(c),w.hasEOL){const S=document.createElement("br");S.setAttribute("role","presentation"),this._container.append(S)}}_render(){const c=new h.PromiseCapability;let w=Object.create(null);if(this._isReadableStream){const S=()=>{this._reader.read().then(({value:u,done:v})=>{v?c.resolve():(Object.assign(w,u.styles),this._processItems(u.items,w),S())},c.reject)};this._reader=this._textContentSource.getReader(),S()}else{if(!this._textContentSource)throw new Error('No "textContentSource" parameter specified.');{const{items:S,styles:u}=this._textContentSource;this._processItems(S,u),c.resolve()}}c.promise.then(()=>{w=null,function p(o){if(o._canceled)return;const c=o._textDivs,w=o._capability;if(c.length>1e5)w.resolve();else{if(!o._isReadableStream)for(const u of c)o._layoutText(u);w.resolve()}}(this)},this._capability.reject)}}m.TextLayerRenderTask=l},(J,m,D)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.AnnotationEditorLayer=void 0;var h=D(1),L=D(4),G=D(28),N=D(33),Z=D(6),V=D(34);m.AnnotationEditorLayer=(()=>{class r{#e;#t=!1;#n=null;#i=this.pointerup.bind(this);#o=this.pointerdown.bind(this);#r=new Map;#a=!1;#l=!1;#c=!1;#s;static _initialized=!1;constructor({uiManager:n,pageIndex:p,div:l,accessibilityManager:e,annotationLayer:i,viewport:o,l10n:c}){const w=[G.FreeTextEditor,N.InkEditor,V.StampEditor];if(!r._initialized){r._initialized=!0;for(const S of w)S.initialize(c)}n.registerEditorTypes(w),this.#s=n,this.pageIndex=p,this.div=l,this.#e=e,this.#n=i,this.viewport=o,this.#s.addLayer(this)}get isEmpty(){return 0===this.#r.size}updateToolbar(n){this.#s.updateToolbar(n)}updateMode(n=this.#s.getMode()){this.#p(),n===h.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),n!==h.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",n===h.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",n===h.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",n===h.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(n){if(n||this.#s.getMode()===h.AnnotationEditorType.INK){if(!n)for(const l of this.#r.values())if(l.isEmpty())return void l.setInBackground();this.#d({offsetX:0,offsetY:0},!1).setInBackground()}}setEditingState(n){this.#s.setEditingState(n)}addCommands(n){this.#s.addCommands(n)}enable(){this.div.style.pointerEvents="auto";const n=new Set;for(const l of this.#r.values())l.enableEditing(),l.annotationElementId&&n.add(l.annotationElementId);if(!this.#n)return;const p=this.#n.getEditableAnnotations();for(const l of p){if(l.hide(),this.#s.isDeletedAnnotationElement(l.data.id)||n.has(l.data.id))continue;const e=this.deserialize(l);e&&(this.addOrRebuild(e),e.enableEditing())}}disable(){this.#c=!0,this.div.style.pointerEvents="none";const n=new Set;for(const p of this.#r.values())p.disableEditing(),p.annotationElementId&&null===p.serialize()?(this.getEditableAnnotation(p.annotationElementId)?.show(),p.remove()):n.add(p.annotationElementId);if(this.#n){const p=this.#n.getEditableAnnotations();for(const l of p){const{id:e}=l.data;n.has(e)||this.#s.isDeletedAnnotationElement(e)||l.show()}}this.#p(),this.isEmpty&&(this.div.hidden=!0),this.#c=!1}getEditableAnnotation(n){return this.#n?.getEditableAnnotation(n)||null}setActiveEditor(n){this.#s.getActive()!==n&&this.#s.setActiveEditor(n)}enableClick(){this.div.addEventListener("pointerdown",this.#o),this.div.addEventListener("pointerup",this.#i)}disableClick(){this.div.removeEventListener("pointerdown",this.#o),this.div.removeEventListener("pointerup",this.#i)}attach(n){this.#r.set(n.id,n);const{annotationElementId:p}=n;p&&this.#s.isDeletedAnnotationElement(p)&&this.#s.removeDeletedAnnotationElement(n)}detach(n){this.#r.delete(n.id),this.#e?.removePointerInTextLayer(n.contentDiv),!this.#c&&n.annotationElementId&&this.#s.addDeletedAnnotationElement(n)}remove(n){this.detach(n),this.#s.removeEditor(n),n.div.contains(document.activeElement)&&setTimeout(()=>{this.#s.focusMainContainer()},0),n.div.remove(),n.isAttachedToDOM=!1,this.#l||this.addInkEditorIfNeeded(!1)}changeParent(n){n.parent!==this&&(n.annotationElementId&&(this.#s.addDeletedAnnotationElement(n.annotationElementId),L.AnnotationEditor.deleteAnnotationElement(n),n.annotationElementId=null),this.attach(n),n.parent?.detach(n),n.setParent(this),n.div&&n.isAttachedToDOM&&(n.div.remove(),this.div.append(n.div)))}add(n){if(this.changeParent(n),this.#s.addEditor(n),this.attach(n),!n.isAttachedToDOM){const p=n.render();this.div.append(p),n.isAttachedToDOM=!0}n.fixAndSetPosition(),n.onceAdded(),this.#s.addToAnnotationStorage(n)}moveEditorInDOM(n){if(!n.isAttachedToDOM)return;const{activeElement:p}=document;n.div.contains(p)&&(n._focusEventsAllowed=!1,setTimeout(()=>{n.div.contains(document.activeElement)?n._focusEventsAllowed=!0:(n.div.addEventListener("focusin",()=>{n._focusEventsAllowed=!0},{once:!0}),p.focus())},0)),n._structTreeParentId=this.#e?.moveElementInDOM(this.div,n.div,n.contentDiv,!0)}addOrRebuild(n){n.needsToBeRebuilt()?n.rebuild():this.add(n)}addUndoableEditor(n){this.addCommands({cmd:()=>n._uiManager.rebuild(n),undo:()=>{n.remove()},mustExec:!1})}getNextId(){return this.#s.getId()}#h(n){switch(this.#s.getMode()){case h.AnnotationEditorType.FREETEXT:return new G.FreeTextEditor(n);case h.AnnotationEditorType.INK:return new N.InkEditor(n);case h.AnnotationEditorType.STAMP:return new V.StampEditor(n)}return null}pasteEditor(n,p){this.#s.updateToolbar(n),this.#s.updateMode(n);const{offsetX:l,offsetY:e}=this.#f(),i=this.getNextId(),o=this.#h({parent:this,id:i,x:l,y:e,uiManager:this.#s,isCentered:!0,...p});o&&this.add(o)}deserialize(n){switch(n.annotationType??n.annotationEditorType){case h.AnnotationEditorType.FREETEXT:return G.FreeTextEditor.deserialize(n,this,this.#s);case h.AnnotationEditorType.INK:return N.InkEditor.deserialize(n,this,this.#s);case h.AnnotationEditorType.STAMP:return V.StampEditor.deserialize(n,this,this.#s)}return null}#d(n,p){const l=this.getNextId(),e=this.#h({parent:this,id:l,x:n.offsetX,y:n.offsetY,uiManager:this.#s,isCentered:p});return e&&this.add(e),e}#f(){const{x:n,y:p,width:l,height:e}=this.div.getBoundingClientRect(),i=Math.max(0,n),o=Math.max(0,p),S=(i+Math.min(window.innerWidth,n+l))/2-n,u=(o+Math.min(window.innerHeight,p+e))/2-p,[v,d]=this.viewport.rotation%180==0?[S,u]:[u,S];return{offsetX:v,offsetY:d}}addNewEditor(){this.#d(this.#f(),!0)}setSelected(n){this.#s.setSelected(n)}toggleSelected(n){this.#s.toggleSelected(n)}isSelected(n){return this.#s.isSelected(n)}unselect(n){this.#s.unselect(n)}pointerup(n){const{isMac:p}=h.FeatureTest.platform;if(!(0!==n.button||n.ctrlKey&&p)&&n.target===this.div&&this.#a){if(this.#a=!1,!this.#t)return void(this.#t=!0);if(this.#s.getMode()===h.AnnotationEditorType.STAMP)return void this.#s.unselectAll();this.#d(n,!1)}}pointerdown(n){if(this.#a)return void(this.#a=!1);const{isMac:p}=h.FeatureTest.platform;if(0!==n.button||n.ctrlKey&&p||n.target!==this.div)return;this.#a=!0;const l=this.#s.getActive();this.#t=!l||l.isEmpty()}findNewParent(n,p,l){const e=this.#s.findParent(p,l);return null!==e&&e!==this&&(e.changeParent(n),!0)}destroy(){this.#s.getActive()?.parent===this&&(this.#s.commitOrRemove(),this.#s.setActiveEditor(null));for(const n of this.#r.values())this.#e?.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,this.#r.clear(),this.#s.removeLayer(this)}#p(){this.#l=!0;for(const n of this.#r.values())n.isEmpty()&&n.remove();this.#l=!1}render({viewport:n}){this.viewport=n,(0,Z.setLayerDimensions)(this.div,n);for(const p of this.#s.getEditors(this.pageIndex))this.add(p);this.updateMode()}update({viewport:n}){this.#s.commitOrRemove(),this.viewport=n,(0,Z.setLayerDimensions)(this.div,{rotation:n.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:n,pageHeight:p}=this.viewport.rawDims;return[n,p]}}return r})()},(J,m,D)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.FreeTextEditor=void 0;var h=D(1),L=D(5),G=D(4),N=D(29);m.FreeTextEditor=(()=>{class V extends G.AnnotationEditor{#e=this.editorDivBlur.bind(this);#t=this.editorDivFocus.bind(this);#n=this.editorDivInput.bind(this);#i=this.editorDivKeydown.bind(this);#o;#r="";#a=`${this.id}-editor`;#l;#c=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const r=V.prototype,t=l=>l.isEmpty(),n=L.AnnotationEditorUIManager.TRANSLATE_SMALL,p=L.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,h.shadow)(this,"_keyboardManager",new L.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],r.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],r.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],r._translateEmpty,{args:[-n,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],r._translateEmpty,{args:[-p,0],checker:t}],[["ArrowRight","mac+ArrowRight"],r._translateEmpty,{args:[n,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],r._translateEmpty,{args:[p,0],checker:t}],[["ArrowUp","mac+ArrowUp"],r._translateEmpty,{args:[0,-n],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],r._translateEmpty,{args:[0,-p],checker:t}],[["ArrowDown","mac+ArrowDown"],r._translateEmpty,{args:[0,n],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],r._translateEmpty,{args:[0,p],checker:t}]]))}static _type="freetext";constructor(r){super({...r,name:"freeTextEditor"}),this.#o=r.color||V._defaultColor||G.AnnotationEditor._defaultLineColor,this.#l=r.fontSize||V._defaultFontSize}static initialize(r){G.AnnotationEditor.initialize(r,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const t=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(t.getPropertyValue("--freetext-padding"))}static updateDefaultParams(r,t){switch(r){case h.AnnotationEditorParamsType.FREETEXT_SIZE:V._defaultFontSize=t;break;case h.AnnotationEditorParamsType.FREETEXT_COLOR:V._defaultColor=t}}updateParams(r,t){switch(r){case h.AnnotationEditorParamsType.FREETEXT_SIZE:this.#s(t);break;case h.AnnotationEditorParamsType.FREETEXT_COLOR:this.#h(t)}}static get defaultPropertiesToUpdate(){return[[h.AnnotationEditorParamsType.FREETEXT_SIZE,V._defaultFontSize],[h.AnnotationEditorParamsType.FREETEXT_COLOR,V._defaultColor||G.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[h.AnnotationEditorParamsType.FREETEXT_SIZE,this.#l],[h.AnnotationEditorParamsType.FREETEXT_COLOR,this.#o]]}#s(r){const t=p=>{this.editorDiv.style.fontSize=`calc(${p}px * var(--scale-factor))`,this.translate(0,-(p-this.#l)*this.parentScale),this.#l=p,this.#f()},n=this.#l;this.addCommands({cmd:()=>{t(r)},undo:()=>{t(n)},mustExec:!0,type:h.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#h(r){const t=this.#o;this.addCommands({cmd:()=>{this.#o=this.editorDiv.style.color=r},undo:()=>{this.#o=this.editorDiv.style.color=t},mustExec:!0,type:h.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(r,t){this._uiManager.translateSelectedEditors(r,t,!0)}getInitialTranslation(){const r=this.parentScale;return[-V._internalPadding*r,-(V._internalPadding+this.#l)*r]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(h.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",this.#i),this.editorDiv.addEventListener("focus",this.#t),this.editorDiv.addEventListener("blur",this.#e),this.editorDiv.addEventListener("input",this.#n))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#a),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",this.#i),this.editorDiv.removeEventListener("focus",this.#t),this.editorDiv.removeEventListener("blur",this.#e),this.editorDiv.removeEventListener("input",this.#n),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(r){this._focusEventsAllowed&&(super.focusin(r),r.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){this.width?this.#m():(this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}#d(){const r=this.editorDiv.getElementsByTagName("div");if(0===r.length)return this.editorDiv.innerText;const t=[];for(const n of r)t.push(n.innerText.replace(/\r\n?|\n/,""));return t.join("\n")}#f(){const[r,t]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:p,div:l}=this,e=l.style.display;l.style.display="hidden",p.div.append(this.div),n=l.getBoundingClientRect(),l.remove(),l.style.display=e}this.rotation%180==this.parentRotation%180?(this.width=n.width/r,this.height=n.height/t):(this.width=n.height/r,this.height=n.width/t),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const r=this.#r,t=this.#r=this.#d().trimEnd();if(r===t)return;const n=p=>{this.#r=p,p?(this.#p(),this._uiManager.rebuild(this),this.#f()):this.remove()};this.addCommands({cmd:()=>{n(t)},undo:()=>{n(r)},mustExec:!1}),this.#f()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(r){this.enterInEditMode()}keydown(r){r.target===this.div&&"Enter"===r.key&&(this.enterInEditMode(),r.preventDefault())}editorDivKeydown(r){V._keyboardManager.exec(this,r)}editorDivFocus(r){this.isEditing=!0}editorDivBlur(r){this.isEditing=!1}editorDivInput(r){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let r,t;this.width&&(r=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#a),this.enableEditing(),G.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(p=>this.editorDiv?.setAttribute("aria-label",p)),G.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(p=>this.editorDiv?.setAttribute("default-content",p)),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize=`calc(${this.#l}px * var(--scale-factor))`,n.color=this.#o,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,L.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[p,l]=this.parentDimensions;if(this.annotationElementId){const{position:e}=this.#c;let[i,o]=this.getInitialTranslation();[i,o]=this.pageTranslationToScreen(i,o);const[c,w]=this.pageDimensions,[S,u]=this.pageTranslation;let v,d;switch(this.rotation){case 0:v=r+(e[0]-S)/c,d=t+this.height-(e[1]-u)/w;break;case 90:v=r+(e[0]-S)/c,d=t-(e[1]-u)/w,[i,o]=[o,-i];break;case 180:v=r-this.width+(e[0]-S)/c,d=t-(e[1]-u)/w,[i,o]=[-i,-o];break;case 270:v=r+(e[0]-S-this.height*w)/c,d=t+(e[1]-u-this.width*c)/w,[i,o]=[-o,i]}this.setAt(v*p,d*l,i,o)}else this.setAt(r*p,t*l,this.width*p,this.height*l);this.#p(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}#p(){if(this.editorDiv.replaceChildren(),this.#r)for(const r of this.#r.split("\n")){const t=document.createElement("div");t.append(r?document.createTextNode(r):document.createElement("br")),this.editorDiv.append(t)}}get contentDiv(){return this.editorDiv}static deserialize(r,t,n){let p=null;if(r instanceof N.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:e,fontColor:i},rect:o,rotation:c,id:w},textContent:S,textPosition:u,parent:{page:{pageNumber:v}}}=r;if(!S||0===S.length)return null;p=r={annotationType:h.AnnotationEditorType.FREETEXT,color:Array.from(i),fontSize:e,value:S.join("\n"),position:u,pageIndex:v-1,rect:o,rotation:c,id:w,deleted:!1}}const l=super.deserialize(r,t,n);return l.#l=r.fontSize,l.#o=h.Util.makeHexColor(...r.color),l.#r=r.value,l.annotationElementId=r.id||null,l.#c=p,l}serialize(r=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const t=V._internalPadding*this.parentScale,n=this.getRect(t,t),p=G.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#o),l={annotationType:h.AnnotationEditorType.FREETEXT,color:p,fontSize:this.#l,value:this.#r,pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return r?l:this.annotationElementId&&!this.#g(l)?null:(l.id=this.annotationElementId,l)}#g(r){const{value:t,fontSize:n,color:p,rect:l,pageIndex:e}=this.#c;return r.value!==t||r.fontSize!==n||r.rect.some((i,o)=>Math.abs(i-l[o])>=1)||r.color.some((i,o)=>i!==p[o])||r.pageIndex!==e}#m(r=!1){if(!this.annotationElementId)return;if(this.#f(),!r&&(0===this.width||0===this.height))return void setTimeout(()=>this.#m(!0),0);const t=V._internalPadding*this.parentScale;this.#c.rect=this.getRect(t,t)}}return V})()},(J,m,D)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.StampAnnotationElement=m.InkAnnotationElement=m.FreeTextAnnotationElement=m.AnnotationLayer=void 0;var h=D(1),L=D(6),G=D(3),N=D(30),Z=D(31),V=D(32);const a=1e3,t=new WeakSet;function n(I){return{width:I[2]-I[0],height:I[3]-I[1]}}class p{static create(g){switch(g.data.annotationType){case h.AnnotationType.LINK:return new e(g);case h.AnnotationType.TEXT:return new i(g);case h.AnnotationType.WIDGET:switch(g.data.fieldType){case"Tx":return new c(g);case"Btn":return g.data.radioButton?new u(g):g.data.checkBox?new S(g):new v(g);case"Ch":return new d(g);case"Sig":return new w(g)}return new o(g);case h.AnnotationType.POPUP:return new E(g);case h.AnnotationType.FREETEXT:return new U(g);case h.AnnotationType.LINE:return new C(g);case h.AnnotationType.SQUARE:return new $(g);case h.AnnotationType.CIRCLE:return new j(g);case h.AnnotationType.POLYLINE:return new q(g);case h.AnnotationType.CARET:return new te(g);case h.AnnotationType.INK:return new z(g);case h.AnnotationType.POLYGON:return new se(g);case h.AnnotationType.HIGHLIGHT:return new y(g);case h.AnnotationType.UNDERLINE:return new s(g);case h.AnnotationType.SQUIGGLY:return new f(g);case h.AnnotationType.STRIKEOUT:return new _(g);case h.AnnotationType.STAMP:return new b(g);case h.AnnotationType.FILEATTACHMENT:return new M(g);default:return new l(g)}}}class l{#e=!1;constructor(g,{isRenderable:P=!1,ignoreBorder:k=!1,createQuadrilaterals:F=!1}={}){this.isRenderable=P,this.data=g.data,this.layer=g.layer,this.linkService=g.linkService,this.downloadManager=g.downloadManager,this.imageResourcesPath=g.imageResourcesPath,this.renderForms=g.renderForms,this.svgFactory=g.svgFactory,this.annotationStorage=g.annotationStorage,this.enableScripting=g.enableScripting,this.hasJSActions=g.hasJSActions,this._fieldObjects=g.fieldObjects,this.parent=g.parent,P&&(this.container=this._createContainer(k)),F&&this._createQuadrilaterals()}static _hasPopupData({titleObj:g,contentsObj:P,richText:k}){return!!(g?.str||P?.str||k?.str)}get hasPopupData(){return l._hasPopupData(this.data)}_createContainer(g){const{data:P,parent:{page:k,viewport:F}}=this,B=document.createElement("section");B.setAttribute("data-annotation-id",P.id),this instanceof o||(B.tabIndex=a),B.style.zIndex=this.parent.zIndex++,this.data.popupRef&&B.setAttribute("aria-haspopup","dialog"),P.noRotate&&B.classList.add("norotate");const{pageWidth:H,pageHeight:Y,pageX:ee,pageY:fe}=F.rawDims;if(!P.rect||this instanceof E){const{rotation:ne}=P;return!P.hasOwnCanvas&&0!==ne&&this.setRotation(ne,B),B}const{width:re,height:ce}=n(P.rect),de=h.Util.normalizeRect([P.rect[0],k.view[3]-P.rect[1]+k.view[1],P.rect[2],k.view[3]-P.rect[3]+k.view[1]]);if(!g&&P.borderStyle.width>0){B.style.borderWidth=`${P.borderStyle.width}px`;const ne=P.borderStyle.horizontalCornerRadius,he=P.borderStyle.verticalCornerRadius;switch(ne>0||he>0?B.style.borderRadius=`calc(${ne}px * var(--scale-factor)) / calc(${he}px * var(--scale-factor))`:this instanceof u&&(B.style.borderRadius=`calc(${re}px * var(--scale-factor)) / calc(${ce}px * var(--scale-factor))`),P.borderStyle.style){case h.AnnotationBorderStyleType.SOLID:B.style.borderStyle="solid";break;case h.AnnotationBorderStyleType.DASHED:B.style.borderStyle="dashed";break;case h.AnnotationBorderStyleType.BEVELED:(0,h.warn)("Unimplemented border style: beveled");break;case h.AnnotationBorderStyleType.INSET:(0,h.warn)("Unimplemented border style: inset");break;case h.AnnotationBorderStyleType.UNDERLINE:B.style.borderBottomStyle="solid"}const le=P.borderColor||null;le?(this.#e=!0,B.style.borderColor=h.Util.makeHexColor(0|le[0],0|le[1],0|le[2])):B.style.borderWidth=0}B.style.left=100*(de[0]-ee)/H+"%",B.style.top=100*(de[1]-fe)/Y+"%";const{rotation:X}=P;return P.hasOwnCanvas||0===X?(B.style.width=100*re/H+"%",B.style.height=100*ce/Y+"%"):this.setRotation(X,B),B}setRotation(g,P=this.container){if(!this.data.rect)return;const{pageWidth:k,pageHeight:F}=this.parent.viewport.rawDims,{width:B,height:H}=n(this.data.rect);let Y,ee;g%180==0?(Y=100*B/k,ee=100*H/F):(Y=100*H/k,ee=100*B/F),P.style.width=`${Y}%`,P.style.height=`${ee}%`,P.setAttribute("data-main-rotation",(360-g)%360)}get _commonActions(){const g=(P,k,F)=>{const B=F.detail[P],H=B[0],Y=B.slice(1);F.target.style[k]=N.ColorConverters[`${H}_HTML`](Y),this.annotationStorage.setValue(this.data.id,{[k]:N.ColorConverters[`${H}_rgb`](Y)})};return(0,h.shadow)(this,"_commonActions",{display:P=>{const{display:k}=P.detail,F=k%2==1;this.container.style.visibility=F?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:F,noPrint:1===k||2===k})},print:P=>{this.annotationStorage.setValue(this.data.id,{noPrint:!P.detail.print})},hidden:P=>{const{hidden:k}=P.detail;this.container.style.visibility=k?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:k,noView:k})},focus:P=>{setTimeout(()=>P.target.focus({preventScroll:!1}),0)},userName:P=>{P.target.title=P.detail.userName},readonly:P=>{P.target.disabled=P.detail.readonly},required:P=>{this._setRequired(P.target,P.detail.required)},bgColor:P=>{g("bgColor","backgroundColor",P)},fillColor:P=>{g("fillColor","backgroundColor",P)},fgColor:P=>{g("fgColor","color",P)},textColor:P=>{g("textColor","color",P)},borderColor:P=>{g("borderColor","borderColor",P)},strokeColor:P=>{g("strokeColor","borderColor",P)},rotation:P=>{const k=P.detail.rotation;this.setRotation(k),this.annotationStorage.setValue(this.data.id,{rotation:k})}})}_dispatchEventFromSandbox(g,P){const k=this._commonActions;for(const F of Object.keys(P.detail))(g[F]||k[F])?.(P)}_setDefaultPropertiesFromJS(g){if(!this.enableScripting)return;const P=this.annotationStorage.getRawValue(this.data.id);if(!P)return;const k=this._commonActions;for(const[F,B]of Object.entries(P)){const H=k[F];H&&(H({detail:{[F]:B},target:g}),delete P[F])}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:g}=this.data;if(!g)return;const[P,k,F,B]=this.data.rect;if(1===g.length){const[,{x:he,y:le},{x:pe,y:me}]=g[0];if(F===he&&B===le&&P===pe&&k===me)return}const{style:H}=this.container;let Y;if(this.#e){const{borderColor:he,borderWidth:le}=H;H.borderWidth=0,Y=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${he}" stroke-width="${le}">`],this.container.classList.add("hasBorder")}const ee=F-P,fe=B-k,{svgFactory:re}=this,ce=re.createElement("svg");ce.classList.add("quadrilateralsContainer"),ce.setAttribute("width",0),ce.setAttribute("height",0);const de=re.createElement("defs");ce.append(de);const X=re.createElement("clipPath"),ne=`clippath_${this.data.id}`;X.setAttribute("id",ne),X.setAttribute("clipPathUnits","objectBoundingBox"),de.append(X);for(const[,{x:he,y:le},{x:pe,y:me}]of g){const ve=re.createElement("rect"),ye=(pe-P)/ee,xe=(B-le)/fe,Ce=(he-pe)/ee,Be=(le-me)/fe;ve.setAttribute("x",ye),ve.setAttribute("y",xe),ve.setAttribute("width",Ce),ve.setAttribute("height",Be),X.append(ve),Y?.push(`<rect vector-effect="non-scaling-stroke" x="${ye}" y="${xe}" width="${Ce}" height="${Be}"/>`)}this.#e&&(Y.push("</g></svg>')"),H.backgroundImage=Y.join("")),this.container.append(ce),this.container.style.clipPath=`url(#${ne})`}_createPopup(){const{container:g,data:P}=this;g.setAttribute("aria-haspopup","dialog");const k=new E({data:{color:P.color,titleObj:P.titleObj,modificationDate:P.modificationDate,contentsObj:P.contentsObj,richText:P.richText,parentRect:P.rect,borderStyle:0,id:`popup_${P.id}`,rotation:P.rotation},parent:this.parent,elements:[this]});this.parent.div.append(k.render())}render(){(0,h.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(g,P=null){const k=[];if(this._fieldObjects){const F=this._fieldObjects[g];if(F)for(const{page:B,id:H,exportValues:Y}of F){if(-1===B||H===P)continue;const ee="string"==typeof Y?Y:null,fe=document.querySelector(`[data-element-id="${H}"]`);!fe||t.has(fe)?k.push({id:H,exportValue:ee,domElement:fe}):(0,h.warn)(`_getElementsByName - element not allowed: ${H}`)}return k}for(const F of document.getElementsByName(g)){const{exportValue:B}=F,H=F.getAttribute("data-element-id");H!==P&&t.has(F)&&k.push({id:H,exportValue:B,domElement:F})}return k}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const g=this.getElementsToTriggerPopup();if(Array.isArray(g))for(const P of g)P.classList.add("highlightArea");else g.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:g,data:{id:P}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:g,editId:P})})}}class e extends l{constructor(g,P=null){super(g,{isRenderable:!0,ignoreBorder:!!P?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=g.data.isTooltipOnly}render(){const{data:g,linkService:P}=this,k=document.createElement("a");k.setAttribute("data-element-id",g.id);let F=!1;return g.url?(P.addLinkAttributes(k,g.url,g.newWindow),F=!0):g.action?(this._bindNamedAction(k,g.action),F=!0):g.attachment?(this._bindAttachment(k,g.attachment),F=!0):g.setOCGState?(this.#t(k,g.setOCGState),F=!0):g.dest?(this._bindLink(k,g.dest),F=!0):(g.actions&&(g.actions.Action||g.actions["Mouse Up"]||g.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(k,g),F=!0),g.resetForm?(this._bindResetFormAction(k,g.resetForm),F=!0):this.isTooltipOnly&&!F&&(this._bindLink(k,""),F=!0)),this.container.classList.add("linkAnnotation"),F&&this.container.append(k),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(g,P){g.href=this.linkService.getDestinationHash(P),g.onclick=()=>(P&&this.linkService.goToDestination(P),!1),(P||""===P)&&this.#e()}_bindNamedAction(g,P){g.href=this.linkService.getAnchorUrl(""),g.onclick=()=>(this.linkService.executeNamedAction(P),!1),this.#e()}_bindAttachment(g,P){g.href=this.linkService.getAnchorUrl(""),g.onclick=()=>(this.downloadManager?.openOrDownloadData(this.container,P.content,P.filename),!1),this.#e()}#t(g,P){g.href=this.linkService.getAnchorUrl(""),g.onclick=()=>(this.linkService.executeSetOCGState(P),!1),this.#e()}_bindJSAction(g,P){g.href=this.linkService.getAnchorUrl("");const k=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const F of Object.keys(P.actions)){const B=k.get(F);B&&(g[B]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:P.id,name:F}}),!1))}g.onclick||(g.onclick=()=>!1),this.#e()}_bindResetFormAction(g,P){const k=g.onclick;if(k||(g.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects)return(0,h.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(k||(g.onclick=()=>!1));g.onclick=()=>{k?.();const{fields:F,refs:B,include:H}=P,Y=[];if(0!==F.length||0!==B.length){const re=new Set(B);for(const ce of F){const de=this._fieldObjects[ce]||[];for(const{id:X}of de)re.add(X)}for(const ce of Object.values(this._fieldObjects))for(const de of ce)re.has(de.id)===H&&Y.push(de)}else for(const re of Object.values(this._fieldObjects))Y.push(...re);const ee=this.annotationStorage,fe=[];for(const re of Y){const{id:ce}=re;switch(fe.push(ce),re.type){case"text":case"combobox":case"listbox":ee.setValue(ce,{value:re.defaultValue||""});break;case"checkbox":case"radiobutton":ee.setValue(ce,{value:re.defaultValue===re.exportValues});break;default:continue}const de=document.querySelector(`[data-element-id="${ce}"]`);de&&(t.has(de)?de.dispatchEvent(new Event("resetform")):(0,h.warn)(`_bindResetFormAction - element not allowed: ${ce}`))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:fe,name:"ResetForm"}}),!1}}}class i extends l{constructor(g){super(g,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const g=document.createElement("img");return g.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",g.alt="[{{type}} Annotation]",g.dataset.l10nId="text_annotation_type",g.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(g),this.container}}class o extends l{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(g){this.data.hasOwnCanvas&&("CANVAS"===g.previousSibling?.nodeName&&(g.previousSibling.hidden=!0),g.hidden=!1)}_getKeyModifier(g){const{isWin:P,isMac:k}=h.FeatureTest.platform;return P&&g.ctrlKey||k&&g.metaKey}_setEventListener(g,P,k,F,B){k.includes("mouse")?g.addEventListener(k,H=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:F,value:B(H),shift:H.shiftKey,modifier:this._getKeyModifier(H)}})}):g.addEventListener(k,H=>{if("blur"===k){if(!P.focused||!H.relatedTarget)return;P.focused=!1}else if("focus"===k){if(P.focused)return;P.focused=!0}B&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:F,value:B(H)}})})}_setEventListeners(g,P,k,F){for(const[B,H]of k)("Action"===H||this.data.actions?.[H])&&(("Focus"===H||"Blur"===H)&&(P||={focused:!1}),this._setEventListener(g,P,B,H,F),"Focus"!==H||this.data.actions?.Blur?"Blur"===H&&!this.data.actions?.Focus&&this._setEventListener(g,P,"focus","Focus",null):this._setEventListener(g,P,"blur","Blur",null))}_setBackgroundColor(g){const P=this.data.backgroundColor||null;g.style.backgroundColor=null===P?"transparent":h.Util.makeHexColor(P[0],P[1],P[2])}_setTextStyle(g){const{fontColor:k}=this.data.defaultAppearanceData,F=this.data.defaultAppearanceData.fontSize||9,B=g.style;let H;const ee=fe=>Math.round(10*fe)/10;if(this.data.multiLine){const fe=Math.abs(this.data.rect[3]-this.data.rect[1]-2),re=Math.round(fe/(h.LINE_FACTOR*F))||1;H=Math.min(F,ee(fe/re/h.LINE_FACTOR))}else{const fe=Math.abs(this.data.rect[3]-this.data.rect[1]-2);H=Math.min(F,ee(fe/h.LINE_FACTOR))}B.fontSize=`calc(${H}px * var(--scale-factor))`,B.color=h.Util.makeHexColor(k[0],k[1],k[2]),null!==this.data.textAlignment&&(B.textAlign=["left","center","right"][this.data.textAlignment])}_setRequired(g,P){P?g.setAttribute("required",!0):g.removeAttribute("required"),g.setAttribute("aria-required",P)}}class c extends o{constructor(g){super(g,{isRenderable:g.renderForms||!g.data.hasAppearance&&!!g.data.fieldValue})}setPropertyOnSiblings(g,P,k,F){const B=this.annotationStorage;for(const H of this._getElementsByName(g.name,g.id))H.domElement&&(H.domElement[P]=k),B.setValue(H.id,{[F]:k})}render(){const g=this.annotationStorage,P=this.data.id;this.container.classList.add("textWidgetAnnotation");let k=null;if(this.renderForms){const F=g.getValue(P,{value:this.data.fieldValue});let B=F.value||"";const H=g.getValue(P,{charLimit:this.data.maxLen}).charLimit;H&&B.length>H&&(B=B.slice(0,H));let Y=F.formattedValue||this.data.textContent?.join("\n")||null;Y&&this.data.comb&&(Y=Y.replaceAll(/\s+/g,""));const ee={userValue:B,formattedValue:Y,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(k=document.createElement("textarea"),k.textContent=Y??B,this.data.doNotScroll&&(k.style.overflowY="hidden")):(k=document.createElement("input"),k.type="text",k.setAttribute("value",Y??B),this.data.doNotScroll&&(k.style.overflowX="hidden")),this.data.hasOwnCanvas&&(k.hidden=!0),t.add(k),k.setAttribute("data-element-id",P),k.disabled=this.data.readOnly,k.name=this.data.fieldName,k.tabIndex=a,this._setRequired(k,this.data.required),H&&(k.maxLength=H),k.addEventListener("input",re=>{g.setValue(P,{value:re.target.value}),this.setPropertyOnSiblings(k,"value",re.target.value,"value"),ee.formattedValue=null}),k.addEventListener("resetform",re=>{k.value=ee.userValue=this.data.defaultFieldValue??"",ee.formattedValue=null});let fe=re=>{const{formattedValue:ce}=ee;null!=ce&&(re.target.value=ce),re.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){k.addEventListener("focus",ce=>{if(ee.focused)return;const{target:de}=ce;ee.userValue&&(de.value=ee.userValue),ee.lastCommittedValue=de.value,ee.commitKey=1,ee.focused=!0}),k.addEventListener("updatefromsandbox",ce=>{this.showElementAndHideCanvas(ce.target),this._dispatchEventFromSandbox({value(X){ee.userValue=X.detail.value??"",g.setValue(P,{value:ee.userValue.toString()}),X.target.value=ee.userValue},formattedValue(X){const{formattedValue:ne}=X.detail;ee.formattedValue=ne,null!=ne&&X.target!==document.activeElement&&(X.target.value=ne),g.setValue(P,{formattedValue:ne})},selRange(X){X.target.setSelectionRange(...X.detail.selRange)},charLimit:X=>{const{charLimit:ne}=X.detail,{target:he}=X;if(0===ne)return void he.removeAttribute("maxLength");he.setAttribute("maxLength",ne);let le=ee.userValue;!le||le.length<=ne||(le=le.slice(0,ne),he.value=ee.userValue=le,g.setValue(P,{value:le}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:P,name:"Keystroke",value:le,willCommit:!0,commitKey:1,selStart:he.selectionStart,selEnd:he.selectionEnd}}))}},ce)}),k.addEventListener("keydown",ce=>{ee.commitKey=1;let de=-1;if("Escape"===ce.key?de=0:"Enter"!==ce.key||this.data.multiLine?"Tab"===ce.key&&(ee.commitKey=3):de=2,-1===de)return;const{value:X}=ce.target;ee.lastCommittedValue!==X&&(ee.lastCommittedValue=X,ee.userValue=X,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:P,name:"Keystroke",value:X,willCommit:!0,commitKey:de,selStart:ce.target.selectionStart,selEnd:ce.target.selectionEnd}}))});const re=fe;fe=null,k.addEventListener("blur",ce=>{if(!ee.focused||!ce.relatedTarget)return;ee.focused=!1;const{value:de}=ce.target;ee.userValue=de,ee.lastCommittedValue!==de&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:P,name:"Keystroke",value:de,willCommit:!0,commitKey:ee.commitKey,selStart:ce.target.selectionStart,selEnd:ce.target.selectionEnd}}),re(ce)}),this.data.actions?.Keystroke&&k.addEventListener("beforeinput",ce=>{ee.lastCommittedValue=null;const{data:de,target:X}=ce,{value:ne,selectionStart:he,selectionEnd:le}=X;let pe=he,me=le;switch(ce.inputType){case"deleteWordBackward":{const ve=ne.substring(0,he).match(/\w*[^\w]*$/);ve&&(pe-=ve[0].length);break}case"deleteWordForward":{const ve=ne.substring(he).match(/^[^\w]*\w*/);ve&&(me+=ve[0].length);break}case"deleteContentBackward":he===le&&(pe-=1);break;case"deleteContentForward":he===le&&(me+=1)}ce.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:P,name:"Keystroke",value:ne,change:de||"",willCommit:!1,selStart:pe,selEnd:me}})}),this._setEventListeners(k,ee,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ce=>ce.target.value)}if(fe&&k.addEventListener("blur",fe),this.data.comb){const ce=(this.data.rect[2]-this.data.rect[0])/H;k.classList.add("comb"),k.style.letterSpacing=`calc(${ce}px * var(--scale-factor) - 1ch)`}}else k=document.createElement("div"),k.textContent=this.data.fieldValue,k.style.verticalAlign="middle",k.style.display="table-cell";return this._setTextStyle(k),this._setBackgroundColor(k),this._setDefaultPropertiesFromJS(k),this.container.append(k),this.container}}class w extends o{constructor(g){super(g,{isRenderable:!!g.data.hasOwnCanvas})}}class S extends o{constructor(g){super(g,{isRenderable:g.renderForms})}render(){const g=this.annotationStorage,P=this.data,k=P.id;let F=g.getValue(k,{value:P.exportValue===P.fieldValue}).value;"string"==typeof F&&(F="Off"!==F,g.setValue(k,{value:F})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const B=document.createElement("input");return t.add(B),B.setAttribute("data-element-id",k),B.disabled=P.readOnly,this._setRequired(B,this.data.required),B.type="checkbox",B.name=P.fieldName,F&&B.setAttribute("checked",!0),B.setAttribute("exportValue",P.exportValue),B.tabIndex=a,B.addEventListener("change",H=>{const{name:Y,checked:ee}=H.target;for(const fe of this._getElementsByName(Y,k)){const re=ee&&fe.exportValue===P.exportValue;fe.domElement&&(fe.domElement.checked=re),g.setValue(fe.id,{value:re})}g.setValue(k,{value:ee})}),B.addEventListener("resetform",H=>{H.target.checked=(P.defaultFieldValue||"Off")===P.exportValue}),this.enableScripting&&this.hasJSActions&&(B.addEventListener("updatefromsandbox",H=>{this._dispatchEventFromSandbox({value(ee){ee.target.checked="Off"!==ee.detail.value,g.setValue(k,{value:ee.target.checked})}},H)}),this._setEventListeners(B,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],H=>H.target.checked)),this._setBackgroundColor(B),this._setDefaultPropertiesFromJS(B),this.container.append(B),this.container}}class u extends o{constructor(g){super(g,{isRenderable:g.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const g=this.annotationStorage,P=this.data,k=P.id;let F=g.getValue(k,{value:P.fieldValue===P.buttonValue}).value;"string"==typeof F&&(F=F!==P.buttonValue,g.setValue(k,{value:F}));const B=document.createElement("input");if(t.add(B),B.setAttribute("data-element-id",k),B.disabled=P.readOnly,this._setRequired(B,this.data.required),B.type="radio",B.name=P.fieldName,F&&B.setAttribute("checked",!0),B.tabIndex=a,B.addEventListener("change",H=>{const{name:Y,checked:ee}=H.target;for(const fe of this._getElementsByName(Y,k))g.setValue(fe.id,{value:!1});g.setValue(k,{value:ee})}),B.addEventListener("resetform",H=>{const Y=P.defaultFieldValue;H.target.checked=null!=Y&&Y===P.buttonValue}),this.enableScripting&&this.hasJSActions){const H=P.buttonValue;B.addEventListener("updatefromsandbox",Y=>{this._dispatchEventFromSandbox({value:fe=>{const re=H===fe.detail.value;for(const ce of this._getElementsByName(fe.target.name)){const de=re&&ce.id===k;ce.domElement&&(ce.domElement.checked=de),g.setValue(ce.id,{value:de})}}},Y)}),this._setEventListeners(B,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Y=>Y.target.checked)}return this._setBackgroundColor(B),this._setDefaultPropertiesFromJS(B),this.container.append(B),this.container}}class v extends e{constructor(g){super(g,{ignoreBorder:g.data.hasAppearance})}render(){const g=super.render();g.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(g.title=this.data.alternativeText);const P=g.lastChild;return this.enableScripting&&this.hasJSActions&&P&&(this._setDefaultPropertiesFromJS(P),P.addEventListener("updatefromsandbox",k=>{this._dispatchEventFromSandbox({},k)})),g}}class d extends o{constructor(g){super(g,{isRenderable:g.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const g=this.annotationStorage,P=this.data.id,k=g.getValue(P,{value:this.data.fieldValue}),F=document.createElement("select");t.add(F),F.setAttribute("data-element-id",P),F.disabled=this.data.readOnly,this._setRequired(F,this.data.required),F.name=this.data.fieldName,F.tabIndex=a;let B=this.data.combo&&this.data.options.length>0;this.data.combo||(F.size=this.data.options.length,this.data.multiSelect&&(F.multiple=!0)),F.addEventListener("resetform",re=>{const ce=this.data.defaultFieldValue;for(const de of F.options)de.selected=de.value===ce});for(const re of this.data.options){const ce=document.createElement("option");ce.textContent=re.displayValue,ce.value=re.exportValue,k.value.includes(re.exportValue)&&(ce.setAttribute("selected",!0),B=!1),F.append(ce)}let H=null;if(B){const re=document.createElement("option");re.value=" ",re.setAttribute("hidden",!0),re.setAttribute("selected",!0),F.prepend(re),H=()=>{re.remove(),F.removeEventListener("input",H),H=null},F.addEventListener("input",H)}const Y=re=>{const ce=re?"value":"textContent",{options:de,multiple:X}=F;return X?Array.prototype.filter.call(de,ne=>ne.selected).map(ne=>ne[ce]):-1===de.selectedIndex?null:de[de.selectedIndex][ce]};let ee=Y(!1);const fe=re=>Array.prototype.map.call(re.target.options,de=>({displayValue:de.textContent,exportValue:de.value}));return this.enableScripting&&this.hasJSActions?(F.addEventListener("updatefromsandbox",re=>{this._dispatchEventFromSandbox({value(de){H?.();const X=de.detail.value,ne=new Set(Array.isArray(X)?X:[X]);for(const he of F.options)he.selected=ne.has(he.value);g.setValue(P,{value:Y(!0)}),ee=Y(!1)},multipleSelection(de){F.multiple=!0},remove(de){const X=F.options,ne=de.detail.remove;X[ne].selected=!1,F.remove(ne),X.length>0&&-1===Array.prototype.findIndex.call(X,le=>le.selected)&&(X[0].selected=!0),g.setValue(P,{value:Y(!0),items:fe(de)}),ee=Y(!1)},clear(de){for(;0!==F.length;)F.remove(0);g.setValue(P,{value:null,items:[]}),ee=Y(!1)},insert(de){const{index:X,displayValue:ne,exportValue:he}=de.detail.insert,le=F.children[X],pe=document.createElement("option");pe.textContent=ne,pe.value=he,le?le.before(pe):F.append(pe),g.setValue(P,{value:Y(!0),items:fe(de)}),ee=Y(!1)},items(de){const{items:X}=de.detail;for(;0!==F.length;)F.remove(0);for(const ne of X){const{displayValue:he,exportValue:le}=ne,pe=document.createElement("option");pe.textContent=he,pe.value=le,F.append(pe)}F.options.length>0&&(F.options[0].selected=!0),g.setValue(P,{value:Y(!0),items:fe(de)}),ee=Y(!1)},indices(de){const X=new Set(de.detail.indices);for(const ne of de.target.options)ne.selected=X.has(ne.index);g.setValue(P,{value:Y(!0)}),ee=Y(!1)},editable(de){de.target.disabled=!de.detail.editable}},re)}),F.addEventListener("input",re=>{const ce=Y(!0);g.setValue(P,{value:ce}),re.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:P,name:"Keystroke",value:ee,changeEx:ce,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(F,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],re=>re.target.value)):F.addEventListener("input",function(re){g.setValue(P,{value:Y(!0)})}),this.data.combo&&this._setTextStyle(F),this._setBackgroundColor(F),this._setDefaultPropertiesFromJS(F),this.container.append(F),this.container}}class E extends l{constructor(g){const{data:P,elements:k}=g;super(g,{isRenderable:l._hasPopupData(P)}),this.elements=k}render(){this.container.classList.add("popupAnnotation");const g=new T({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),P=[];for(const k of this.elements)k.popup=g,P.push(k.data.id),k.addHighlightArea();return this.container.setAttribute("aria-controls",P.map(k=>`${h.AnnotationPrefix}${k}`).join(",")),this.container}}class T{#e=null;#t=this.#u.bind(this);#n=this.#A.bind(this);#i=this.#w.bind(this);#o=this.#b.bind(this);#r=null;#a=null;#l=null;#c=null;#s=null;#h=null;#d=!1;#f=null;#p=null;#g=null;#m=null;#_=!1;constructor({container:g,color:P,elements:k,titleObj:F,modificationDate:B,contentsObj:H,richText:Y,parent:ee,rect:fe,parentRect:re,open:ce}){this.#a=g,this.#m=F,this.#l=H,this.#g=Y,this.#s=ee,this.#r=P,this.#p=fe,this.#h=re,this.#c=k;const de=L.PDFDateString.toDateObject(B);de&&(this.#e=ee.l10n.get("annotation_date_string",{date:de.toLocaleDateString(),time:de.toLocaleTimeString()})),this.trigger=k.flatMap(X=>X.getElementsToTriggerPopup());for(const X of this.trigger)X.addEventListener("click",this.#o),X.addEventListener("mouseenter",this.#i),X.addEventListener("mouseleave",this.#n),X.classList.add("popupTriggerArea");for(const X of k)X.container?.addEventListener("keydown",this.#t);this.#a.hidden=!0,ce&&this.#b()}render(){if(this.#f)return;const{page:{view:g},viewport:{rawDims:{pageWidth:P,pageHeight:k,pageX:F,pageY:B}}}=this.#s,H=this.#f=document.createElement("div");if(H.className="popup",this.#r){const ve=H.style.outlineColor=h.Util.makeHexColor(...this.#r);H.style.backgroundColor=CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?`color-mix(in srgb, ${ve} 30%, white)`:h.Util.makeHexColor(...this.#r.map(xe=>Math.floor(.7*(255-xe)+xe)))}const Y=document.createElement("span");Y.className="header";const ee=document.createElement("h1");if(Y.append(ee),({dir:ee.dir,str:ee.textContent}=this.#m),H.append(Y),this.#e){const ve=document.createElement("span");ve.classList.add("popupDate"),this.#e.then(ye=>{ve.textContent=ye}),Y.append(ve)}const fe=this.#l,re=this.#g;if(!re?.str||fe?.str&&fe.str!==re.str){const ve=this._formatContents(fe);H.append(ve)}else V.XfaLayer.render({xfaHtml:re.html,intent:"richText",div:H}),H.lastChild.classList.add("richText","popupContent");let ce=!!this.#h,de=ce?this.#h:this.#p;for(const ve of this.#c)if(!de||null!==h.Util.intersect(ve.data.rect,de)){de=ve.data.rect,ce=!0;break}const X=h.Util.normalizeRect([de[0],g[3]-de[1]+g[1],de[2],g[3]-de[3]+g[1]]),le=X[0]+(ce?de[2]-de[0]+5:0),pe=X[1],{style:me}=this.#a;me.left=100*(le-F)/P+"%",me.top=100*(pe-B)/k+"%",this.#a.append(H)}_formatContents({str:g,dir:P}){const k=document.createElement("p");k.classList.add("popupContent"),k.dir=P;const F=g.split(/(?:\r\n?|\n)/);for(let B=0,H=F.length;B<H;++B)k.append(document.createTextNode(F[B])),B<H-1&&k.append(document.createElement("br"));return k}#u(g){g.altKey||g.shiftKey||g.ctrlKey||g.metaKey||("Enter"===g.key||"Escape"===g.key&&this.#d)&&this.#b()}#b(){this.#d=!this.#d,this.#d?(this.#w(),this.#a.addEventListener("click",this.#o),this.#a.addEventListener("keydown",this.#t)):(this.#A(),this.#a.removeEventListener("click",this.#o),this.#a.removeEventListener("keydown",this.#t))}#w(){this.#f||this.render(),this.isVisible?this.#d&&this.#a.classList.add("focused"):(this.#a.hidden=!1,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)+1e3)}#A(){this.#a.classList.remove("focused"),!this.#d&&this.isVisible&&(this.#a.hidden=!0,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)-1e3)}forceHide(){this.#_=this.isVisible,this.#_&&(this.#a.hidden=!0)}maybeShow(){this.#_&&(this.#_=!1,this.#a.hidden=!1)}get isVisible(){return!1===this.#a.hidden}}class U extends l{constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0}),this.textContent=g.data.textContent,this.textPosition=g.data.textPosition,this.annotationEditorType=h.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const g=document.createElement("div");g.classList.add("annotationTextContent"),g.setAttribute("role","comment");for(const P of this.textContent){const k=document.createElement("span");k.textContent=P,g.append(k)}this.container.append(g)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}m.FreeTextAnnotationElement=U;class C extends l{#e=null;constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const g=this.data,{width:P,height:k}=n(g.rect),F=this.svgFactory.create(P,k,!0),B=this.#e=this.svgFactory.createElement("svg:line");return B.setAttribute("x1",g.rect[2]-g.lineCoordinates[0]),B.setAttribute("y1",g.rect[3]-g.lineCoordinates[1]),B.setAttribute("x2",g.rect[2]-g.lineCoordinates[2]),B.setAttribute("y2",g.rect[3]-g.lineCoordinates[3]),B.setAttribute("stroke-width",g.borderStyle.width||1),B.setAttribute("stroke","transparent"),B.setAttribute("fill","transparent"),F.append(B),this.container.append(F),!g.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class $ extends l{#e=null;constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const g=this.data,{width:P,height:k}=n(g.rect),F=this.svgFactory.create(P,k,!0),B=g.borderStyle.width,H=this.#e=this.svgFactory.createElement("svg:rect");return H.setAttribute("x",B/2),H.setAttribute("y",B/2),H.setAttribute("width",P-B),H.setAttribute("height",k-B),H.setAttribute("stroke-width",B||1),H.setAttribute("stroke","transparent"),H.setAttribute("fill","transparent"),F.append(H),this.container.append(F),!g.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class j extends l{#e=null;constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const g=this.data,{width:P,height:k}=n(g.rect),F=this.svgFactory.create(P,k,!0),B=g.borderStyle.width,H=this.#e=this.svgFactory.createElement("svg:ellipse");return H.setAttribute("cx",P/2),H.setAttribute("cy",k/2),H.setAttribute("rx",P/2-B/2),H.setAttribute("ry",k/2-B/2),H.setAttribute("stroke-width",B||1),H.setAttribute("stroke","transparent"),H.setAttribute("fill","transparent"),F.append(H),this.container.append(F),!g.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class q extends l{#e=null;constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const g=this.data,{width:P,height:k}=n(g.rect),F=this.svgFactory.create(P,k,!0);let B=[];for(const Y of g.vertices)B.push(Y.x-g.rect[0]+","+(g.rect[3]-Y.y));B=B.join(" ");const H=this.#e=this.svgFactory.createElement(this.svgElementName);return H.setAttribute("points",B),H.setAttribute("stroke-width",g.borderStyle.width||1),H.setAttribute("stroke","transparent"),H.setAttribute("fill","transparent"),F.append(H),this.container.append(F),!g.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class se extends q{constructor(g){super(g),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class te extends l{constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class z extends l{#e=[];constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=h.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const g=this.data,{width:P,height:k}=n(g.rect),F=this.svgFactory.create(P,k,!0);for(const B of g.inkLists){let H=[];for(const ee of B)H.push(`${ee.x-g.rect[0]},${g.rect[3]-ee.y}`);H=H.join(" ");const Y=this.svgFactory.createElement(this.svgElementName);this.#e.push(Y),Y.setAttribute("points",H),Y.setAttribute("stroke-width",g.borderStyle.width||1),Y.setAttribute("stroke","transparent"),Y.setAttribute("fill","transparent"),!g.popupRef&&this.hasPopupData&&this._createPopup(),F.append(Y)}return this.container.append(F),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}m.InkAnnotationElement=z;class y extends l{constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class s extends l{constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class f extends l{constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class _ extends l{constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class b extends l{constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}m.StampAnnotationElement=b;class M extends l{#e=null;constructor(g){super(g,{isRenderable:!0});const{filename:P,content:k}=this.data.file;this.filename=(0,L.getFilenameFromUrl)(P,!0),this.content=k,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:P,content:k})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:g,data:P}=this;let k;P.hasAppearance||0===P.fillAlpha?k=document.createElement("div"):(k=document.createElement("img"),k.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(P.name)?"paperclip":"pushpin"}.svg`,P.fillAlpha&&P.fillAlpha<1&&(k.style=`filter: opacity(${Math.round(100*P.fillAlpha)}%);`)),k.addEventListener("dblclick",this.#t.bind(this)),this.#e=k;const{isMac:F}=h.FeatureTest.platform;return g.addEventListener("keydown",B=>{"Enter"===B.key&&(F?B.metaKey:B.ctrlKey)&&this.#t()}),!P.popupRef&&this.hasPopupData?this._createPopup():k.classList.add("popupTriggerArea"),g.append(k),g}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}m.AnnotationLayer=class O{#e=null;#t=null;#n=new Map;constructor({div:g,accessibilityManager:P,annotationCanvasMap:k,l10n:F,page:B,viewport:H}){this.div=g,this.#e=P,this.#t=k,this.l10n=F,this.page=B,this.viewport=H,this.zIndex=0,this.l10n||=Z.NullL10n}#i(g,P){const k=g.firstChild||g;k.id=`${h.AnnotationPrefix}${P}`,this.div.append(g),this.#e?.moveElementInDOM(this.div,g,k,!1)}render(g){var P=this;return _asyncToGenerator(function*(){const{annotations:k}=g,F=P.div;(0,L.setLayerDimensions)(F,P.viewport);const B=new Map,H={data:null,layer:F,linkService:g.linkService,downloadManager:g.downloadManager,imageResourcesPath:g.imageResourcesPath||"",renderForms:!1!==g.renderForms,svgFactory:new L.DOMSVGFactory,annotationStorage:g.annotationStorage||new G.AnnotationStorage,enableScripting:!0===g.enableScripting,hasJSActions:g.hasJSActions,fieldObjects:g.fieldObjects,parent:P,elements:null};for(const Y of k){if(Y.noHTML)continue;const ee=Y.annotationType===h.AnnotationType.POPUP;if(ee){const ce=B.get(Y.id);if(!ce)continue;H.elements=ce}else{const{width:ce,height:de}=n(Y.rect);if(ce<=0||de<=0)continue}H.data=Y;const fe=p.create(H);if(!fe.isRenderable)continue;if(!ee&&Y.popupRef){const ce=B.get(Y.popupRef);ce?ce.push(fe):B.set(Y.popupRef,[fe])}fe.annotationEditorType>0&&P.#n.set(fe.data.id,fe);const re=fe.render();Y.hidden&&(re.style.visibility="hidden"),P.#i(re,Y.id)}P.#o(),yield P.l10n.translate(F)})()}update({viewport:g}){const P=this.div;this.viewport=g,(0,L.setLayerDimensions)(P,{rotation:g.rotation}),this.#o(),P.hidden=!1}#o(){if(!this.#t)return;const g=this.div;for(const[P,k]of this.#t){const F=g.querySelector(`[data-annotation-id="${P}"]`);if(!F)continue;const{firstChild:B}=F;B?"CANVAS"===B.nodeName?B.replaceWith(k):B.before(k):F.append(k)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(g){return this.#n.get(g)}}},(J,m)=>{function D(G){return Math.floor(255*Math.max(0,Math.min(1,G))).toString(16).padStart(2,"0")}function h(G){return Math.max(0,Math.min(255,255*G))}Object.defineProperty(m,"__esModule",{value:!0}),m.ColorConverters=void 0,m.ColorConverters=class L{static CMYK_G([N,Z,V,a]){return["G",1-Math.min(1,.3*N+.59*V+.11*Z+a)]}static G_CMYK([N]){return["CMYK",0,0,0,1-N]}static G_RGB([N]){return["RGB",N,N,N]}static G_rgb([N]){return[N=h(N),N,N]}static G_HTML([N]){const Z=D(N);return`#${Z}${Z}${Z}`}static RGB_G([N,Z,V]){return["G",.3*N+.59*Z+.11*V]}static RGB_rgb(N){return N.map(h)}static RGB_HTML(N){return`#${N.map(D).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([N,Z,V,a]){return["RGB",1-Math.min(1,N+a),1-Math.min(1,V+a),1-Math.min(1,Z+a)]}static CMYK_rgb([N,Z,V,a]){return[h(1-Math.min(1,N+a)),h(1-Math.min(1,V+a)),h(1-Math.min(1,Z+a))]}static CMYK_HTML(N){const Z=this.CMYK_RGB(N).slice(1);return this.RGB_HTML(Z)}static RGB_CMYK([N,Z,V]){const a=1-N,r=1-Z,t=1-V;return["CMYK",a,r,t,Math.min(a,r,t)]}}},(J,m)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.NullL10n=void 0,m.getL10nFallback=h;const D={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} \xd7 {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} \xd7 {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing\u2026",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};function h(N,Z){switch(N){case"find_match_count":N=`find_match_count[${1===Z.total?"one":"other"}]`;break;case"find_match_count_limit":N=`find_match_count_limit[${1===Z.limit?"one":"other"}]`}return D[N]||""}D.print_progress_percent="{{progress}}%",m.NullL10n={getLanguage:()=>_asyncToGenerator(function*(){return"en-us"})(),getDirection:()=>_asyncToGenerator(function*(){return"ltr"})(),get:(N,Z=null,V=h(N,Z))=>_asyncToGenerator(function*(){return function L(N,Z){return Z?N.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(V,a)=>a in Z?Z[a]:"{{"+a+"}}"):N}(V,Z)})(),translate:N=>_asyncToGenerator(function*(){})()}},(J,m,D)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.XfaLayer=void 0;var h=D(25);m.XfaLayer=class L{static setupStorage(N,Z,V,a,r){const t=a.getValue(Z,{value:null});switch(V.name){case"textarea":if(null!==t.value&&(N.textContent=t.value),"print"===r)break;N.addEventListener("input",n=>{a.setValue(Z,{value:n.target.value})});break;case"input":if("radio"===V.attributes.type||"checkbox"===V.attributes.type){if(t.value===V.attributes.xfaOn?N.setAttribute("checked",!0):t.value===V.attributes.xfaOff&&N.removeAttribute("checked"),"print"===r)break;N.addEventListener("change",n=>{a.setValue(Z,{value:n.target.getAttribute(n.target.checked?"xfaOn":"xfaOff")})})}else{if(null!==t.value&&N.setAttribute("value",t.value),"print"===r)break;N.addEventListener("input",n=>{a.setValue(Z,{value:n.target.value})})}break;case"select":if(null!==t.value){N.setAttribute("value",t.value);for(const n of V.children)n.attributes.value===t.value?n.attributes.selected=!0:n.attributes.hasOwnProperty("selected")&&delete n.attributes.selected}N.addEventListener("input",n=>{const p=n.target.options;a.setValue(Z,{value:-1===p.selectedIndex?"":p[p.selectedIndex].value})})}}static setAttributes({html:N,element:Z,storage:V=null,intent:a,linkService:r}){const{attributes:t}=Z,n=N instanceof HTMLAnchorElement;"radio"===t.type&&(t.name=`${t.name}-${a}`);for(const[p,l]of Object.entries(t))if(null!=l)switch(p){case"class":l.length&&N.setAttribute(p,l.join(" "));break;case"dataId":break;case"id":N.setAttribute("data-element-id",l);break;case"style":Object.assign(N.style,l);break;case"textContent":N.textContent=l;break;default:(!n||"href"!==p&&"newWindow"!==p)&&N.setAttribute(p,l)}n&&r.addLinkAttributes(N,t.href,t.newWindow),V&&t.dataId&&this.setupStorage(N,t.dataId,Z,V)}static render(N){const Z=N.annotationStorage,V=N.linkService,a=N.xfaHtml,r=N.intent||"display",t=document.createElement(a.name);a.attributes&&this.setAttributes({html:t,element:a,intent:r,linkService:V});const n=[[a,-1,t]],p=N.div;if(p.append(t),N.viewport){const e=`matrix(${N.viewport.transform.join(",")})`;p.style.transform=e}"richText"!==r&&p.setAttribute("class","xfaLayer xfaFont");const l=[];for(;n.length>0;){const[e,i,o]=n.at(-1);if(i+1===e.children.length){n.pop();continue}const c=e.children[++n.at(-1)[1]];if(null===c)continue;const{name:w}=c;if("#text"===w){const u=document.createTextNode(c.value);l.push(u),o.append(u);continue}const S=c?.attributes?.xmlns?document.createElementNS(c.attributes.xmlns,w):document.createElement(w);if(o.append(S),c.attributes&&this.setAttributes({html:S,element:c,storage:Z,intent:r,linkService:V}),c.children&&c.children.length>0)n.push([c,-1,S]);else if(c.value){const u=document.createTextNode(c.value);h.XfaText.shouldBuildText(w)&&l.push(u),S.append(u)}}for(const e of p.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))e.setAttribute("readOnly",!0);return{textDivs:l}}static update(N){const Z=`matrix(${N.viewport.transform.join(",")})`;N.div.style.transform=Z,N.div.hidden=!1}}},(J,m,D)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.InkEditor=void 0;var h=D(1),L=D(4),G=D(29),N=D(6),Z=D(5);m.InkEditor=(()=>{class a extends L.AnnotationEditor{#e=0;#t=0;#n=this.canvasPointermove.bind(this);#i=this.canvasPointerleave.bind(this);#o=this.canvasPointerup.bind(this);#r=this.canvasPointerdown.bind(this);#a=new Path2D;#l=!1;#c=!1;#s=!1;#h=null;#d=0;#f=0;#p=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";constructor(t){super({...t,name:"inkEditor"}),this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t){L.AnnotationEditor.initialize(t,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(t,n){switch(t){case h.AnnotationEditorParamsType.INK_THICKNESS:a._defaultThickness=n;break;case h.AnnotationEditorParamsType.INK_COLOR:a._defaultColor=n;break;case h.AnnotationEditorParamsType.INK_OPACITY:a._defaultOpacity=n/100}}updateParams(t,n){switch(t){case h.AnnotationEditorParamsType.INK_THICKNESS:this.#g(n);break;case h.AnnotationEditorParamsType.INK_COLOR:this.#m(n);break;case h.AnnotationEditorParamsType.INK_OPACITY:this.#_(n)}}static get defaultPropertiesToUpdate(){return[[h.AnnotationEditorParamsType.INK_THICKNESS,a._defaultThickness],[h.AnnotationEditorParamsType.INK_COLOR,a._defaultColor||L.AnnotationEditor._defaultLineColor],[h.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*a._defaultOpacity)]]}get propertiesToUpdate(){return[[h.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||a._defaultThickness],[h.AnnotationEditorParamsType.INK_COLOR,this.color||a._defaultColor||L.AnnotationEditor._defaultLineColor],[h.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??a._defaultOpacity))]]}#g(t){const n=this.thickness;this.addCommands({cmd:()=>{this.thickness=t,this.#L()},undo:()=>{this.thickness=n,this.#L()},mustExec:!0,type:h.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#m(t){const n=this.color;this.addCommands({cmd:()=>{this.color=t,this.#v()},undo:()=>{this.color=n,this.#v()},mustExec:!0,type:h.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#_(t){t/=100;const n=this.opacity;this.addCommands({cmd:()=>{this.opacity=t,this.#v()},undo:()=>{this.opacity=n,this.#v()},mustExec:!0,type:h.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.canvas||(this.#T(),this.#k()),this.isAttachedToDOM||(this.parent.add(this),this.#E()),this.#L()))}remove(){null!==this.canvas&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#h.disconnect(),this.#h=null,super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&null===t&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){const[t,n]=this.parentDimensions;this.setDimensions(this.width*t,this.height*n)}enableEditMode(){this.#l||null===this.canvas||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",this.#r))}disableEditMode(){!this.isInEditMode()||null===this.canvas||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",this.#r))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return 0===this.paths.length||1===this.paths.length&&0===this.paths[0].length}#u(){const{parentRotation:t,parentDimensions:[n,p]}=this;switch(t){case 90:return[0,p,p,n];case 180:return[n,p,n,p];case 270:return[n,0,p,n];default:return[0,0,n,p]}}#b(){const{ctx:t,color:n,opacity:p,thickness:l,parentScale:e,scaleFactor:i}=this;t.lineWidth=l*e/i,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=`${n}${(0,Z.opacityToHex)(p)}`}#w(t,n){this.canvas.addEventListener("contextmenu",N.noContextMenu),this.canvas.addEventListener("pointerleave",this.#i),this.canvas.addEventListener("pointermove",this.#n),this.canvas.addEventListener("pointerup",this.#o),this.canvas.removeEventListener("pointerdown",this.#r),this.isEditing=!0,this.#s||(this.#s=!0,this.#E(),this.thickness||=a._defaultThickness,this.color||=a._defaultColor||L.AnnotationEditor._defaultLineColor,this.opacity??=a._defaultOpacity),this.currentPath.push([t,n]),this.#c=!1,this.#b(),this.#p=()=>{this.#I(),this.#p&&window.requestAnimationFrame(this.#p)},window.requestAnimationFrame(this.#p)}#A(t,n){const[p,l]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===p&&n===l)return;const e=this.currentPath;let i=this.#a;if(e.push([t,n]),this.#c=!0,e.length<=2)return i.moveTo(...e[0]),void i.lineTo(t,n);3===e.length&&(this.#a=i=new Path2D,i.moveTo(...e[0])),this.#R(i,...e.at(-3),...e.at(-2),t,n)}#y(){if(0===this.currentPath.length)return;const t=this.currentPath.at(-1);this.#a.lineTo(...t)}#S(t,n){let p;if(this.#p=null,t=Math.min(Math.max(t,0),this.canvas.width),n=Math.min(Math.max(n,0),this.canvas.height),this.#A(t,n),this.#y(),1!==this.currentPath.length)p=this.#F();else{const c=[t,n];p=[[c,c.slice(),c.slice(),c]]}const l=this.#a,e=this.currentPath;this.currentPath=[],this.#a=new Path2D,this.addCommands({cmd:()=>{this.allRawPaths.push(e),this.paths.push(p),this.bezierPath2D.push(l),this.rebuild()},undo:()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),0===this.paths.length?this.remove():(this.canvas||(this.#T(),this.#k()),this.#L())},mustExec:!0})}#I(){if(!this.#c)return;this.#c=!1,Math.ceil(this.thickness*this.parentScale);const n=this.currentPath.slice(-3),p=n.map(S=>S[0]),l=n.map(S=>S[1]),{ctx:w}=(Math.min(...p),Math.max(...p),Math.min(...l),Math.max(...l),this);w.save(),w.clearRect(0,0,this.canvas.width,this.canvas.height);for(const S of this.bezierPath2D)w.stroke(S);w.stroke(this.#a),w.restore()}#R(t,n,p,l,e,i,o){const c=(n+l)/2,w=(p+e)/2,S=(l+i)/2,u=(e+o)/2;t.bezierCurveTo(c+2*(l-c)/3,w+2*(e-w)/3,S+2*(l-S)/3,u+2*(e-u)/3,S,u)}#F(){const t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];const n=[];let p,[l,e]=t[0];for(p=1;p<t.length-2;p++){const[v,d]=t[p],[E,T]=t[p+1],U=(v+E)/2,C=(d+T)/2;n.push([[l,e],[l+2*(v-l)/3,e+2*(d-e)/3],[U+2*(v-U)/3,C+2*(d-C)/3],[U,C]]),[l,e]=[U,C]}const[i,o]=t[p],[c,w]=t[p+1];return n.push([[l,e],[l+2*(i-l)/3,e+2*(o-e)/3],[c+2*(i-c)/3,w+2*(o-w)/3],[c,w]]),n}#v(){if(this.isEmpty())return void this.#M();this.#b();const{canvas:t,ctx:n}=this;n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,t.width,t.height),this.#M();for(const p of this.bezierPath2D)n.stroke(p)}commit(){this.#l||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#l=!0,this.div.classList.add("disabled"),this.#L(!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}canvasPointerdown(t){0!==t.button||!this.isInEditMode()||this.#l||(this.setInForeground(),t.preventDefault(),"mouse"!==t.type&&this.div.focus(),this.#w(t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),this.#A(t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),this.#C(t)}canvasPointerleave(t){this.#C(t)}#C(t){this.canvas.removeEventListener("pointerleave",this.#i),this.canvas.removeEventListener("pointermove",this.#n),this.canvas.removeEventListener("pointerup",this.#o),this.canvas.addEventListener("pointerdown",this.#r),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",N.noContextMenu)},10),this.#S(t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#T(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",L.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(t=>this.canvas?.setAttribute("aria-label",t)),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#k(){this.#h=new ResizeObserver(t=>{const n=t[0].contentRect;n.width&&n.height&&this.setDimensions(n.width,n.height)}),this.#h.observe(this.div)}get isResizable(){return!this.isEmpty()&&this.#l}render(){if(this.div)return this.div;let t,n;this.width&&(t=this.x,n=this.y),super.render(),L.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(o=>this.div?.setAttribute("aria-label",o));const[p,l,e,i]=this.#u();if(this.setAt(p,l,0,0),this.setDims(e,i),this.#T(),this.width){const[o,c]=this.parentDimensions;this.setAspectRatio(this.width*o,this.height*c),this.setAt(t*o,n*c,this.width*o,this.height*c),this.#s=!0,this.#E(),this.setDims(this.width*o,this.height*c),this.#v(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#k(),this.div}#E(){if(!this.#s)return;const[t,n]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*n),this.#M()}setDimensions(t,n){const p=Math.round(t),l=Math.round(n);if(this.#d===p&&this.#f===l)return;this.#d=p,this.#f=l,this.canvas.style.visibility="hidden";const[e,i]=this.parentDimensions;this.width=t/e,this.height=n/i,this.fixAndSetPosition(),this.#l&&this.#x(t,n),this.#E(),this.#v(),this.canvas.style.visibility="visible",this.fixDims()}#x(t,n){const p=this.#D(),l=(t-p)/this.#t,e=(n-p)/this.#e;this.scaleFactor=Math.min(l,e)}#M(){const t=this.#D()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)}static#N(t){const n=new Path2D;for(let p=0,l=t.length;p<l;p++){const[e,i,o,c]=t[p];0===p&&n.moveTo(...e),n.bezierCurveTo(i[0],i[1],o[0],o[1],c[0],c[1])}return n}static#B(t,n,p){const[l,e,i,o]=n;switch(p){case 0:for(let c=0,w=t.length;c<w;c+=2)t[c]+=l,t[c+1]=o-t[c+1];break;case 90:for(let c=0,w=t.length;c<w;c+=2){const S=t[c];t[c]=t[c+1]+l,t[c+1]=S+e}break;case 180:for(let c=0,w=t.length;c<w;c+=2)t[c]=i-t[c],t[c+1]+=e;break;case 270:for(let c=0,w=t.length;c<w;c+=2){const S=t[c];t[c]=i-t[c+1],t[c+1]=o-S}break;default:throw new Error("Invalid rotation")}return t}static#V(t,n,p){const[l,e,i,o]=n;switch(p){case 0:for(let c=0,w=t.length;c<w;c+=2)t[c]-=l,t[c+1]=o-t[c+1];break;case 90:for(let c=0,w=t.length;c<w;c+=2){const S=t[c];t[c]=t[c+1]-e,t[c+1]=S-l}break;case 180:for(let c=0,w=t.length;c<w;c+=2)t[c]=i-t[c],t[c+1]-=e;break;case 270:for(let c=0,w=t.length;c<w;c+=2){const S=t[c];t[c]=o-t[c+1],t[c+1]=i-S}break;default:throw new Error("Invalid rotation")}return t}#U(t,n,p,l){const e=[],i=this.thickness/2,o=t*n+i,c=t*p+i;for(const w of this.paths){const S=[],u=[];for(let v=0,d=w.length;v<d;v++){const[E,T,U,C]=w[v],$=t*E[0]+o,j=t*E[1]+c,q=t*T[0]+o,se=t*T[1]+c,te=t*U[0]+o,z=t*U[1]+c,y=t*C[0]+o,s=t*C[1]+c;0===v&&(S.push($,j),u.push($,j)),S.push(q,se,te,z,y,s),u.push(q,se),v===d-1&&u.push(y,s)}e.push({bezier:a.#B(S,l,this.rotation),points:a.#B(u,l,this.rotation)})}return e}#O(){let t=1/0,n=-1/0,p=1/0,l=-1/0;for(const e of this.paths)for(const[i,o,c,w]of e){const S=h.Util.bezierBoundingBox(...i,...o,...c,...w);t=Math.min(t,S[0]),p=Math.min(p,S[1]),n=Math.max(n,S[2]),l=Math.max(l,S[3])}return[t,p,n,l]}#D(){return this.#l?Math.ceil(this.thickness*this.parentScale):0}#L(t=!1){if(this.isEmpty())return;if(!this.#l)return void this.#v();const n=this.#O(),p=this.#D();this.#t=Math.max(L.AnnotationEditor.MIN_SIZE,n[2]-n[0]),this.#e=Math.max(L.AnnotationEditor.MIN_SIZE,n[3]-n[1]);const l=Math.ceil(p+this.#t*this.scaleFactor),e=Math.ceil(p+this.#e*this.scaleFactor),[i,o]=this.parentDimensions;this.width=l/i,this.height=e/o,this.setAspectRatio(l,e);const c=this.translationX,w=this.translationY;this.translationX=-n[0],this.translationY=-n[1],this.#E(),this.#v(),this.#d=l,this.#f=e,this.setDims(l,e);const S=t?p/this.scaleFactor/2:0;this.translate(c-this.translationX-S,w-this.translationY-S)}static deserialize(t,n,p){if(t instanceof G.InkAnnotationElement)return null;const l=super.deserialize(t,n,p);l.thickness=t.thickness,l.color=h.Util.makeHexColor(...t.color),l.opacity=t.opacity;const[e,i]=l.pageDimensions,o=l.width*e,c=l.height*i,w=l.parentScale,S=t.thickness/2;l.#l=!0,l.#d=Math.round(o),l.#f=Math.round(c);const{paths:u,rect:v,rotation:d}=t;for(let{bezier:T}of u){T=a.#V(T,v,d);const U=[];l.paths.push(U);let C=w*(T[0]-S),$=w*(T[1]-S);for(let q=2,se=T.length;q<se;q+=6){const f=w*(T[q+4]-S),_=w*(T[q+5]-S);U.push([[C,$],[w*(T[q]-S),w*(T[q+1]-S)],[w*(T[q+2]-S),w*(T[q+3]-S)],[f,_]]),C=f,$=_}const j=this.#N(U);l.bezierPath2D.push(j)}const E=l.#O();return l.#t=Math.max(L.AnnotationEditor.MIN_SIZE,E[2]-E[0]),l.#e=Math.max(L.AnnotationEditor.MIN_SIZE,E[3]-E[1]),l.#x(o,c),l}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),n=L.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:h.AnnotationEditorType.INK,color:n,thickness:this.thickness,opacity:this.opacity,paths:this.#U(this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}return a})()},(J,m,D)=>{Object.defineProperty(m,"__esModule",{value:!0}),m.StampEditor=void 0;var h=D(1),L=D(4),G=D(6),N=D(29);m.StampEditor=(()=>{class V extends L.AnnotationEditor{#e=null;#t=null;#n=null;#i=null;#o=null;#r=null;#a=null;#l=null;#c=!1;#s=!1;static _type="stamp";constructor(r){super({...r,name:"stampEditor"}),this.#i=r.bitmapUrl,this.#o=r.bitmapFile}static initialize(r){L.AnnotationEditor.initialize(r)}static get supportedTypes(){return(0,h.shadow)(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(t=>`image/${t}`))}static get supportedTypesStr(){return(0,h.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(r){return this.supportedTypes.includes(r)}static paste(r,t){t.pasteEditor(h.AnnotationEditorType.STAMP,{bitmapFile:r.getAsFile()})}#h(r,t=!1){r?(this.#e=r.bitmap,t||(this.#t=r.id,this.#c=r.isSvg),this.#p()):this.remove()}#d(){this.#n=null,this._uiManager.enableWaiting(!1),this.#r&&this.div.focus()}#f(){var r=this;if(this.#t)return this._uiManager.enableWaiting(!0),void this._uiManager.imageManager.getFromId(this.#t).then(n=>this.#h(n,!0)).finally(()=>this.#d());if(this.#i){const n=this.#i;return this.#i=null,this._uiManager.enableWaiting(!0),void(this.#n=this._uiManager.imageManager.getFromUrl(n).then(p=>this.#h(p)).finally(()=>this.#d()))}if(this.#o){const n=this.#o;return this.#o=null,this._uiManager.enableWaiting(!0),void(this.#n=this._uiManager.imageManager.getFromFile(n).then(p=>this.#h(p)).finally(()=>this.#d()))}const t=document.createElement("input");t.type="file",t.accept=V.supportedTypesStr,this.#n=new Promise(n=>{t.addEventListener("change",_asyncToGenerator(function*(){if(t.files&&0!==t.files.length){r._uiManager.enableWaiting(!0);const p=yield r._uiManager.imageManager.getFromFile(t.files[0]);r.#h(p)}else r.remove();n()})),t.addEventListener("cancel",()=>{this.remove(),n()})}).finally(()=>this.#d()),t.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#r?.remove(),this.#r=null,this.#a?.disconnect(),this.#a=null),super.remove()}rebuild(){this.parent?(super.rebuild(),null!==this.div&&(this.#t&&this.#f(),this.isAttachedToDOM||this.parent.add(this))):this.#t&&this.#f()}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#n||this.#e||this.#i||this.#o)}get isResizable(){return!0}render(){if(this.div)return this.div;let r,t;if(this.width&&(r=this.x,t=this.y),super.render(),this.div.hidden=!0,this.#e?this.#p():this.#f(),this.width){const[n,p]=this.parentDimensions;this.setAt(r*n,t*p,this.width*n,this.height*p)}return this.div}#p(){const{div:r}=this;let{width:t,height:n}=this.#e;const[p,l]=this.pageDimensions,e=.75;if(this.width)t=this.width*p,n=this.height*l;else if(t>e*p||n>e*l){const w=Math.min(e*p/t,e*l/n);t*=w,n*=w}const[i,o]=this.parentDimensions;this.setDims(t*i/p,n*o/l),this._uiManager.enableWaiting(!1);const c=this.#r=document.createElement("canvas");r.append(c),r.hidden=!1,this.#_(t,n),this.#b(),this.#s||(this.parent.addUndoableEditor(this),this.#s=!0),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()}#g(r,t){const[n,p]=this.parentDimensions;this.width=r/n,this.height=t/p,this.setDims(r,t),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,null!==this.#l&&clearTimeout(this.#l),this.#l=setTimeout(()=>{this.#l=null,this.#_(r,t)},200)}#m(r,t){const{width:n,height:p}=this.#e;let l=n,e=p,i=this.#e;for(;l>2*r||e>2*t;){const o=l,c=e;l>2*r&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2)),e>2*t&&(e=e>=16384?Math.floor(e/2)-1:Math.ceil(e/2));const w=new OffscreenCanvas(l,e);w.getContext("2d").drawImage(i,0,0,o,c,0,0,l,e),i=w.transferToImageBitmap()}return i}#_(r,t){r=Math.ceil(r),t=Math.ceil(t);const n=this.#r;if(!n||n.width===r&&n.height===t)return;n.width=r,n.height=t;const p=this.#c?this.#e:this.#m(r,t),l=n.getContext("2d");l.filter=this._uiManager.hcmFilter,l.drawImage(p,0,0,p.width,p.height,0,0,r,t)}#u(r){if(r){if(this.#c){const p=this._uiManager.imageManager.getSvgUrl(this.#t);if(p)return p}const t=document.createElement("canvas");return({width:t.width,height:t.height}=this.#e),t.getContext("2d").drawImage(this.#e,0,0),t.toDataURL()}if(this.#c){const[t,n]=this.pageDimensions,p=Math.round(this.width*t*G.PixelsPerInch.PDF_TO_CSS_UNITS),l=Math.round(this.height*n*G.PixelsPerInch.PDF_TO_CSS_UNITS),e=new OffscreenCanvas(p,l);return e.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,p,l),e.transferToImageBitmap()}return structuredClone(this.#e)}#b(){this.#a=new ResizeObserver(r=>{const t=r[0].contentRect;t.width&&t.height&&this.#g(t.width,t.height)}),this.#a.observe(this.div)}static deserialize(r,t,n){if(r instanceof N.StampAnnotationElement)return null;const p=super.deserialize(r,t,n),{rect:l,bitmapUrl:e,bitmapId:i,isSvg:o,accessibilityData:c}=r;i&&n.imageManager.isValidId(i)?p.#t=i:p.#i=e,p.#c=o;const[w,S]=p.pageDimensions;return p.width=(l[2]-l[0])/w,p.height=(l[3]-l[1])/S,c&&(p.altTextData=c),p}serialize(r=!1,t=null){if(this.isEmpty())return null;const n={annotationType:h.AnnotationEditorType.STAMP,bitmapId:this.#t,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#c,structTreeParentId:this._structTreeParentId};if(r)return n.bitmapUrl=this.#u(!0),n.accessibilityData=this.altTextData,n;const{decorative:p,altText:l}=this.altTextData;if(!p&&l&&(n.accessibilityData={type:"Figure",alt:l}),null===t)return n;t.stamps||=new Map;const e=this.#c?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(t.stamps.has(this.#t)){if(this.#c){const i=t.stamps.get(this.#t);e>i.area&&(i.area=e,i.serialized.bitmap.close(),i.serialized.bitmap=this.#u(!1))}}else t.stamps.set(this.#t,{area:e,serialized:n}),n.bitmap=this.#u(!1);return n}}return V})()}],__webpack_module_cache__={};function __w_pdfjs_require__(J){var m=__webpack_module_cache__[J];if(void 0!==m)return m.exports;var D=__webpack_module_cache__[J]={exports:{}};return __webpack_modules__[J](D,D.exports,__w_pdfjs_require__),D.exports}var __nested_webpack_exports__={};return(()=>{var J=__nested_webpack_exports__;Object.defineProperty(J,"__esModule",{value:!0}),Object.defineProperty(J,"AbortException",{enumerable:!0,get:function(){return m.AbortException}}),Object.defineProperty(J,"AnnotationEditorLayer",{enumerable:!0,get:function(){return G.AnnotationEditorLayer}}),Object.defineProperty(J,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return m.AnnotationEditorParamsType}}),Object.defineProperty(J,"AnnotationEditorType",{enumerable:!0,get:function(){return m.AnnotationEditorType}}),Object.defineProperty(J,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return N.AnnotationEditorUIManager}}),Object.defineProperty(J,"AnnotationLayer",{enumerable:!0,get:function(){return Z.AnnotationLayer}}),Object.defineProperty(J,"AnnotationMode",{enumerable:!0,get:function(){return m.AnnotationMode}}),Object.defineProperty(J,"CMapCompressionType",{enumerable:!0,get:function(){return m.CMapCompressionType}}),Object.defineProperty(J,"DOMSVGFactory",{enumerable:!0,get:function(){return h.DOMSVGFactory}}),Object.defineProperty(J,"FeatureTest",{enumerable:!0,get:function(){return m.FeatureTest}}),Object.defineProperty(J,"GlobalWorkerOptions",{enumerable:!0,get:function(){return V.GlobalWorkerOptions}}),Object.defineProperty(J,"ImageKind",{enumerable:!0,get:function(){return m.ImageKind}}),Object.defineProperty(J,"InvalidPDFException",{enumerable:!0,get:function(){return m.InvalidPDFException}}),Object.defineProperty(J,"MissingPDFException",{enumerable:!0,get:function(){return m.MissingPDFException}}),Object.defineProperty(J,"OPS",{enumerable:!0,get:function(){return m.OPS}}),Object.defineProperty(J,"PDFDataRangeTransport",{enumerable:!0,get:function(){return D.PDFDataRangeTransport}}),Object.defineProperty(J,"PDFDateString",{enumerable:!0,get:function(){return h.PDFDateString}}),Object.defineProperty(J,"PDFWorker",{enumerable:!0,get:function(){return D.PDFWorker}}),Object.defineProperty(J,"PasswordResponses",{enumerable:!0,get:function(){return m.PasswordResponses}}),Object.defineProperty(J,"PermissionFlag",{enumerable:!0,get:function(){return m.PermissionFlag}}),Object.defineProperty(J,"PixelsPerInch",{enumerable:!0,get:function(){return h.PixelsPerInch}}),Object.defineProperty(J,"PromiseCapability",{enumerable:!0,get:function(){return m.PromiseCapability}}),Object.defineProperty(J,"RenderingCancelledException",{enumerable:!0,get:function(){return h.RenderingCancelledException}}),Object.defineProperty(J,"SVGGraphics",{enumerable:!0,get:function(){return D.SVGGraphics}}),Object.defineProperty(J,"UnexpectedResponseException",{enumerable:!0,get:function(){return m.UnexpectedResponseException}}),Object.defineProperty(J,"Util",{enumerable:!0,get:function(){return m.Util}}),Object.defineProperty(J,"VerbosityLevel",{enumerable:!0,get:function(){return m.VerbosityLevel}}),Object.defineProperty(J,"XfaLayer",{enumerable:!0,get:function(){return a.XfaLayer}}),Object.defineProperty(J,"build",{enumerable:!0,get:function(){return D.build}}),Object.defineProperty(J,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return m.createValidAbsoluteUrl}}),Object.defineProperty(J,"getDocument",{enumerable:!0,get:function(){return D.getDocument}}),Object.defineProperty(J,"getFilenameFromUrl",{enumerable:!0,get:function(){return h.getFilenameFromUrl}}),Object.defineProperty(J,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return h.getPdfFilenameFromUrl}}),Object.defineProperty(J,"getXfaPageViewport",{enumerable:!0,get:function(){return h.getXfaPageViewport}}),Object.defineProperty(J,"isDataScheme",{enumerable:!0,get:function(){return h.isDataScheme}}),Object.defineProperty(J,"isPdfFile",{enumerable:!0,get:function(){return h.isPdfFile}}),Object.defineProperty(J,"loadScript",{enumerable:!0,get:function(){return h.loadScript}}),Object.defineProperty(J,"noContextMenu",{enumerable:!0,get:function(){return h.noContextMenu}}),Object.defineProperty(J,"normalizeUnicode",{enumerable:!0,get:function(){return m.normalizeUnicode}}),Object.defineProperty(J,"renderTextLayer",{enumerable:!0,get:function(){return L.renderTextLayer}}),Object.defineProperty(J,"setLayerDimensions",{enumerable:!0,get:function(){return h.setLayerDimensions}}),Object.defineProperty(J,"shadow",{enumerable:!0,get:function(){return m.shadow}}),Object.defineProperty(J,"updateTextLayer",{enumerable:!0,get:function(){return L.updateTextLayer}}),Object.defineProperty(J,"version",{enumerable:!0,get:function(){return D.version}});var m=__w_pdfjs_require__(1),D=__w_pdfjs_require__(2),h=__w_pdfjs_require__(6),L=__w_pdfjs_require__(26),G=__w_pdfjs_require__(27),N=__w_pdfjs_require__(5),Z=__w_pdfjs_require__(29),V=__w_pdfjs_require__(14),a=__w_pdfjs_require__(32)})(),__nested_webpack_exports__})(),module.exports=m.pdfjsLib=D()},3876:(J,m,D)=>{var G,N,h=D(9293).default;G=globalThis,N=()=>(()=>{"use strict";var L=[,(V,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PDFFindController=a.FindState=void 0;var t=r(2),n=r(3),p=r(4);const l={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};a.FindState=l;const c={"\u2010":"-","\u2018":"'","\u2019":"'","\u201a":"'","\u201b":"'","\u201c":'"',"\u201d":'"',"\u201e":'"',"\u201f":'"',"\xbc":"1/4","\xbd":"1/2","\xbe":"3/4"},w=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]);let S;const u=new RegExp("\\p{M}+","gu"),v=new RegExp("([.*+?^${}()|[\\]\\\\])|(\\p{P})|(\\s+)|(\\p{M})|(\\p{L})","gu"),d=new RegExp("([^\\p{M}])\\p{M}*$","u"),E=new RegExp("^\\p{M}*([^\\p{M}])","u"),T=/[\uAC00-\uD7AF\uFA6C\uFACF-\uFAD1\uFAD5-\uFAD7]+/g,U=new Map,$=new Map;let j=null,q=null;function se(y){const s=[];let f,_;for(;null!==(f=T.exec(y));){let{index:H}=f;for(const Y of f[0]){let ee=U.get(Y);ee||(ee=Y.normalize("NFD").length,U.set(Y,ee)),s.push([ee,H++])}}if(0===s.length&&j)_=j;else if(s.length>0&&q)_=q;else{const re=`([${Object.keys(c).join("")}])|([${(0,n.getNormalizeWithNFKC)()}])|((?:\u3099|\u309a)\\n)|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|((?:\\p{Ideographic}|[\u3040-\u30ff])\\n)|(\\n)`;_=0===s.length?j=new RegExp(re+"|(\\u0000)","gum"):q=new RegExp(re+"|([\\u1100-\\u1112\\ud7a4-\\ud7af\\ud84a\\ud84c\\ud850\\ud854\\ud857\\ud85f])","gum")}const b=[];for(;null!==(f=u.exec(y));)b.push([f[0].length,f.index]);let M=y.normalize("NFD");const O=[[0,0]];let I=0,g=0,P=0,k=0,F=0,B=!1;return M=M.replace(_,(H,Y,ee,fe,re,ce,de,X,ne,he)=>{if(he-=k,Y){const le=c[Y],pe=le.length;for(let me=1;me<pe;me++)O.push([he-P+me,P-me]);return P-=pe-1,le}if(ee){let le=$.get(ee);le||(le=ee.normalize("NFKC"),$.set(ee,le));const pe=le.length;for(let me=1;me<pe;me++)O.push([he-P+me,P-me]);return P-=pe-1,le}if(fe)return B=!0,he+F===b[I]?.[1]?++I:(O.push([he-1-P+1,P-1]),P-=1,k+=1),O.push([he-P+1,P]),k+=1,F+=1,fe.charAt(0);if(re){const le=re.endsWith("\n"),pe=le?re.length-2:re.length;B=!0;let me=pe;he+F===b[I]?.[1]&&(me-=b[I][0],++I);for(let ve=1;ve<=me;ve++)O.push([he-1-P+ve,P-ve]);return P-=me,k+=me,le?(O.push([(he+=pe-1)-P+1,1+P]),P+=1,k+=1,F+=1,re.slice(0,pe)):re}if(ce)return O.push([he-P+(ce.length-2),1+P]),P+=1,k+=1,F+=1,ce.slice(0,-2);if(de)return O.push([he-P+(de.length-1),P]),k+=1,F+=1,de.slice(0,-1);if(X)return O.push([he-P+1,P-1]),P-=1,k+=1,F+=1," ";if(he+F===s[g]?.[1]){const le=s[g][0]-1;++g;for(let pe=1;pe<=le;pe++)O.push([he-(P-pe),P-pe]);P-=le,k+=le}return ne}),O.push([M.length,P]),[M,O,B]}function te(y,s,f){if(!y)return[s,f];const _=s,b=s+f-1;let M=(0,t.binarySearchFirstItem)(y,k=>k[0]>=_);y[M][0]>_&&--M;let O=(0,t.binarySearchFirstItem)(y,k=>k[0]>=b,M);y[O][0]>b&&--O;const I=_+y[M][1];return[I,b+y[O][1]+1-I]}a.PDFFindController=class z{#e=null;#t=!0;#n=0;constructor({linkService:s,eventBus:f,updateMatchesCountOnProgress:_=!0}){this._linkService=s,this._eventBus=f,this.#t=_,this.onIsPageVisible=null,this.#o(),f._on("find",this.#i.bind(this)),f._on("findbarclose",this.#w.bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return this.#e}setDocument(s){this._pdfDocument&&this.#o(),s&&(this._pdfDocument=s,this._firstPageCapability.resolve())}#i(s){if(!s)return;!1===s.phraseSearch&&(console.error("The `phraseSearch`-parameter was removed, please provide an Array of strings in the `query`-parameter instead."),"string"==typeof s.query&&(s.query=s.query.match(/\S+/g)));const f=this._pdfDocument,{type:_}=s;(null===this.#e||this.#a(s))&&(this._dirtyMatch=!0),this.#e=s,"highlightallchange"!==_&&this.#S(l.PENDING),this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||f&&this._pdfDocument!==f)return;this.#d();const b=!this._highlightMatches,M=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),_?this._dirtyMatch?this.#g():"again"===_?(this.#g(),b&&this.#e.highlightAll&&this.#p()):"highlightallchange"===_?(M?this.#g():this._highlightMatches=!0,this.#p()):this.#g():this._findTimeout=setTimeout(()=>{this.#g(),this._findTimeout=null},250)})}scrollMatchIntoView({element:s=null,selectedLeft:f=0,pageIndex:_=-1,matchIndex:b=-1}){this._scrollMatches&&s&&-1!==b&&b===this._selected.matchIdx&&-1!==_&&_===this._selected.pageIdx&&(this._scrollMatches=!1,(0,t.scrollIntoView)(s,{top:-50,left:f+-400},!0))}#o(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],this.#n=0,this.#e=null,this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=new p.PromiseCapability}get#r(){const{query:s}=this.#e;return"string"==typeof s?(s!==this._rawQuery&&(this._rawQuery=s,[this._normalizedQuery]=se(s)),this._normalizedQuery):(s||[]).filter(f=>!!f).map(f=>se(f)[0])}#a(s){const f=s.query,_=this.#e.query,b=typeof f;if(b!==typeof _)return!0;if("string"===b){if(f!==_)return!0}else if(JSON.stringify(f)!==JSON.stringify(_))return!0;switch(s.type){case"again":const O=this._selected.pageIdx+1,I=this._linkService;return O>=1&&O<=I.pagesCount&&O!==I.page&&!(this.onIsPageVisible?.(O)??1);case"highlightallchange":return!1}return!0}#l(s,f,_){let b=s.slice(0,f).match(d);if(b){const M=s.charCodeAt(f),O=b[1].charCodeAt(0);if((0,n.getCharacterType)(M)===(0,n.getCharacterType)(O))return!1}if(b=s.slice(f+_).match(E),b){const M=s.charCodeAt(f+_-1),O=b[1].charCodeAt(0);if((0,n.getCharacterType)(M)===(0,n.getCharacterType)(O))return!1}return!0}#c(s,f,_,b){const M=this._pageMatches[_]=[],O=this._pageMatchesLength[_]=[];if(!s)return;const I=this._pageDiffs[_];let g;for(;null!==(g=s.exec(b));){if(f&&!this.#l(b,g.index,g[0].length))continue;const[P,k]=te(I,g.index,g[0].length);k&&(M.push(P),O.push(k))}}#s(s,f){const{matchDiacritics:_}=this.#e;let b=!1;return(s=s.replaceAll(v,(O,I,g,P,k,F)=>I?`[ ]*\\${I}[ ]*`:g?`[ ]*${g}[ ]*`:P?"[ ]+":_?k||F:k?w.has(k.charCodeAt(0))?k:"":f?(b=!0,`${F}\\p{M}*`):F)).endsWith("[ ]*")&&(s=s.slice(0,s.length-4)),_&&f&&(S||=String.fromCharCode(...w),b=!0,s=`${s}(?=[${S}]|[^\\p{M}]|$)`),[b,s]}#h(s){let f=this.#r;if(0===f.length)return;const{caseSensitive:_,entireWord:b}=this.#e,M=this._pageContents[s],O=this._hasDiacritics[s];let I=!1;"string"==typeof f?[I,f]=this.#s(f,O):f=f.sort().reverse().map(k=>{const[F,B]=this.#s(k,O);return I||=F,`(${B})`}).join("|"),f=f?new RegExp(f,`g${I?"u":""}${_?"":"i"}`):null,this.#c(f,b,s,M),this.#e.highlightAll&&this.#f(s),this._resumePageIdx===s&&(this._resumePageIdx=null,this.#_());const P=this._pageMatches[s].length;this._matchesCountTotal+=P,this.#t?P>0&&this.#y():++this.#n===this._linkService.pagesCount&&this.#y()}#d(){if(this._extractTextPromises.length>0)return;let s=Promise.resolve();const f={disableNormalization:!0};for(let _=0,b=this._linkService.pagesCount;_<b;_++){const M=new p.PromiseCapability;this._extractTextPromises[_]=M.promise,s=s.then(()=>this._pdfDocument.getPage(_+1).then(O=>O.getTextContent(f)).then(O=>{const I=[];for(const g of O.items)I.push(g.str),g.hasEOL&&I.push("\n");[this._pageContents[_],this._pageDiffs[_],this._hasDiacritics[_]]=se(I.join("")),M.resolve()},O=>{console.error(`Unable to get text content for page ${_+1}`,O),this._pageContents[_]="",this._pageDiffs[_]=null,this._hasDiacritics[_]=!1,M.resolve()}))}}#f(s){this._scrollMatches&&this._selected.pageIdx===s&&(this._linkService.page=s+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:s})}#p(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})}#g(){const s=this.#e.findPrevious,f=this._linkService.page-1,_=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=f,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,this.#n=0,this._matchesCountTotal=0,this.#p();for(let O=0;O<_;O++)this._pendingFindMatches.has(O)||(this._pendingFindMatches.add(O),this._extractTextPromises[O].then(()=>{this._pendingFindMatches.delete(O),this.#h(O)}))}if(0===this.#r.length)return void this.#S(l.FOUND);if(this._resumePageIdx)return;const M=this._offset;if(this._pagesToSearch=_,null!==M.matchIdx){if(!s&&M.matchIdx+1<this._pageMatches[M.pageIdx].length||s&&M.matchIdx>0)return M.matchIdx=s?M.matchIdx-1:M.matchIdx+1,void this.#b(!0);this.#u(s)}this.#_()}#m(s){const f=this._offset,_=s.length,b=this.#e.findPrevious;return _?(f.matchIdx=b?_-1:0,this.#b(!0),!0):(this.#u(b),!!(f.wrapped&&(f.matchIdx=null,this._pagesToSearch<0))&&(this.#b(!1),!0))}#_(){null!==this._resumePageIdx&&console.error("There can only be one pending page.");let s=null;do{const f=this._offset.pageIdx;if(s=this._pageMatches[f],!s){this._resumePageIdx=f;break}}while(!this.#m(s))}#u(s){const f=this._offset,_=this._linkService.pagesCount;f.pageIdx=s?f.pageIdx-1:f.pageIdx+1,f.matchIdx=null,this._pagesToSearch--,(f.pageIdx>=_||f.pageIdx<0)&&(f.pageIdx=s?_-1:0,f.wrapped=!0)}#b(s=!1){let f=l.NOT_FOUND;const _=this._offset.wrapped;if(this._offset.wrapped=!1,s){const b=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,f=_?l.WRAPPED:l.FOUND,-1!==b&&b!==this._selected.pageIdx&&this.#f(b)}this.#S(f,this.#e.findPrevious),-1!==this._selected.pageIdx&&(this._scrollMatches=!0,this.#f(this._selected.pageIdx))}#w(s){const f=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||f&&this._pdfDocument!==f||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),this.#S(l.FOUND),this._highlightMatches=!1,this.#p())})}#A(){const{pageIdx:s,matchIdx:f}=this._selected;let _=0,b=this._matchesCountTotal;if(-1!==f){for(let M=0;M<s;M++)_+=this._pageMatches[M]?.length||0;_+=f+1}return(_<1||_>b)&&(_=b=0),{current:_,total:b}}#y(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:this.#A()})}#S(s,f=!1){!this.#t&&(this.#n!==this._linkService.pagesCount||s===l.PENDING)||this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:s,previous:f,matchesCount:this.#A(),rawQuery:this.#e?.query??null})}}},(V,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.animationStarted=a.VERTICAL_PADDING=a.UNKNOWN_SCALE=a.TextLayerMode=a.SpreadMode=a.SidebarView=a.ScrollMode=a.SCROLLBAR_PADDING=a.RenderingStates=a.ProgressBar=a.PresentationModeState=a.OutputScale=a.MIN_SCALE=a.MAX_SCALE=a.MAX_AUTO_SCALE=a.DEFAULT_SCALE_VALUE=a.DEFAULT_SCALE_DELTA=a.DEFAULT_SCALE=a.CursorTool=a.AutoPrintRegExp=void 0,a.apiPageLayoutToViewerModes=function fe(X){let ne=d.VERTICAL,he=E.NONE;switch(X){case"SinglePage":ne=d.PAGE;break;case"OneColumn":break;case"TwoPageLeft":ne=d.PAGE;case"TwoColumnLeft":he=E.ODD;break;case"TwoPageRight":ne=d.PAGE;case"TwoColumnRight":he=E.EVEN}return{scrollMode:ne,spreadMode:he}},a.apiPageModeToSidebarView=function re(X){switch(X){case"UseNone":return u.NONE;case"UseThumbs":return u.THUMBS;case"UseOutlines":return u.OUTLINE;case"UseAttachments":return u.ATTACHMENTS;case"UseOC":return u.LAYERS}return u.NONE},a.approximateFraction=function y(X){if(Math.floor(X)===X)return[X,1];const ne=1/X;if(ne>8)return[1,8];if(Math.floor(ne)===ne)return[1,ne];const le=X>1?ne:X;let xe,pe=0,me=1,ve=1,ye=1;for(;;){const Ce=pe+ve,Be=me+ye;if(Be>8)break;le<=Ce/Be?(ve=Ce,ye=Be):(pe=Ce,me=Be)}return xe=le-pe/me<ve/ye-le?le===X?[pe,me]:[me,pe]:le===X?[ve,ye]:[ye,ve],xe},a.backtrackBeforeAllVisibleElements=_,a.binarySearchFirstItem=z,a.docStyle=void 0,a.getActiveOrFocusedElement=function ee(){let X=document,ne=X.activeElement||X.querySelector(":focus");for(;ne?.shadowRoot;)X=ne.shadowRoot,ne=X.activeElement||X.querySelector(":focus");return ne},a.getPageSizeInches=function f({view:X,userUnit:ne,rotate:he}){const[le,pe,me,ve]=X,ye=he%180!=0,xe=(me-le)/72*ne,Ce=(ve-pe)/72*ne;return{width:ye?Ce:xe,height:ye?xe:Ce}},a.getVisibleElements=function b({scrollEl:X,views:ne,sortByVisibility:he=!1,horizontal:le=!1,rtl:pe=!1}){const me=X.scrollTop,ve=me+X.clientHeight,ye=X.scrollLeft,xe=ye+X.clientWidth,Ie=[],Ue=new Set,Qe=ne.length;let Ze=z(ne,le?function Be(ie){const be=ie.div,we=be.offsetLeft+be.clientLeft;return pe?we<xe:we+be.clientWidth>ye}:function Ce(ie){const be=ie.div;return be.offsetTop+be.clientTop+be.clientHeight>me});Ze>0&&Ze<Qe&&!le&&(Ze=_(Ze,ne,me));let je=le?xe:-1;for(let ie=Ze;ie<Qe;ie++){const be=ne[ie],we=be.div,Me=we.offsetLeft+we.clientLeft,Le=we.offsetTop+we.clientTop,We=we.clientWidth,He=we.clientHeight,Ve=Me+We,Ne=Le+He;if(-1===je)Ne>=ve&&(je=Ne);else if((le?Me:Le)>je)break;if(Ne<=me||Le>=ve||Ve<=ye||Me>=xe)continue;const Ge=Math.max(0,me-Le)+Math.max(0,Ne-ve),Re=(We-(Math.max(0,ye-Me)+Math.max(0,Ve-xe)))/We;Ie.push({id:be.id,x:Me,y:Le,view:be,percent:(He-Ge)/He*Re*100|0,widthPercent:100*Re|0}),Ue.add(be.id)}const ge=Ie[0],ae=Ie.at(-1);return he&&Ie.sort(function(ie,be){const we=ie.percent-be.percent;return Math.abs(we)>.001?-we:ie.id-be.id}),{first:ge,last:ae,views:Ie,ids:Ue}},a.isPortraitOrientation=function k(X){return X.width<=X.height},a.isValidRotation=function I(X){return Number.isInteger(X)&&X%90==0},a.isValidScrollMode=function g(X){return Number.isInteger(X)&&Object.values(d).includes(X)&&X!==d.UNKNOWN},a.isValidSpreadMode=function P(X){return Number.isInteger(X)&&Object.values(E).includes(X)&&X!==E.UNKNOWN},a.normalizeWheelEventDelta=function O(X){const ne=X.deltaMode;let he=M(X);return ne===WheelEvent.DOM_DELTA_PIXEL?he/=900:ne===WheelEvent.DOM_DELTA_LINE&&(he/=30),he},a.normalizeWheelEventDirection=M,a.parseQueryString=function q(X){const ne=new Map;for(const[he,le]of new URLSearchParams(X))ne.set(he.toLowerCase(),le);return ne},a.removeNullCharacters=function te(X,ne=!1){return"string"!=typeof X?(console.error("The argument must be a string."),X):(ne&&(X=X.replaceAll(se," ")),X.replaceAll("\0",""))},a.roundToDivide=function s(X,ne){const he=X%ne;return 0===he?X:Math.round(X-he+ne)},a.scrollIntoView=function $(X,ne,he=!1){let le=X.offsetParent;if(!le)return void console.error("offsetParent is not set -- cannot scroll");let pe=X.offsetTop+X.clientTop,me=X.offsetLeft+X.clientLeft;for(;le.clientHeight===le.scrollHeight&&le.clientWidth===le.scrollWidth||he&&(le.classList.contains("markedContent")||"hidden"===getComputedStyle(le).overflow);)if(pe+=le.offsetTop,me+=le.offsetLeft,le=le.offsetParent,!le)return;ne&&(void 0!==ne.top&&(pe+=ne.top),void 0!==ne.left&&(me+=ne.left,le.scrollLeft=me)),le.scrollTop=pe},a.toggleCheckedBtn=function ce(X,ne,he=null){X.classList.toggle("toggled",ne),X.setAttribute("aria-checked",ne),he?.classList.toggle("hidden",!ne)},a.toggleExpandedBtn=function de(X,ne,he=null){X.classList.toggle("toggled",ne),X.setAttribute("aria-expanded",ne),he?.classList.toggle("hidden",!ne)},a.watchScroll=function j(X,ne){const he=function(me){pe||(pe=window.requestAnimationFrame(function(){pe=null;const ye=X.scrollLeft,xe=le.lastX;ye!==xe&&(le.right=ye>xe),le.lastX=ye;const Ce=X.scrollTop,Be=le.lastY;Ce!==Be&&(le.down=Ce>Be),le.lastY=Ce,ne(le)}))},le={right:!0,down:!0,lastX:X.scrollLeft,lastY:X.scrollTop,_eventHandler:he};let pe=null;return X.addEventListener("scroll",he,!0),le},a.DEFAULT_SCALE_VALUE="auto",a.DEFAULT_SCALE=1,a.DEFAULT_SCALE_DELTA=1.1,a.MIN_SCALE=.1,a.MAX_SCALE=10,a.UNKNOWN_SCALE=0,a.MAX_AUTO_SCALE=1.25,a.SCROLLBAR_PADDING=40,a.VERTICAL_PADDING=5,a.RenderingStates={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},a.PresentationModeState={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};const u={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};a.SidebarView=u,a.TextLayerMode={DISABLE:0,ENABLE:1,ENABLE_PERMISSIONS:2};const d={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3};a.ScrollMode=d;const E={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};a.SpreadMode=E,a.CursorTool={SELECT:0,HAND:1,ZOOM:2},a.AutoPrintRegExp=/\bprint\s*\(/,a.OutputScale=class C{constructor(){const ne=window.devicePixelRatio||1;this.sx=ne,this.sy=ne}get scaled(){return 1!==this.sx||1!==this.sy}};const se=/[\x01-\x1F]/g;function z(X,ne,he=0){let le=he,pe=X.length-1;if(pe<0||!ne(X[pe]))return X.length;if(ne(X[le]))return le;for(;le<pe;){const me=le+pe>>1;ne(X[me])?pe=me:le=me+1}return le}function _(X,ne,he){if(X<2)return X;let le=ne[X].div,pe=le.offsetTop+le.clientTop;pe>=he&&(le=ne[X-1].div,pe=le.offsetTop+le.clientTop);for(let me=X-2;me>=0&&(le=ne[me].div,!(le.offsetTop+le.clientTop+le.clientHeight<=pe));--me)X=me;return X}function M(X){let ne=Math.hypot(X.deltaX,X.deltaY);const he=Math.atan2(X.deltaY,X.deltaX);return-.25*Math.PI<he&&he<.75*Math.PI&&(ne=-ne),ne}const F=new Promise(function(X){window.requestAnimationFrame(X)});a.animationStarted=F;const B=document.documentElement.style;a.docStyle=B,a.ProgressBar=class Y{#e=null;#t=null;#n=0;#i=null;#o=!0;constructor(ne){this.#e=ne.classList,this.#i=ne.style}get percent(){return this.#n}set percent(ne){this.#n=function H(X,ne,he){return Math.min(Math.max(X,ne),he)}(ne,0,100),isNaN(ne)?this.#e.add("indeterminate"):(this.#e.remove("indeterminate"),this.#i.setProperty("--progressBar-percent",`${this.#n}%`))}setWidth(ne){if(!ne)return;const le=ne.parentNode.offsetWidth-ne.offsetWidth;le>0&&this.#i.setProperty("--progressBar-end-offset",`${le}px`)}setDisableAutoFetch(ne=5e3){isNaN(this.#n)||(this.#t&&clearTimeout(this.#t),this.show(),this.#t=setTimeout(()=>{this.#t=null,this.hide()},ne))}hide(){this.#o&&(this.#o=!1,this.#e.add("hidden"))}show(){this.#o||(this.#o=!0,this.#e.remove("hidden"))}}},(V,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CharacterType=void 0,a.getCharacterType=function u(E){return function t(E){return E<11904}(E)?function n(E){return!(65408&E)}(E)?function e(E){return 32===E||9===E||13===E||10===E}(E)?r.SPACE:function p(E){return E>=97&&E<=122||E>=65&&E<=90}(E)||function l(E){return E>=48&&E<=57}(E)||95===E?r.ALPHA_LETTER:r.PUNCT:function S(E){return 3584==(65408&E)}(E)?r.THAI_LETTER:160===E?r.SPACE:r.ALPHA_LETTER:function i(E){return E>=13312&&E<=40959||E>=63744&&E<=64255}(E)?r.HAN_LETTER:function o(E){return E>=12448&&E<=12543}(E)?r.KATAKANA_LETTER:function c(E){return E>=12352&&E<=12447}(E)?r.HIRAGANA_LETTER:function w(E){return E>=65376&&E<=65439}(E)?r.HALFWIDTH_KATAKANA_LETTER:r.ALPHA_LETTER},a.getNormalizeWithNFKC=function d(){return v||="\xa0\xa8\xaa\xaf\xb2-\xb5\xb8-\xba\xbc-\xbe\u0132-\u0133\u013f-\u0140\u0149\u017f\u01c4-\u01cc\u01f1-\u01f3\u02b0-\u02b8\u02d8-\u02dd\u02e0-\u02e4\u0374\u037a\u037e\u0384-\u0385\u0387\u03d0-\u03d6\u03f0-\u03f2\u03f4-\u03f5\u03f9\u0587\u0675-\u0678\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e33\u0eb3\u0edc-\u0edd\u0f0c\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u10fc\u1d2c-\u1d2e\u1d30-\u1d3a\u1d3c-\u1d4d\u1d4f-\u1d6a\u1d78\u1d9b-\u1dbf\u1e9a-\u1e9b\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbd-\u1fc1\u1fc9\u1fcb\u1fcd-\u1fcf\u1fd3\u1fdb\u1fdd-\u1fdf\u1fe3\u1feb\u1fed-\u1fef\u1ff9\u1ffb\u1ffd-\u1ffe\u2000-\u200a\u2011\u2017\u2024-\u2026\u202f\u2033-\u2034\u2036-\u2037\u203c\u203e\u2047-\u2049\u2057\u205f\u2070-\u2071\u2074-\u208e\u2090-\u209c\u20a8\u2100-\u2103\u2105-\u2107\u2109-\u2113\u2115-\u2116\u2119-\u211d\u2120-\u2122\u2124\u2126\u2128\u212a-\u212d\u212f-\u2131\u2133-\u2139\u213b-\u2140\u2145-\u2149\u2150-\u217f\u2189\u222c-\u222d\u222f-\u2230\u2329-\u232a\u2460-\u24ea\u2a0c\u2a74-\u2a76\u2adc\u2c7c-\u2c7d\u2d6f\u2e9f\u2ef3\u2f00-\u2fd5\u3000\u3036\u3038-\u303a\u309b-\u309c\u309f\u30ff\u3131-\u318e\u3192-\u319f\u3200-\u321e\u3220-\u3247\u3250-\u327e\u3280-\u33ff\ua69c-\ua69d\ua770\ua7f2-\ua7f4\ua7f8-\ua7f9\uab5c-\uab5f\uab69\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfc\ufe10-\ufe19\ufe30-\ufe44\ufe47-\ufe52\ufe54-\ufe66\ufe68-\ufe6b\ufe70-\ufe72\ufe74\ufe76-\ufefc\uff01-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc\uffe0-\uffe6",v};const r={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};let v;a.CharacterType=r},V=>{V.exports=globalThis.pdfjsLib},(V,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SimpleLinkService=a.PDFLinkService=a.LinkTarget=void 0;var t=r(2);const p={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};function l(o,{url:c,target:w,rel:S,enabled:u=!0}={}){if(!c||"string"!=typeof c)throw new Error('A valid "url" parameter must provided.');u?o.href=o.title=c:(o.href="",o.title=`Disabled: ${c}`,o.onclick=()=>!1);let v="";switch(w){case p.NONE:break;case p.SELF:v="_self";break;case p.BLANK:v="_blank";break;case p.PARENT:v="_parent";break;case p.TOP:v="_top"}o.target=v,o.rel="string"==typeof S?S:"noopener noreferrer nofollow"}a.LinkTarget=p;class e{#e=new Map;constructor({eventBus:c,externalLinkTarget:w=null,externalLinkRel:S=null,ignoreDestinationZoom:u=!1}={}){this.eventBus=c,this.externalLinkTarget=w,this.externalLinkRel=S,this.externalLinkEnabled=!0,this._ignoreDestinationZoom=u,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(c,w=null){this.baseUrl=w,this.pdfDocument=c,this.#e.clear()}setViewer(c){this.pdfViewer=c}setHistory(c){this.pdfHistory=c}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(c){this.pdfViewer.currentPageNumber=c}get rotation(){return this.pdfViewer.pagesRotation}set rotation(c){this.pdfViewer.pagesRotation=c}get isInPresentationMode(){return this.pdfViewer.isInPresentationMode}#t(c,w=null,S){const u=S[0];let v;if("object"==typeof u&&null!==u){if(v=this._cachedPageNumber(u),!v)return void this.pdfDocument.getPageIndex(u).then(d=>{this.cachePageRef(d+1,u),this.#t(c,w,S)}).catch(()=>{console.error(`PDFLinkService.#goToDestinationHelper: "${u}" is not a valid page reference, for dest="${c}".`)})}else{if(!Number.isInteger(u))return void console.error(`PDFLinkService.#goToDestinationHelper: "${u}" is not a valid destination reference, for dest="${c}".`);v=u+1}!v||v<1||v>this.pagesCount?console.error(`PDFLinkService.#goToDestinationHelper: "${v}" is not a valid page number, for dest="${c}".`):(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:w,explicitDest:S,pageNumber:v})),this.pdfViewer.scrollPageIntoView({pageNumber:v,destArray:S,ignoreDestinationZoom:this._ignoreDestinationZoom}))}goToDestination(c){var w=this;return h(function*(){if(!w.pdfDocument)return;let S,u;"string"==typeof c?(S=c,u=yield w.pdfDocument.getDestination(c)):(S=null,u=yield c),Array.isArray(u)?w.#t(c,S,u):console.error(`PDFLinkService.goToDestination: "${u}" is not a valid destination array, for dest="${c}".`)})()}goToPage(c){if(!this.pdfDocument)return;const w="string"==typeof c&&this.pdfViewer.pageLabelToPageNumber(c)||0|c;Number.isInteger(w)&&w>0&&w<=this.pagesCount?(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(w)),this.pdfViewer.scrollPageIntoView({pageNumber:w})):console.error(`PDFLinkService.goToPage: "${c}" is not a valid page.`)}addLinkAttributes(c,w,S=!1){l(c,{url:w,target:S?p.BLANK:this.externalLinkTarget,rel:this.externalLinkRel,enabled:this.externalLinkEnabled})}getDestinationHash(c){if("string"==typeof c){if(c.length>0)return this.getAnchorUrl("#"+escape(c))}else if(Array.isArray(c)){const w=JSON.stringify(c);if(w.length>0)return this.getAnchorUrl("#"+escape(w))}return this.getAnchorUrl("")}getAnchorUrl(c){return this.baseUrl?this.baseUrl+c:c}setHash(c){if(!this.pdfDocument)return;let w,S;if(c.includes("=")){const u=(0,t.parseQueryString)(c);if(u.has("search")){const v=u.get("search").replaceAll('"',""),d="true"===u.get("phrase");this.eventBus.dispatch("findfromurlhash",{source:this,query:d?v:v.match(/\S+/g)})}if(u.has("page")&&(w=0|u.get("page")||1),u.has("zoom")){const v=u.get("zoom").split(","),d=v[0],E=parseFloat(d);d.includes("Fit")?"Fit"===d||"FitB"===d?S=[null,{name:d}]:"FitH"===d||"FitBH"===d||"FitV"===d||"FitBV"===d?S=[null,{name:d},v.length>1?0|v[1]:null]:"FitR"===d?5!==v.length?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):S=[null,{name:d},0|v[1],0|v[2],0|v[3],0|v[4]]:console.error(`PDFLinkService.setHash: "${d}" is not a valid zoom value.`):S=[null,{name:"XYZ"},v.length>1?0|v[1]:null,v.length>2?0|v[2]:null,E?E/100:d]}S?this.pdfViewer.scrollPageIntoView({pageNumber:w||this.page,destArray:S,allowNegativeOffset:!0}):w&&(this.page=w),u.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:u.get("pagemode")}),u.has("nameddest")&&this.goToDestination(u.get("nameddest"))}else{S=unescape(c);try{S=JSON.parse(S),Array.isArray(S)||(S=S.toString())}catch{}if("string"==typeof S||e.#n(S))return void this.goToDestination(S);console.error(`PDFLinkService.setHash: "${unescape(c)}" is not a valid destination.`)}}executeNamedAction(c){switch(c){case"GoBack":this.pdfHistory?.back();break;case"GoForward":this.pdfHistory?.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}this.eventBus.dispatch("namedaction",{source:this,action:c})}executeSetOCGState(c){var w=this;return h(function*(){const S=w.pdfDocument,u=yield w.pdfViewer.optionalContentConfigPromise;if(S!==w.pdfDocument)return;let v;for(const d of c.state){switch(d){case"ON":case"OFF":case"Toggle":v=d;continue}switch(v){case"ON":u.setVisibility(d,!0);break;case"OFF":u.setVisibility(d,!1);break;case"Toggle":const E=u.getGroup(d);E&&u.setVisibility(d,!E.visible)}}w.pdfViewer.optionalContentConfigPromise=Promise.resolve(u)})()}cachePageRef(c,w){w&&this.#e.set(0===w.gen?`${w.num}R`:`${w.num}R${w.gen}`,c)}_cachedPageNumber(c){return c&&this.#e.get(0===c.gen?`${c.num}R`:`${c.num}R${c.gen}`)||null}static#n(c){if(!Array.isArray(c))return!1;const w=c.length;if(w<2)return!1;const S=c[0];if(!("object"==typeof S&&Number.isInteger(S.num)&&Number.isInteger(S.gen)||Number.isInteger(S)&&S>=0))return!1;const u=c[1];if("object"!=typeof u||"string"!=typeof u.name)return!1;let v=!0;switch(u.name){case"XYZ":if(5!==w)return!1;break;case"Fit":case"FitB":return 2===w;case"FitH":case"FitBH":case"FitV":case"FitBV":if(3!==w)return!1;break;case"FitR":if(6!==w)return!1;v=!1;break;default:return!1}for(let d=2;d<w;d++){const E=c[d];if(!("number"==typeof E||v&&null===E))return!1}return!0}}a.PDFLinkService=e,a.SimpleLinkService=class i{constructor(){this.externalLinkEnabled=!0}get pagesCount(){return 0}get page(){return 0}set page(c){}get rotation(){return 0}set rotation(c){}get isInPresentationMode(){return!1}goToDestination(c){return h(function*(){})()}goToPage(c){}addLinkAttributes(c,w,S=!1){l(c,{url:w,enabled:this.externalLinkEnabled})}getDestinationHash(c){return"#"}getAnchorUrl(c){return"#"}setHash(c){}executeNamedAction(c){}executeSetOCGState(c){}cachePageRef(c,w){}}},(V,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.AnnotationLayerBuilder=void 0;var t=r(4),n=r(7),p=r(2);a.AnnotationLayerBuilder=class l{#e=null;constructor({pageDiv:i,pdfPage:o,linkService:c,downloadManager:w,annotationStorage:S=null,imageResourcesPath:u="",renderForms:v=!0,l10n:d=n.NullL10n,enableScripting:E=!1,hasJSActionsPromise:T=null,fieldObjectsPromise:U=null,annotationCanvasMap:C=null,accessibilityManager:$=null}){this.pageDiv=i,this.pdfPage=o,this.linkService=c,this.downloadManager=w,this.imageResourcesPath=u,this.renderForms=v,this.l10n=d,this.annotationStorage=S,this.enableScripting=E,this._hasJSActionsPromise=T||Promise.resolve(!1),this._fieldObjectsPromise=U||Promise.resolve(null),this._annotationCanvasMap=C,this._accessibilityManager=$,this.annotationLayer=null,this.div=null,this._cancelled=!1,this._eventBus=c.eventBus}render(i,o="display"){var c=this;return h(function*(){if(c.div){if(c._cancelled||!c.annotationLayer)return;return void c.annotationLayer.update({viewport:i.clone({dontFlip:!0})})}const[w,S,u]=yield Promise.all([c.pdfPage.getAnnotations({intent:o}),c._hasJSActionsPromise,c._fieldObjectsPromise]);if(c._cancelled)return;const v=c.div=document.createElement("div");v.className="annotationLayer",c.pageDiv.append(v),0!==w.length?(c.annotationLayer=new t.AnnotationLayer({div:v,accessibilityManager:c._accessibilityManager,annotationCanvasMap:c._annotationCanvasMap,l10n:c.l10n,page:c.pdfPage,viewport:i.clone({dontFlip:!0})}),yield c.annotationLayer.render({annotations:w,imageResourcesPath:c.imageResourcesPath,renderForms:c.renderForms,linkService:c.linkService,downloadManager:c.downloadManager,annotationStorage:c.annotationStorage,enableScripting:c.enableScripting,hasJSActions:S,fieldObjects:u}),c.linkService.isInPresentationMode&&c.#t(p.PresentationModeState.FULLSCREEN),c.#e||(c.#e=d=>{c.#t(d.state)},c._eventBus?._on("presentationmodechanged",c.#e))):c.hide()})()}cancel(){this._cancelled=!0,this.#e&&(this._eventBus?._off("presentationmodechanged",this.#e),this.#e=null)}hide(){this.div&&(this.div.hidden=!0)}#t(i){if(!this.div)return;let o=!1;switch(i){case p.PresentationModeState.FULLSCREEN:o=!0;break;case p.PresentationModeState.NORMAL:break;default:return}for(const c of this.div.childNodes)c.hasAttribute("data-internal-link")||(c.inert=o)}}},(V,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.NullL10n=void 0,a.getL10nFallback=t;const r={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} \xd7 {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} \xd7 {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing\u2026",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};function t(l,e){switch(l){case"find_match_count":l=`find_match_count[${1===e.total?"one":"other"}]`;break;case"find_match_count_limit":l=`find_match_count_limit[${1===e.limit?"one":"other"}]`}return r[l]||""}r.print_progress_percent="{{progress}}%",a.NullL10n={getLanguage:()=>h(function*(){return"en-us"})(),getDirection:()=>h(function*(){return"ltr"})(),get:(l,e=null,i=t(l,e))=>h(function*(){return function n(l,e){return e?l.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(i,o)=>o in e?e[o]:"{{"+o+"}}"):l}(i,e)})(),translate:l=>h(function*(){})()}},(V,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DownloadManager=void 0;var t=r(4);function n(l,e){const i=document.createElement("a");if(!i.click)throw new Error('DownloadManager: "a.click()" is not supported.');i.href=l,i.target="_parent","download"in i&&(i.download=e),(document.body||document.documentElement).append(i),i.click(),i.remove()}a.DownloadManager=class p{#e=new WeakMap;downloadUrl(e,i,o){(0,t.createValidAbsoluteUrl)(e,"http://example.com")?n(e+"#pdfjs.action=download",i):console.error(`downloadUrl - not a valid URL: ${e}`)}downloadData(e,i,o){n(URL.createObjectURL(new Blob([e],{type:o})),i)}openOrDownloadData(e,i,o){const w=(0,t.isPdfFile)(o)?"application/pdf":"";return this.downloadData(i,o,w),!1}download(e,i,o,c){n(URL.createObjectURL(e),o)}}},(V,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.WaitOnType=a.EventBus=a.AutomationEventBus=void 0,a.waitOnEventOrTimeout=function t({target:l,name:e,delay:i=0}){return new Promise(function(o,c){if("object"!=typeof l||!e||"string"!=typeof e||!(Number.isInteger(i)&&i>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function w(d){l instanceof n?l._off(e,S):l.removeEventListener(e,S),v&&clearTimeout(v),o(d)}const S=w.bind(null,r.EVENT);l instanceof n?l._on(e,S):l.addEventListener(e,S);const u=w.bind(null,r.TIMEOUT),v=setTimeout(u,i)})};const r={EVENT:"event",TIMEOUT:"timeout"};a.WaitOnType=r;class n{#e=Object.create(null);on(e,i,o=null){this._on(e,i,{external:!0,once:o?.once})}off(e,i,o=null){this._off(e,i,{external:!0,once:o?.once})}dispatch(e,i){const o=this.#e[e];if(!o||0===o.length)return;let c;for(const{listener:w,external:S,once:u}of o.slice(0))u&&this._off(e,w),S?(c||=[]).push(w):w(i);if(c){for(const w of c)w(i);c=null}}_on(e,i,o=null){(this.#e[e]||=[]).push({listener:i,external:!0===o?.external,once:!0===o?.once})}_off(e,i,o=null){const c=this.#e[e];if(c)for(let w=0,S=c.length;w<S;w++)if(c[w].listener===i)return void c.splice(w,1)}}a.EventBus=n,a.AutomationEventBus=class p extends n{dispatch(e,i){throw new Error("Not implemented: AutomationEventBus.dispatch")}}},(V,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.GenericL10n=void 0,r(11);var t=r(7);const n={en:"en-US",es:"es-ES",fy:"fy-NL",ga:"ga-IE",gu:"gu-IN",hi:"hi-IN",hy:"hy-AM",nb:"nb-NO",ne:"ne-NP",nn:"nn-NO",pa:"pa-IN",pt:"pt-PT",sv:"sv-SE",zh:"zh-CN"};a.GenericL10n=class l{constructor(i){const{webL10n:o}=document;this._lang=i,this._ready=new Promise((c,w)=>{o.setLanguage(function p(e){return n[e?.toLowerCase()]||e}(i),()=>{c(o)})})}getLanguage(){var i=this;return h(function*(){return(yield i._ready).getLanguage()})()}getDirection(){var i=this;return h(function*(){return(yield i._ready).getDirection()})()}get(i,o=null,c=(0,t.getL10nFallback)(i,o)){var w=this;return h(function*(){return(yield w._ready).get(i,o,c)})()}translate(i){var o=this;return h(function*(){return(yield o._ready).translate(i)})()}}},()=>{document.webL10n=function(V,a){var r={},t="",n="textContent",p="",l={},e="loading",i=!0;function u(te,z,y){z=z||function(_){},y=y||function(){};var s=new XMLHttpRequest;s.open("GET",te,i),s.overrideMimeType&&s.overrideMimeType("text/plain; charset=utf-8"),s.onreadystatechange=function(){4==s.readyState&&(200==s.status||0===s.status?z(s.responseText):y())},s.onerror=y,s.ontimeout=y;try{s.send(null)}catch{y()}}function d(te,z){te&&(te=te.toLowerCase()),z=z||function(){},function E(){r={},t="",p=""}(),p=te;var y=function o(){return a.querySelectorAll('link[type="application/l10n"]')}(),s=y.length;if(0!==s){var M,O=0;M=function(){++O>=s&&(z(),e="complete")};for(var g=0;g<s;g++)new I(y[g]).load(te,M)}else{var f=function c(){var te=a.querySelector('script[type="application/l10n"]');return te?JSON.parse(te.innerHTML):null}();if(f&&f.locales&&f.default_locale){if(console.log("using the embedded JSON directory, early way out"),!(r=f.locales[te])){var _=f.default_locale.toLowerCase();for(var b in f.locales){if((b=b.toLowerCase())===te){r=f.locales[te];break}b===_&&(r=f.locales[_])}}z()}else console.log("no resource to load, early way out");e="complete"}function I(k){var F=k.href;this.load=function(B,H){!function v(te,z,y,s){var f=te.replace(/[^\/]*$/,"")||"./";function _(M){return M.lastIndexOf("\\")<0?M:M.replace(/\\\\/g,"\\").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}u(te,function(M){t+=M,function b(M,O){var I={},g=/^\s*|\s*$/,P=/^\s*#|^\s*$/,k=/^\s*\[(.*)\]\s*$/,F=/^\s*@import\s+url\((.*)\)\s*$/i,B=/^([^=\s]*)\s*=\s*(.+)$/;function H(ee,fe,re){var ce=ee.replace(g,"").split(/[\r\n]+/),de="*",X=z.split("-",1)[0],ne=!1,he="";!function le(){for(;;){if(!ce.length)return void re();var pe=ce.shift();if(!P.test(pe)){if(fe){if(he=k.exec(pe)){de=he[1].toLowerCase(),ne="*"!==de&&de!==z&&de!==X;continue}if(ne)continue;if(he=F.exec(pe))return void Y(f+he[1],le)}var me=pe.match(B);me&&3==me.length&&(I[me[1]]=_(me[2]))}}}()}function Y(ee,fe){u(ee,function(re){H(re,!1,fe)},function(){console.warn(ee+" not found."),fe()})}H(M,!0,function(){O(I)})}(M,function(O){for(var I in O){var g,P,k=I.lastIndexOf(".");k>0?(g=I.substring(0,k),P=I.substring(k+1)):(g=I,P=n),r[g]||(r[g]={}),r[g][P]=O[I]}y&&y()})},s)}(F,B,H,function(){console.warn(F+" not found."),console.warn('"'+B+'" resource not found'),p="",H()})}}}function U(te,z,y){var s=r[te];if(!s){if(console.warn("#"+te+" is undefined."),!y)return null;s=y}var f={};for(var _ in s){var b=s[_];b=$(b=C(b,z,te,_),z,te),f[_]=b}return f}function C(te,z,y,s){var _=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/.exec(te);if(!_||!_.length)return te;var O,b=_[1],M=_[2];return z&&M in z?O=z[M]:M in r&&(O=r[M]),b in l&&(te=(0,l[b])(te,O,y,s)),te}function $(te,z,y){return te.replace(/\{\{\s*(.+?)\s*\}\}/g,function(f,_){return z&&_ in z?z[_]:_ in r?r[_]:(console.log("argument {{"+_+"}} for #"+y+" is undefined."),f)})}function j(te){var z=function S(te){if(!te)return{};var z=te.getAttribute("data-l10n-id"),y=te.getAttribute("data-l10n-args"),s={};if(y)try{s=JSON.parse(y)}catch{console.warn("could not parse arguments for #"+z)}return{id:z,args:s}}(te);if(z.id){var y=U(z.id,z.args);if(!y)return void console.warn("#"+z.id+" is undefined.");if(y[n]){if(0===function q(te){if(te.children)return te.children.length;if(typeof te.childElementCount<"u")return te.childElementCount;for(var z=0,y=0;y<te.childNodes.length;y++)z+=1===te.nodeType?1:0;return z}(te))te[n]=y[n];else{for(var s=te.childNodes,f=!1,_=0,b=s.length;_<b;_++)3===s[_].nodeType&&/\S/.test(s[_].nodeValue)&&(f?s[_].nodeValue="":(s[_].nodeValue=y[n],f=!0));if(!f){var M=a.createTextNode(y[n]);te.prepend(M)}}delete y[n]}for(var O in y)te[O]=y[O]}}return l.plural=function(te,z,y,s){var f=parseFloat(z);if(isNaN(f)||s!=n)return te;l._pluralRules||(l._pluralRules=function T(te){function y(b,M){return-1!==M.indexOf(b)}function s(b,M,O){return M<=b&&b<=O}var f={0:function(b){return"other"},1:function(b){return s(b%100,3,10)?"few":0===b?"zero":s(b%100,11,99)?"many":2==b?"two":1==b?"one":"other"},2:function(b){return 0!==b&&b%10==0?"many":2==b?"two":1==b?"one":"other"},3:function(b){return 1==b?"one":"other"},4:function(b){return s(b,0,1)?"one":"other"},5:function(b){return s(b,0,2)&&2!=b?"one":"other"},6:function(b){return 0===b?"zero":b%10==1&&b%100!=11?"one":"other"},7:function(b){return 2==b?"two":1==b?"one":"other"},8:function(b){return s(b,3,6)?"few":s(b,7,10)?"many":2==b?"two":1==b?"one":"other"},9:function(b){return 0===b||1!=b&&s(b%100,1,19)?"few":1==b?"one":"other"},10:function(b){return s(b%10,2,9)&&!s(b%100,11,19)?"few":b%10!=1||s(b%100,11,19)?"other":"one"},11:function(b){return s(b%10,2,4)&&!s(b%100,12,14)?"few":b%10==0||s(b%10,5,9)||s(b%100,11,14)?"many":b%10==1&&b%100!=11?"one":"other"},12:function(b){return s(b,2,4)?"few":1==b?"one":"other"},13:function(b){return s(b%10,2,4)&&!s(b%100,12,14)?"few":1!=b&&s(b%10,0,1)||s(b%10,5,9)||s(b%100,12,14)?"many":1==b?"one":"other"},14:function(b){return s(b%100,3,4)?"few":b%100==2?"two":b%100==1?"one":"other"},15:function(b){return 0===b||s(b%100,2,10)?"few":s(b%100,11,19)?"many":1==b?"one":"other"},16:function(b){return b%10==1&&11!=b?"one":"other"},17:function(b){return 3==b?"few":0===b?"zero":6==b?"many":2==b?"two":1==b?"one":"other"},18:function(b){return 0===b?"zero":s(b,0,2)&&0!==b&&2!=b?"one":"other"},19:function(b){return s(b,2,10)?"few":s(b,0,1)?"one":"other"},20:function(b){return!s(b%10,3,4)&&b%10!=9||s(b%100,10,19)||s(b%100,70,79)||s(b%100,90,99)?b%1e6==0&&0!==b?"many":b%10!=2||y(b%100,[12,72,92])?b%10!=1||y(b%100,[11,71,91])?"other":"one":"two":"few"},21:function(b){return 0===b?"zero":1==b?"one":"other"},22:function(b){return s(b,0,1)||s(b,11,99)?"one":"other"},23:function(b){return s(b%10,1,2)||b%20==0?"one":"other"},24:function(b){return s(b,3,10)||s(b,13,19)?"few":y(b,[2,12])?"two":y(b,[1,11])?"one":"other"}},_={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3}[te.replace(/-.*$/,"")];return _ in f?f[_]:(console.warn("plural form unknown for ["+te+"]"),function(){return"other"})}(p));var _="["+l._pluralRules(f)+"]";return 0===f&&y+"[zero]"in r?te=r[y+"[zero]"][s]:1==f&&y+"[one]"in r?te=r[y+"[one]"][s]:2==f&&y+"[two]"in r?te=r[y+"[two]"][s]:y+_ in r?te=r[y+_][s]:y+"[other]"in r&&(te=r[y+"[other]"][s]),te},{get:function(te,z,y){var _,s=te.lastIndexOf("."),f=n;s>0&&(f=te.substring(s+1),te=te.substring(0,s)),y&&((_={})[f]=y);var b=U(te,z,_);return b&&f in b?b[f]:"{{"+te+"}}"},getData:function(){return r},getText:function(){return t},getLanguage:function(){return p},setLanguage:function(te,z){d(te,function(){z&&z()})},getDirection:function(){var z=p.split("-",1)[0];return["ar","he","fa","ps","ur"].indexOf(z)>=0?"rtl":"ltr"},translate:function se(te){for(var z=function w(te){return te?te.querySelectorAll("*[data-l10n-id]"):[]}(te=te||a.documentElement),y=z.length,s=0;s<y;s++)j(z[s]);j(te)},getReadyState:function(){return e},ready:function(te){te&&("complete"==e||"interactive"==e?V.setTimeout(function(){te()}):a.addEventListener&&a.addEventListener("localized",function z(){a.removeEventListener("localized",z),te()}))}}}(window,document)},(V,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PDFHistory=void 0,a.isDestArraysEqual=w,a.isDestHashesEqual=c;var t=r(2),n=r(9);function i(){return document.location.hash}function c(S,u){return"string"==typeof S&&"string"==typeof u&&(S===u||(0,t.parseQueryString)(S).get("nameddest")===u)}function w(S,u){function v(d,E){if(typeof d!=typeof E||Array.isArray(d)||Array.isArray(E))return!1;if(null!==d&&"object"==typeof d&&null!==E){if(Object.keys(d).length!==Object.keys(E).length)return!1;for(const T in d)if(!v(d[T],E[T]))return!1;return!0}return d===E||Number.isNaN(d)&&Number.isNaN(E)}if(!Array.isArray(S)||!Array.isArray(u)||S.length!==u.length)return!1;for(let d=0,E=S.length;d<E;d++)if(!v(S[d],u[d]))return!1;return!0}a.PDFHistory=class o{constructor({linkService:u,eventBus:v}){this.linkService=u,this.eventBus=v,this._initialized=!1,this._fingerprint="",this.reset(),this._boundEvents=null,this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",d=>{this._isPagesLoaded=!!d.pagesCount},{once:!0})})}initialize({fingerprint:u,resetHistory:v=!1,updateUrl:d=!1}){if(!u||"string"!=typeof u)return void console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');this._initialized&&this.reset();const E=""!==this._fingerprint&&this._fingerprint!==u;this._fingerprint=u,this._updateUrl=!0===d,this._initialized=!0,this._bindEvents();const T=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=i(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this._isValidState(T,!0)||v){const{hash:C,page:$,rotation:j}=this._parseCurrentHash(!0);return!C||E||v?void this._pushOrReplaceState(null,!0):void this._pushOrReplaceState({hash:C,page:$,rotation:j},!0)}const U=T.destination;this._updateInternalState(U,T.uid,!0),void 0!==U.rotation&&(this._initialRotation=U.rotation),U.dest?(this._initialBookmark=JSON.stringify(U.dest),this._destination.page=null):U.hash?this._initialBookmark=U.hash:U.page&&(this._initialBookmark=`page=${U.page}`)}reset(){this._initialized&&(this._pageHide(),this._initialized=!1,this._unbindEvents()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:u=null,explicitDest:v,pageNumber:d}){if(!this._initialized)return;if(u&&"string"!=typeof u)return void console.error(`PDFHistory.push: "${u}" is not a valid namedDest parameter.`);if(!Array.isArray(v))return void console.error(`PDFHistory.push: "${v}" is not a valid explicitDest parameter.`);if(!this._isValidPage(d)&&(null!==d||this._destination))return void console.error(`PDFHistory.push: "${d}" is not a valid pageNumber parameter.`);const E=u||JSON.stringify(v);if(!E)return;let T=!1;if(this._destination&&(c(this._destination.hash,E)||w(this._destination.dest,v))){if(this._destination.page)return;T=!0}this._popStateInProgress&&!T||(this._pushOrReplaceState({dest:v,hash:E,page:d,rotation:this.linkService.rotation},T),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}pushPage(u){if(this._initialized){if(!this._isValidPage(u))return void console.error(`PDFHistory.pushPage: "${u}" is not a valid page number.`);this._destination?.page!==u&&(this._popStateInProgress||(this._pushOrReplaceState({dest:null,hash:`page=${u}`,page:u,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1}))))}}pushCurrentPosition(){!this._initialized||this._popStateInProgress||this._tryPushCurrentPosition()}back(){if(!this._initialized||this._popStateInProgress)return;const u=window.history.state;this._isValidState(u)&&u.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const u=window.history.state;this._isValidState(u)&&u.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}_pushOrReplaceState(u,v=!1){const d=v||!this._destination,E={fingerprint:this._fingerprint,uid:d?this._uid:this._uid+1,destination:u};let T;if(this._updateInternalState(u,E.uid),this._updateUrl&&u?.hash){const U=document.location.href.split("#")[0];U.startsWith("file://")||(T=`${U}#${u.hash}`)}d?window.history.replaceState(E,"",T):window.history.pushState(E,"",T)}_tryPushCurrentPosition(u=!1){if(!this._position)return;let v=this._position;if(u&&(v=Object.assign(Object.create(null),this._position),v.temporary=!0),!this._destination)return void this._pushOrReplaceState(v);if(this._destination.temporary)return void this._pushOrReplaceState(v,!0);if(this._destination.hash===v.hash||!this._destination.page&&this._numPositionUpdates<=50)return;let d=!1;if(this._destination.page>=v.first&&this._destination.page<=v.page){if(void 0!==this._destination.dest||!this._destination.first)return;d=!0}this._pushOrReplaceState(v,d)}_isValidPage(u){return Number.isInteger(u)&&u>0&&u<=this.linkService.pagesCount}_isValidState(u,v=!1){if(!u)return!1;if(u.fingerprint!==this._fingerprint){if(!v)return!1;{if("string"!=typeof u.fingerprint||u.fingerprint.length!==this._fingerprint.length)return!1;const[d]=performance.getEntriesByType("navigation");if("reload"!==d?.type)return!1}}return!(!Number.isInteger(u.uid)||u.uid<0||null===u.destination||"object"!=typeof u.destination)}_updateInternalState(u,v,d=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),d&&u?.temporary&&delete u.temporary,this._destination=u,this._uid=v,this._maxUid=Math.max(this._maxUid,v),this._numPositionUpdates=0}_parseCurrentHash(u=!1){const v=unescape(i()).substring(1),d=(0,t.parseQueryString)(v),E=d.get("nameddest")||"";let T=0|d.get("page");return(!this._isValidPage(T)||u&&E.length>0)&&(T=null),{hash:v,page:T,rotation:this.linkService.rotation}}_updateViewarea({location:u}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:u.pdfOpenParams.substring(1),page:this.linkService.page,first:u.pageNumber,rotation:u.rotation},!this._popStateInProgress&&(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||this._tryPushCurrentPosition(!0),this._updateViewareaTimeout=null},1e3))}_popState({state:u}){const v=i(),d=this._currentHash!==v;if(this._currentHash=v,!u){this._uid++;const{hash:T,page:U,rotation:C}=this._parseCurrentHash();return void this._pushOrReplaceState({hash:T,page:U,rotation:C},!0)}if(!this._isValidState(u))return;this._popStateInProgress=!0,d&&(this._blockHashChange++,(0,n.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:1e3}).then(()=>{this._blockHashChange--}));const E=u.destination;this._updateInternalState(E,u.uid,!0),(0,t.isValidRotation)(E.rotation)&&(this.linkService.rotation=E.rotation),E.dest?this.linkService.goToDestination(E.dest):E.hash?this.linkService.setHash(E.hash):E.page&&(this.linkService.page=E.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})}_pageHide(){(!this._destination||this._destination.temporary)&&this._tryPushCurrentPosition()}_bindEvents(){this._boundEvents||(this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)},this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea),window.addEventListener("popstate",this._boundEvents.popState),window.addEventListener("pagehide",this._boundEvents.pageHide))}_unbindEvents(){this._boundEvents&&(this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea),window.removeEventListener("popstate",this._boundEvents.popState),window.removeEventListener("pagehide",this._boundEvents.pageHide),this._boundEvents=null)}}},(V,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PDFPageView=void 0;var t=r(4),n=r(2),p=r(14),l=r(6),e=r(15),i=r(7),o=r(5),c=r(16),w=r(17),S=r(18),u=r(19),v=r(20);const d=e.compatibilityParams.maxCanvasPixels||16777216,E=()=>({annotationEditorUIManager:null,annotationStorage:null,downloadManager:null,enableScripting:!1,fieldObjectsPromise:null,findController:null,hasJSActionsPromise:null,get linkService(){return new o.SimpleLinkService}});a.PDFPageView=class T{#e=t.AnnotationMode.ENABLE_FORMS;#t=!1;#n=null;#i=null;#o=null;#r=null;#a=n.RenderingStates.INITIAL;#l=n.TextLayerMode.ENABLE;#c={directDrawing:!0,initialOptionalContent:!0,regularAnnotations:!0};#s=new WeakMap;constructor(C){const $=C.container,j=C.defaultViewport;this.id=C.id,this.renderingId="page"+this.id,this.#n=C.layerProperties||E,this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=C.scale||n.DEFAULT_SCALE,this.viewport=j,this.pdfPageRotate=j.rotation,this._optionalContentConfigPromise=C.optionalContentConfigPromise||null,this.#l=C.textLayerMode??n.TextLayerMode.ENABLE,this.#e=C.annotationMode??t.AnnotationMode.ENABLE_FORMS,this.imageResourcesPath=C.imageResourcesPath||"",this.isOffscreenCanvasSupported=C.isOffscreenCanvasSupported??!0,this.maxCanvasPixels=C.maxCanvasPixels??d,this.pageColors=C.pageColors||null,this.eventBus=C.eventBus,this.renderingQueue=C.renderingQueue,this.l10n=C.l10n||i.NullL10n,this.renderTask=null,this.resume=null,this._isStandalone=!this.renderingQueue?.hasViewer(),this._container=$,C.useOnlyCssZoom&&(console.error("useOnlyCssZoom was removed, please use `maxCanvasPixels = 0` instead."),this.maxCanvasPixels=0),this._annotationCanvasMap=null,this.annotationLayer=null,this.annotationEditorLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null;const q=document.createElement("div");if(q.className="page",q.setAttribute("data-page-number",this.id),q.setAttribute("role","region"),this.l10n.get("page_landmark",{page:this.id}).then(se=>{q.setAttribute("aria-label",se)}),this.div=q,this.#h(),$?.append(q),this._isStandalone){$?.style.setProperty("--scale-factor",this.scale*t.PixelsPerInch.PDF_TO_CSS_UNITS);const{optionalContentConfigPromise:se}=C;se&&se.then(te=>{se===this._optionalContentConfigPromise&&(this.#c.initialOptionalContent=te.hasInitialVisibility)})}}get renderingState(){return this.#a}set renderingState(C){if(C!==this.#a)switch(this.#a=C,this.#i&&(clearTimeout(this.#i),this.#i=null),C){case n.RenderingStates.PAUSED:this.div.classList.remove("loading");break;case n.RenderingStates.RUNNING:this.div.classList.add("loadingIcon"),this.#i=setTimeout(()=>{this.div.classList.add("loading"),this.#i=null},0);break;case n.RenderingStates.INITIAL:case n.RenderingStates.FINISHED:this.div.classList.remove("loadingIcon","loading")}}#h(){const{viewport:C}=this;if(this.pdfPage){if(this.#o===C.rotation)return;this.#o=C.rotation}(0,t.setLayerDimensions)(this.div,C,!0,!1)}setPdfPage(C){this._isStandalone&&("CanvasText"===this.pageColors?.foreground||"Canvas"===this.pageColors?.background)&&this._container?.style.setProperty("--hcm-highligh-filter",C.filterFactory.addHighlightHCMFilter("CanvasText","Canvas","HighlightText","Highlight")),this.pdfPage=C,this.pdfPageRotate=C.rotate,this.viewport=C.getViewport({scale:this.scale*t.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:(this.rotation+this.pdfPageRotate)%360}),this.#h(),this.reset()}destroy(){this.reset(),this.pdfPage?.cleanup()}get _textHighlighter(){return(0,t.shadow)(this,"_textHighlighter",new S.TextHighlighter({pageIndex:this.id-1,eventBus:this.eventBus,findController:this.#n().findController}))}#d(){var C=this;return h(function*(){let $=null;try{yield C.annotationLayer.render(C.viewport,"display")}catch(j){console.error(`#renderAnnotationLayer: "${j}".`),$=j}finally{C.eventBus.dispatch("annotationlayerrendered",{source:C,pageNumber:C.id,error:$})}})()}#f(){var C=this;return h(function*(){let $=null;try{yield C.annotationEditorLayer.render(C.viewport,"display")}catch(j){console.error(`#renderAnnotationEditorLayer: "${j}".`),$=j}finally{C.eventBus.dispatch("annotationeditorlayerrendered",{source:C,pageNumber:C.id,error:$})}})()}#p(){var C=this;return h(function*(){let $=null;try{const j=yield C.xfaLayer.render(C.viewport,"display");j?.textDivs&&C._textHighlighter&&C.#_(j.textDivs)}catch(j){console.error(`#renderXfaLayer: "${j}".`),$=j}finally{C.eventBus.dispatch("xfalayerrendered",{source:C,pageNumber:C.id,error:$})}})()}#g(){var C=this;return h(function*(){const{pdfPage:$,textLayer:j,viewport:q}=C;if(!j)return;let se=null;try{if(!j.renderingDone){const te=$.streamTextContent({includeMarkedContent:!0,disableNormalization:!0});j.setTextContentSource(te)}yield j.render(q)}catch(te){if(te instanceof t.AbortException)return;console.error(`#renderTextLayer: "${te}".`),se=te}C.eventBus.dispatch("textlayerrendered",{source:C,pageNumber:C.id,numTextDivs:j.numTextDivs,error:se}),C.#m()})()}#m(){var C=this;return h(function*(){if(!C.textLayer)return;C.structTreeLayer||=new c.StructTreeLayerBuilder;const $=yield C.structTreeLayer.renderingDone?null:C.pdfPage.getStructTree(),j=C.structTreeLayer?.render($);j&&C.canvas?.append(j),C.structTreeLayer?.show()})()}#_(C){var $=this;return h(function*(){const j=yield $.pdfPage.getTextContent(),q=[];for(const se of j.items)q.push(se.str);$._textHighlighter.setTextMapping(C,q),$._textHighlighter.enable()})()}_resetZoomLayer(C=!1){if(!this.zoomLayer)return;const $=this.zoomLayer.firstChild;this.#s.delete($),$.width=0,$.height=0,C&&this.zoomLayer.remove(),this.zoomLayer=null}reset({keepZoomLayer:C=!1,keepAnnotationLayer:$=!1,keepAnnotationEditorLayer:j=!1,keepXfaLayer:q=!1,keepTextLayer:se=!1}={}){this.cancelRendering({keepAnnotationLayer:$,keepAnnotationEditorLayer:j,keepXfaLayer:q,keepTextLayer:se}),this.renderingState=n.RenderingStates.INITIAL;const te=this.div,z=te.childNodes,y=C&&this.zoomLayer||null,s=$&&this.annotationLayer?.div||null,f=j&&this.annotationEditorLayer?.div||null,_=q&&this.xfaLayer?.div||null,b=se&&this.textLayer?.div||null;for(let M=z.length-1;M>=0;M--){const O=z[M];switch(O){case y:case s:case f:case _:case b:continue}O.remove()}te.removeAttribute("data-loaded"),s&&this.annotationLayer.hide(),f&&this.annotationEditorLayer.hide(),_&&this.xfaLayer.hide(),b&&this.textLayer.hide(),this.structTreeLayer?.hide(),y||(this.canvas&&(this.#s.delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer())}update({scale:C=0,rotation:$=null,optionalContentConfigPromise:j=null,drawingDelay:q=-1}){if(this.scale=C||this.scale,"number"==typeof $&&(this.rotation=$),j instanceof Promise&&(this._optionalContentConfigPromise=j,j.then(te=>{j===this._optionalContentConfigPromise&&(this.#c.initialOptionalContent=te.hasInitialVisibility)})),this.#c.directDrawing=!0,this.viewport=this.viewport.clone({scale:this.scale*t.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:(this.rotation+this.pdfPageRotate)%360}),this.#h(),this._isStandalone&&this._container?.style.setProperty("--scale-factor",this.viewport.scale),this.canvas){let te=!1;if(this.#t)if(0===this.maxCanvasPixels)te=!0;else if(this.maxCanvasPixels>0){const{width:y,height:s}=this.viewport,{sx:f,sy:_}=this.outputScale;te=(Math.floor(y)*f|0)*(Math.floor(s)*_|0)>this.maxCanvasPixels}const z=!te&&q>=0&&q<1e3;if(z||te){if(z&&this.renderingState!==n.RenderingStates.FINISHED&&(this.cancelRendering({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0,cancelExtraDelay:q}),this.renderingState=n.RenderingStates.FINISHED,this.#c.directDrawing=!1),this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0,redrawTextLayer:!z,hideTextLayer:z}),z)return;return void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this.#r})}!this.zoomLayer&&!this.canvas.hidden&&(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0})}cancelRendering({keepAnnotationLayer:C=!1,keepAnnotationEditorLayer:$=!1,keepXfaLayer:j=!1,keepTextLayer:q=!1,cancelExtraDelay:se=0}={}){this.renderTask&&(this.renderTask.cancel(se),this.renderTask=null),this.resume=null,this.textLayer&&(!q||!this.textLayer.div)&&(this.textLayer.cancel(),this.textLayer=null),this.structTreeLayer&&!this.textLayer&&(this.structTreeLayer=null),this.annotationLayer&&(!C||!this.annotationLayer.div)&&(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.annotationEditorLayer&&(!$||!this.annotationEditorLayer.div)&&(this.annotationEditorLayer.cancel(),this.annotationEditorLayer=null),this.xfaLayer&&(!j||!this.xfaLayer.div)&&(this.xfaLayer.cancel(),this.xfaLayer=null,this._textHighlighter?.disable())}cssTransform({target:C,redrawAnnotationLayer:$=!1,redrawAnnotationEditorLayer:j=!1,redrawXfaLayer:q=!1,redrawTextLayer:se=!1,hideTextLayer:te=!1}){if(!C.hasAttribute("zooming")){C.setAttribute("zooming",!0);const{style:y}=C;y.width=y.height=""}const z=this.#s.get(C);if(this.viewport!==z){const y=this.viewport.rotation-z.rotation,s=Math.abs(y);let f=1,_=1;if(90===s||270===s){const{width:b,height:M}=this.viewport;f=M/b,_=b/M}C.style.transform=`rotate(${y}deg) scale(${f}, ${_})`}$&&this.annotationLayer&&this.#d(),j&&this.annotationEditorLayer&&this.#f(),q&&this.xfaLayer&&this.#p(),this.textLayer&&(te?(this.textLayer.hide(),this.structTreeLayer?.hide()):se&&this.#g())}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(C,$){return this.viewport.convertToPdfPoint(C,$)}#u(C,$=null){var j=this;return h(function*(){if(C===j.renderTask&&(j.renderTask=null),$ instanceof t.RenderingCancelledException)j.#r=null;else if(j.#r=$,j.renderingState=n.RenderingStates.FINISHED,j._resetZoomLayer(!0),j.#c.regularAnnotations=!C.separateAnnots,j.eventBus.dispatch("pagerendered",{source:j,pageNumber:j.id,cssTransform:!1,timestamp:performance.now(),error:j.#r}),$)throw $})()}draw(){var C=this;return h(function*(){C.renderingState!==n.RenderingStates.INITIAL&&(console.error("Must be in new state before drawing"),C.reset());const{div:$,l10n:j,pageColors:q,pdfPage:se,viewport:te}=C;if(!se)throw C.renderingState=n.RenderingStates.FINISHED,new Error("pdfPage is not loaded");C.renderingState=n.RenderingStates.RUNNING;const z=document.createElement("div");if(z.classList.add("canvasWrapper"),$.append(z),!C.textLayer&&C.#l!==n.TextLayerMode.DISABLE&&!se.isPureXfa&&(C._accessibilityManager||=new w.TextAccessibilityManager,C.textLayer=new u.TextLayerBuilder({highlighter:C._textHighlighter,accessibilityManager:C._accessibilityManager,isOffscreenCanvasSupported:C.isOffscreenCanvasSupported,enablePermissions:C.#l===n.TextLayerMode.ENABLE_PERMISSIONS}),$.append(C.textLayer.div)),!C.annotationLayer&&C.#e!==t.AnnotationMode.DISABLE){const{annotationStorage:ee,downloadManager:fe,enableScripting:re,fieldObjectsPromise:ce,hasJSActionsPromise:de,linkService:X}=C.#n();C._annotationCanvasMap||=new Map,C.annotationLayer=new l.AnnotationLayerBuilder({pageDiv:$,pdfPage:se,annotationStorage:ee,imageResourcesPath:C.imageResourcesPath,renderForms:C.#e===t.AnnotationMode.ENABLE_FORMS,linkService:X,downloadManager:fe,l10n:j,enableScripting:re,hasJSActionsPromise:de,fieldObjectsPromise:ce,annotationCanvasMap:C._annotationCanvasMap,accessibilityManager:C._accessibilityManager})}const{width:s,height:f}=te,_=document.createElement("canvas");_.setAttribute("role","presentation"),_.hidden=!0;const b=!(!q?.background||!q?.foreground);let M=ee=>{(!b||ee)&&(_.hidden=!1,M=null)};z.append(_),C.canvas=_;const O=_.getContext("2d",{alpha:!1}),I=C.outputScale=new n.OutputScale;if(0===C.maxCanvasPixels){const ee=1/C.scale;I.sx*=ee,I.sy*=ee,C.#t=!0}else if(C.maxCanvasPixels>0){const fe=Math.sqrt(C.maxCanvasPixels/(s*f));I.sx>fe||I.sy>fe?(I.sx=fe,I.sy=fe,C.#t=!0):C.#t=!1}const g=(0,n.approximateFraction)(I.sx),P=(0,n.approximateFraction)(I.sy);_.width=(0,n.roundToDivide)(s*I.sx,g[0]),_.height=(0,n.roundToDivide)(f*I.sy,P[0]);const{style:k}=_;k.width=(0,n.roundToDivide)(s,g[1])+"px",k.height=(0,n.roundToDivide)(f,P[1])+"px",C.#s.set(_,te);const B={canvasContext:O,transform:I.scaled?[I.sx,0,0,I.sy,0,0]:null,viewport:te,annotationMode:C.#e,optionalContentConfigPromise:C._optionalContentConfigPromise,annotationCanvasMap:C._annotationCanvasMap,pageColors:q},H=C.renderTask=C.pdfPage.render(B);H.onContinue=ee=>{if(M?.(!1),C.renderingQueue&&!C.renderingQueue.isHighestPriority(C))return C.renderingState=n.RenderingStates.PAUSED,void(C.resume=()=>{C.renderingState=n.RenderingStates.RUNNING,ee()});ee()};const Y=H.promise.then(h(function*(){if(M?.(!0),yield C.#u(H),C.#g(),C.annotationLayer&&(yield C.#d()),!C.annotationEditorLayer){const{annotationEditorUIManager:ee}=C.#n();if(!ee)return;C.annotationEditorLayer=new p.AnnotationEditorLayerBuilder({uiManager:ee,pageDiv:$,pdfPage:se,l10n:j,accessibilityManager:C._accessibilityManager,annotationLayer:C.annotationLayer?.annotationLayer})}C.#f()}),ee=>(ee instanceof t.RenderingCancelledException||M?.(!0),C.#u(H,ee)));if(se.isPureXfa){if(C.xfaLayer)C.xfaLayer.div&&$.append(C.xfaLayer.div);else{const{annotationStorage:ee,linkService:fe}=C.#n();C.xfaLayer=new v.XfaLayerBuilder({pageDiv:$,pdfPage:se,annotationStorage:ee,linkService:fe})}C.#p()}return $.setAttribute("data-loaded",!0),C.eventBus.dispatch("pagerender",{source:C,pageNumber:C.id}),Y})()}setPageLabel(C){this.pageLabel="string"==typeof C?C:null,null!==this.pageLabel?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}get thumbnailCanvas(){const{directDrawing:C,initialOptionalContent:$,regularAnnotations:j}=this.#c;return C&&$&&j?this.canvas:null}}},(V,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.AnnotationEditorLayerBuilder=void 0;var t=r(4),n=r(7);a.AnnotationEditorLayerBuilder=class p{#e=null;#t;constructor(e){this.pageDiv=e.pageDiv,this.pdfPage=e.pdfPage,this.accessibilityManager=e.accessibilityManager,this.l10n=e.l10n||n.NullL10n,this.annotationEditorLayer=null,this.div=null,this._cancelled=!1,this.#t=e.uiManager,this.#e=e.annotationLayer||null}render(e,i="display"){var o=this;return h(function*(){if("display"!==i||o._cancelled)return;const c=e.clone({dontFlip:!0});if(o.div)return o.annotationEditorLayer.update({viewport:c}),void o.show();const w=o.div=document.createElement("div");w.className="annotationEditorLayer",w.tabIndex=0,w.hidden=!0,w.dir=o.#t.direction,o.pageDiv.append(w),o.annotationEditorLayer=new t.AnnotationEditorLayer({uiManager:o.#t,div:w,accessibilityManager:o.accessibilityManager,pageIndex:o.pdfPage.pageNumber-1,l10n:o.l10n,viewport:c,annotationLayer:o.#e}),o.annotationEditorLayer.render({viewport:c,div:w,annotations:null,intent:i}),o.show()})()}cancel(){this._cancelled=!0,this.div&&(this.pageDiv=null,this.annotationEditorLayer.destroy(),this.div.remove())}hide(){this.div&&(this.div.hidden=!0)}show(){!this.div||this.annotationEditorLayer.isEmpty||(this.div.hidden=!1)}}},(V,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.compatibilityParams=a.OptionKind=a.AppOptions=void 0;const r=Object.create(null);a.compatibilityParams=r;{const e=navigator.userAgent||"",i=navigator.platform||"",o=navigator.maxTouchPoints||1,c=/Android/.test(e);(/\b(iPad|iPhone|iPod)(?=;)/.test(e)||"MacIntel"===i&&o>1||c)&&(r.maxCanvasPixels=5242880)}const t={VIEWER:2,API:4,WORKER:8,PREFERENCE:128};a.OptionKind=t;const n={annotationEditorMode:{value:0,kind:t.VIEWER+t.PREFERENCE},annotationMode:{value:2,kind:t.VIEWER+t.PREFERENCE},cursorToolOnLoad:{value:0,kind:t.VIEWER+t.PREFERENCE},defaultZoomDelay:{value:400,kind:t.VIEWER+t.PREFERENCE},defaultZoomValue:{value:"",kind:t.VIEWER+t.PREFERENCE},disableHistory:{value:!1,kind:t.VIEWER},disablePageLabels:{value:!1,kind:t.VIEWER+t.PREFERENCE},enablePermissions:{value:!1,kind:t.VIEWER+t.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:t.VIEWER+t.PREFERENCE},enableScripting:{value:!0,kind:t.VIEWER+t.PREFERENCE},enableStampEditor:{value:!0,kind:t.VIEWER+t.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:t.VIEWER},externalLinkTarget:{value:0,kind:t.VIEWER+t.PREFERENCE},historyUpdateUrl:{value:!1,kind:t.VIEWER+t.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:t.VIEWER+t.PREFERENCE},imageResourcesPath:{value:"./images/",kind:t.VIEWER},maxCanvasPixels:{value:16777216,kind:t.VIEWER},forcePageColors:{value:!1,kind:t.VIEWER+t.PREFERENCE},pageColorsBackground:{value:"Canvas",kind:t.VIEWER+t.PREFERENCE},pageColorsForeground:{value:"CanvasText",kind:t.VIEWER+t.PREFERENCE},pdfBugEnabled:{value:!1,kind:t.VIEWER+t.PREFERENCE},printResolution:{value:150,kind:t.VIEWER},sidebarViewOnLoad:{value:-1,kind:t.VIEWER+t.PREFERENCE},scrollModeOnLoad:{value:-1,kind:t.VIEWER+t.PREFERENCE},spreadModeOnLoad:{value:-1,kind:t.VIEWER+t.PREFERENCE},textLayerMode:{value:1,kind:t.VIEWER+t.PREFERENCE},viewerCssTheme:{value:0,kind:t.VIEWER+t.PREFERENCE},viewOnLoad:{value:0,kind:t.VIEWER+t.PREFERENCE},cMapPacked:{value:!0,kind:t.API},cMapUrl:{value:"../web/cmaps/",kind:t.API},disableAutoFetch:{value:!1,kind:t.API+t.PREFERENCE},disableFontFace:{value:!1,kind:t.API+t.PREFERENCE},disableRange:{value:!1,kind:t.API+t.PREFERENCE},disableStream:{value:!1,kind:t.API+t.PREFERENCE},docBaseUrl:{value:"",kind:t.API},enableXfa:{value:!0,kind:t.API+t.PREFERENCE},fontExtraProperties:{value:!1,kind:t.API},isEvalSupported:{value:!0,kind:t.API},isOffscreenCanvasSupported:{value:!0,kind:t.API},maxImageSize:{value:-1,kind:t.API},pdfBug:{value:!1,kind:t.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:t.API},verbosity:{value:1,kind:t.API},workerPort:{value:null,kind:t.WORKER},workerSrc:{value:"../build/pdf.worker.js",kind:t.WORKER}};n.defaultUrl={value:"compressed.tracemonkey-pldi-09.pdf",kind:t.VIEWER},n.disablePreferences={value:!1,kind:t.VIEWER},n.locale={value:navigator.language||"en-US",kind:t.VIEWER},n.sandboxBundleSrc={value:"../build/pdf.sandbox.js",kind:t.VIEWER};const p=Object.create(null);class l{constructor(){throw new Error("Cannot initialize AppOptions.")}static get(i){const o=p[i];if(void 0!==o)return o;const c=n[i];return void 0!==c?r[i]??c.value:void 0}static getAll(i=null){const o=Object.create(null);for(const c in n){const w=n[c];if(i){if(!(i&w.kind))continue;if(i===t.PREFERENCE){const u=w.value,v=typeof u;if("boolean"===v||"string"===v||"number"===v&&Number.isInteger(u)){o[c]=u;continue}throw new Error(`Invalid type for preference: ${c}`)}}const S=p[c];o[c]=void 0!==S?S:r[c]??w.value}return o}static set(i,o){p[i]=o}static setAll(i){for(const o in i)p[o]=i[o]}static remove(i){delete p[i]}}a.AppOptions=l,l._hasUserOptions=function(){return Object.keys(p).length>0}},(V,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.StructTreeLayerBuilder=void 0;var t=r(2);const n={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},p=/^H(\d+)$/;a.StructTreeLayerBuilder=class l{#e=void 0;get renderingDone(){return void 0!==this.#e}render(i){if(void 0!==this.#e)return this.#e;const o=this.#n(i);return o?.classList.add("structTree"),this.#e=o}hide(){this.#e&&!this.#e.hidden&&(this.#e.hidden=!0)}show(){this.#e?.hidden&&(this.#e.hidden=!1)}#t(i,o){const{alt:c,id:w,lang:S}=i;void 0!==c&&o.setAttribute("aria-label",(0,t.removeNullCharacters)(c)),void 0!==w&&o.setAttribute("aria-owns",w),void 0!==S&&o.setAttribute("lang",(0,t.removeNullCharacters)(S,!0))}#n(i){if(!i)return null;const o=document.createElement("span");if("role"in i){const{role:c}=i,w=c.match(p);w?(o.setAttribute("role","heading"),o.setAttribute("aria-level",w[1])):n[c]&&o.setAttribute("role",n[c])}if(this.#t(i,o),i.children)if(1===i.children.length&&"id"in i.children[0])this.#t(i.children[0],o);else for(const c of i.children)o.append(this.#n(c));return o}}},(V,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TextAccessibilityManager=void 0;var t=r(2);class n{#e=!1;#t=null;#n=new Map;#i=new Map;setTextMapping(l){this.#t=l}static#o(l,e){const i=l.getBoundingClientRect(),o=e.getBoundingClientRect();if(0===i.width&&0===i.height)return 1;if(0===o.width&&0===o.height)return-1;const S=i.y+i.height/2,d=o.y+o.height/2;return S<=o.y&&d>=i.y+i.height?-1:d<=i.y&&S>=o.y+o.height?1:i.x+i.width/2-(o.x+o.width/2)}enable(){if(this.#e)throw new Error("TextAccessibilityManager is already enabled.");if(!this.#t)throw new Error("Text divs and strings have not been set.");if(this.#e=!0,this.#t=this.#t.slice(),this.#t.sort(n.#o),this.#n.size>0){const l=this.#t;for(const[e,i]of this.#n)document.getElementById(e)?this.#r(e,l[i]):this.#n.delete(e)}for(const[l,e]of this.#i)this.addPointerInTextLayer(l,e);this.#i.clear()}disable(){this.#e&&(this.#i.clear(),this.#t=null,this.#e=!1)}removePointerInTextLayer(l){if(!this.#e)return void this.#i.delete(l);const e=this.#t;if(!e||0===e.length)return;const{id:i}=l,o=this.#n.get(i);if(void 0===o)return;const c=e[o];this.#n.delete(i);let w=c.getAttribute("aria-owns");w?.includes(i)&&(w=w.split(" ").filter(S=>S!==i).join(" "),w?c.setAttribute("aria-owns",w):(c.removeAttribute("aria-owns"),c.setAttribute("role","presentation")))}#r(l,e){const i=e.getAttribute("aria-owns");i?.includes(l)||e.setAttribute("aria-owns",i?`${i} ${l}`:l),e.removeAttribute("role")}addPointerInTextLayer(l,e){const{id:i}=l;if(!i)return null;if(!this.#e)return this.#i.set(l,e),null;e&&this.removePointerInTextLayer(l);const o=this.#t;if(!o||0===o.length)return null;const c=(0,t.binarySearchFirstItem)(o,v=>n.#o(l,v)<0),w=Math.max(0,c-1),S=o[w];this.#r(i,S),this.#n.set(i,w);const u=S.parentNode;return u?.classList.contains("markedContent")?u.id:null}moveElementInDOM(l,e,i,o){const c=this.addPointerInTextLayer(i,o);if(!l.hasChildNodes())return l.append(e),c;const w=Array.from(l.childNodes).filter(v=>v!==e);if(0===w.length)return c;const S=i||e,u=(0,t.binarySearchFirstItem)(w,v=>n.#o(S,v)<0);return 0===u?w[0].before(e):w[u-1].after(e),c}}a.TextAccessibilityManager=n},(V,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TextHighlighter=void 0,a.TextHighlighter=class r{constructor({findController:n,eventBus:p,pageIndex:l}){this.findController=n,this.matches=[],this.eventBus=p,this.pageIdx=l,this._onUpdateTextLayerMatches=null,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(n,p){this.textDivs=n,this.textContentItemsStr=p}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this._onUpdateTextLayerMatches||(this._onUpdateTextLayerMatches=n=>{(n.pageIndex===this.pageIdx||-1===n.pageIndex)&&this._updateMatches()},this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches)),this._updateMatches()}disable(){this.enabled&&(this.enabled=!1,this._onUpdateTextLayerMatches&&(this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches),this._onUpdateTextLayerMatches=null),this._updateMatches(!0))}_convertMatches(n,p){if(!n)return[];const{textContentItemsStr:l}=this;let e=0,i=0;const o=l.length-1,c=[];for(let w=0,S=n.length;w<S;w++){let u=n[w];for(;e!==o&&u>=i+l[e].length;)i+=l[e].length,e++;e===l.length&&console.error("Could not find a matching mapping");const v={begin:{divIdx:e,offset:u-i}};for(u+=p[w];e!==o&&u>i+l[e].length;)i+=l[e].length,e++;v.end={divIdx:e,offset:u-i},c.push(v)}return c}_renderMatches(n){if(0===n.length)return;const{findController:p,pageIdx:l}=this,{textContentItemsStr:e,textDivs:i}=this,o=l===p.selected.pageIdx,c=p.selected.matchIdx;let S=null;function v($,j){const q=$.divIdx;return i[q].textContent="",d(q,0,$.offset,j)}function d($,j,q,se){let te=i[$];if(te.nodeType===Node.TEXT_NODE){const s=document.createElement("span");te.before(s),s.append(te),i[$]=s,te=s}const z=e[$].substring(j,q),y=document.createTextNode(z);if(se){const s=document.createElement("span");return s.className=`${se} appended`,s.append(y),te.append(s),se.includes("selected")?s.offsetLeft:0}return te.append(y),0}let E=c,T=E+1;if(p.state.highlightAll)E=0,T=n.length;else if(!o)return;let U=-1,C=-1;for(let $=E;$<T;$++){const j=n[$],q=j.begin;if(q.divIdx===U&&q.offset===C)continue;U=q.divIdx,C=q.offset;const se=j.end,te=o&&$===c,z=te?" selected":"";let y=0;if(S&&q.divIdx===S.divIdx?d(S.divIdx,S.offset,q.offset):(null!==S&&d(S.divIdx,S.offset,undefined),v(q)),q.divIdx===se.divIdx)y=d(q.divIdx,q.offset,se.offset,"highlight"+z);else{y=d(q.divIdx,q.offset,undefined,"highlight begin"+z);for(let s=q.divIdx+1,f=se.divIdx;s<f;s++)i[s].className="highlight middle"+z;v(se,"highlight end"+z)}S=se,te&&p.scrollMatchIntoView({element:i[q.divIdx],selectedLeft:y,pageIndex:l,matchIndex:c})}S&&d(S.divIdx,S.offset,undefined)}_updateMatches(n=!1){if(!this.enabled&&!n)return;const{findController:p,matches:l,pageIdx:e}=this,{textContentItemsStr:i,textDivs:o}=this;let c=-1;for(const u of l){for(let d=Math.max(c,u.begin.divIdx),E=u.end.divIdx;d<=E;d++){const T=o[d];T.textContent=i[d],T.className=""}c=u.end.divIdx+1}p?.highlightMatches&&!n&&(this.matches=this._convertMatches(p.pageMatches[e]||null,p.pageMatchesLength[e]||null),this._renderMatches(this.matches))}}},(V,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TextLayerBuilder=void 0;var t=r(4),n=r(2);a.TextLayerBuilder=class p{#e=!1;#t=0;#n=0;#i=null;constructor({highlighter:e=null,accessibilityManager:i=null,isOffscreenCanvasSupported:o=!0,enablePermissions:c=!1}){this.textContentItemsStr=[],this.renderingDone=!1,this.textDivs=[],this.textDivProperties=new WeakMap,this.textLayerRenderTask=null,this.highlighter=e,this.accessibilityManager=i,this.isOffscreenCanvasSupported=o,this.#e=!0===c,this.div=document.createElement("div"),this.div.className="textLayer",this.hide()}#o(){this.renderingDone=!0;const e=document.createElement("div");e.className="endOfContent",this.div.append(e),this.#r()}get numTextDivs(){return this.textDivs.length}render(e){var i=this;return h(function*(){if(!i.#i)throw new Error('No "textContentSource" parameter specified.');const o=e.scale*(globalThis.devicePixelRatio||1),{rotation:c}=e;if(i.renderingDone){const w=c!==i.#t,S=o!==i.#n;return(w||S)&&(i.hide(),(0,t.updateTextLayer)({container:i.div,viewport:e,textDivs:i.textDivs,textDivProperties:i.textDivProperties,isOffscreenCanvasSupported:i.isOffscreenCanvasSupported,mustRescale:S,mustRotate:w}),i.#n=o,i.#t=c),void i.show()}i.cancel(),i.highlighter?.setTextMapping(i.textDivs,i.textContentItemsStr),i.accessibilityManager?.setTextMapping(i.textDivs),i.textLayerRenderTask=(0,t.renderTextLayer)({textContentSource:i.#i,container:i.div,viewport:e,textDivs:i.textDivs,textDivProperties:i.textDivProperties,textContentItemsStr:i.textContentItemsStr,isOffscreenCanvasSupported:i.isOffscreenCanvasSupported}),yield i.textLayerRenderTask.promise,i.#o(),i.#n=o,i.#t=c,i.show(),i.accessibilityManager?.enable()})()}hide(){this.div.hidden||(this.highlighter?.disable(),this.div.hidden=!0)}show(){this.div.hidden&&this.renderingDone&&(this.div.hidden=!1,this.highlighter?.enable())}cancel(){this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),this.highlighter?.disable(),this.accessibilityManager?.disable(),this.textContentItemsStr.length=0,this.textDivs.length=0,this.textDivProperties=new WeakMap}setTextContentSource(e){this.cancel(),this.#i=e}#r(){const{div:e}=this;e.addEventListener("mousedown",i=>{const o=e.querySelector(".endOfContent");if(!o)return;let c=i.target!==e;if(c&&="none"!==getComputedStyle(o).getPropertyValue("-moz-user-select"),c){const w=e.getBoundingClientRect(),S=Math.max(0,(i.pageY-w.top)/w.height);o.style.top=(100*S).toFixed(2)+"%"}o.classList.add("active")}),e.addEventListener("mouseup",()=>{const i=e.querySelector(".endOfContent");i&&(i.style.top="",i.classList.remove("active"))}),e.addEventListener("copy",i=>{if(!this.#e){const o=document.getSelection();i.clipboardData.setData("text/plain",(0,n.removeNullCharacters)((0,t.normalizeUnicode)(o.toString())))}i.preventDefault(),i.stopPropagation()})}}},(V,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.XfaLayerBuilder=void 0;var t=r(4);a.XfaLayerBuilder=class n{constructor({pageDiv:l,pdfPage:e,annotationStorage:i=null,linkService:o,xfaHtml:c=null}){this.pageDiv=l,this.pdfPage=e,this.annotationStorage=i,this.linkService=o,this.xfaHtml=c,this.div=null,this._cancelled=!1}render(l,e="display"){var i=this;return h(function*(){if("print"===e){const w={viewport:l.clone({dontFlip:!0}),div:i.div,xfaHtml:i.xfaHtml,annotationStorage:i.annotationStorage,linkService:i.linkService,intent:e},S=document.createElement("div");return i.pageDiv.append(S),w.div=S,t.XfaLayer.render(w)}const o=yield i.pdfPage.getXfa();if(i._cancelled||!o)return{textDivs:[]};const c={viewport:l.clone({dontFlip:!0}),div:i.div,xfaHtml:o,annotationStorage:i.annotationStorage,linkService:i.linkService,intent:e};return i.div?t.XfaLayer.update(c):(i.div=document.createElement("div"),i.pageDiv.append(i.div),c.div=i.div,t.XfaLayer.render(c))})()}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}},(V,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PDFScriptingManager=void 0;var t=r(22),n=r(23);a.PDFScriptingManager=class p extends n.PDFScriptingManager{constructor(e){e.externalServices||window.addEventListener("updatefromsandbox",i=>{e.eventBus.dispatch("updatefromsandbox",{source:window,detail:i.detail})}),e.externalServices||={createScripting:({sandboxBundleSrc:i})=>new t.GenericScripting(i)},e.docProperties||=i=>(0,t.docProperties)(i),super(e)}}},(V,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.GenericScripting=void 0,a.docProperties=function n(e){return p.apply(this,arguments)};var t=r(4);function p(){return(p=h(function*(e){const o="".split("#")[0];let{info:c,metadata:w,contentDispositionFilename:S,contentLength:u}=yield e.getMetadata();if(!u){const{length:v}=yield e.getDownloadInfo();u=v}return{...c,baseURL:o,filesize:u,filename:S||(0,t.getPdfFilenameFromUrl)(""),metadata:w?.getRaw(),authors:w?.get("dc:creator"),numPages:e.numPages,URL:""}})).apply(this,arguments)}a.GenericScripting=class l{constructor(i){this._ready=(0,t.loadScript)(i,!0).then(()=>window.pdfjsSandbox.QuickJSSandbox())}createSandbox(i){var o=this;return h(function*(){(yield o._ready).create(i)})()}dispatchEventInSandbox(i){var o=this;return h(function*(){const c=yield o._ready;setTimeout(()=>c.dispatchEvent(i),0)})()}destroySandbox(){var i=this;return h(function*(){(yield i._ready).nukeSandbox()})()}}},(V,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PDFScriptingManager=void 0;var t=r(2),n=r(4);a.PDFScriptingManager=class p{#e=null;#t=null;#n=null;#i=null;#o=null;#r=null;#a=null;#l=!1;#c=null;#s=null;#h=null;constructor({eventBus:e,sandboxBundleSrc:i=null,externalServices:o=null,docProperties:c=null}){this.#i=e,this.#c=i,this.#o=o,this.#n=c}setViewer(e){this.#a=e}setDocument(e){var i=this;return h(function*(){if(i.#r&&(yield i.#m()),i.#r=e,!e)return;const[o,c,w]=yield Promise.all([e.getFieldObjects(),e.getCalculationOrderIds(),e.getJSActions()]);if(o||w){if(e===i.#r){try{i.#s=i.#g()}catch(S){return console.error(`setDocument: "${S.message}".`),void(yield i.#m())}i._internalEvents.set("updatefromsandbox",S=>{S?.source===window&&i.#d(S.detail)}),i._internalEvents.set("dispatcheventinsandbox",S=>{i.#s?.dispatchEventInSandbox(S.detail)}),i._internalEvents.set("pagechanging",({pageNumber:S,previous:u})=>{S!==u&&(i.#p(u),i.#f(S))}),i._internalEvents.set("pagerendered",({pageNumber:S})=>{i._pageOpenPending.has(S)&&S===i.#a.currentPageNumber&&i.#f(S)}),i._internalEvents.set("pagesdestroy",h(function*(){yield i.#p(i.#a.currentPageNumber),yield i.#s?.dispatchEventInSandbox({id:"doc",name:"WillClose"}),i.#e?.resolve()}));for(const[S,u]of i._internalEvents)i.#i._on(S,u);try{const S=yield i.#n(e);if(e!==i.#r)return;yield i.#s.createSandbox({objects:o,calculationOrder:c,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:{...S,actions:w}}),i.#i.dispatch("sandboxcreated",{source:i})}catch(S){return console.error(`setDocument: "${S.message}".`),void(yield i.#m())}yield i.#s?.dispatchEventInSandbox({id:"doc",name:"Open"}),yield i.#f(i.#a.currentPageNumber,!0),Promise.resolve().then(()=>{e===i.#r&&(i.#l=!0)})}}else yield i.#m()})()}dispatchWillSave(){var e=this;return h(function*(){return e.#s?.dispatchEventInSandbox({id:"doc",name:"WillSave"})})()}dispatchDidSave(){var e=this;return h(function*(){return e.#s?.dispatchEventInSandbox({id:"doc",name:"DidSave"})})()}dispatchWillPrint(){var e=this;return h(function*(){if(e.#s){yield e.#h?.promise,e.#h=new n.PromiseCapability;try{yield e.#s.dispatchEventInSandbox({id:"doc",name:"WillPrint"})}catch(i){throw e.#h.resolve(),e.#h=null,i}yield e.#h.promise}})()}dispatchDidPrint(){var e=this;return h(function*(){return e.#s?.dispatchEventInSandbox({id:"doc",name:"DidPrint"})})()}get destroyPromise(){return this.#t?.promise||null}get ready(){return this.#l}get _internalEvents(){return(0,n.shadow)(this,"_internalEvents",new Map)}get _pageOpenPending(){return(0,n.shadow)(this,"_pageOpenPending",new Set)}get _visitedPages(){return(0,n.shadow)(this,"_visitedPages",new Map)}#d(e){var i=this;return h(function*(){const o=i.#a,c=o.isInPresentationMode||o.isChangingPresentationMode,{id:w,siblings:S,command:u,value:v}=e;if(!w){switch(u){case"clear":console.clear();break;case"error":console.error(v);break;case"layout":if(!c){const E=(0,t.apiPageLayoutToViewerModes)(v);o.spreadMode=E.spreadMode}break;case"page-num":o.currentPageNumber=v+1;break;case"print":yield o.pagesPromise,i.#i.dispatch("print",{source:i});break;case"println":console.log(v);break;case"zoom":c||(o.currentScaleValue=v);break;case"SaveAs":i.#i.dispatch("download",{source:i});break;case"FirstPage":o.currentPageNumber=1;break;case"LastPage":o.currentPageNumber=o.pagesCount;break;case"NextPage":o.nextPage();break;case"PrevPage":o.previousPage();break;case"ZoomViewIn":c||o.increaseScale();break;case"ZoomViewOut":c||o.decreaseScale();break;case"WillPrintFinished":i.#h?.resolve(),i.#h=null}return}if(c&&e.focus)return;delete e.id,delete e.siblings;const d=S?[w,...S]:[w];for(const E of d){const T=document.querySelector(`[data-element-id="${E}"]`);T?T.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:e})):i.#r?.annotationStorage.setValue(E,e)}})()}#f(e,i=!1){var o=this;return h(function*(){const c=o.#r,w=o._visitedPages;if(i&&(o.#e=new n.PromiseCapability),!o.#e)return;const S=o.#a.getPageView(e-1);if(S?.renderingState!==t.RenderingStates.FINISHED)return void o._pageOpenPending.add(e);o._pageOpenPending.delete(e);const u=h(function*(){const v=yield w.has(e)?null:S.pdfPage?.getJSActions();c===o.#r&&(yield o.#s?.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:e,actions:v}))})();w.set(e,u)})()}#p(e){var i=this;return h(function*(){const o=i.#r,c=i._visitedPages;if(!i.#e||i._pageOpenPending.has(e))return;const w=c.get(e);w&&(c.set(e,null),yield w,o===i.#r&&(yield i.#s?.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:e})))})()}#g(){if(this.#t=new n.PromiseCapability,this.#s)throw new Error("#initScripting: Scripting already exists.");return this.#o.createScripting({sandboxBundleSrc:this.#c})}#m(){var e=this;return h(function*(){if(!e.#s)return e.#r=null,void e.#t?.resolve();e.#e&&(yield Promise.race([e.#e.promise,new Promise(i=>{setTimeout(i,1e3)})]).catch(()=>{}),e.#e=null),e.#r=null;try{yield e.#s.destroySandbox()}catch{}e.#h?.reject(new Error("Scripting destroyed.")),e.#h=null;for(const[i,o]of e._internalEvents)e.#i._off(i,o);e._internalEvents.clear(),e._pageOpenPending.clear(),e._visitedPages.clear(),e.#s=null,e.#l=!1,e.#t?.resolve()})()}}},(V,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PDFSinglePageViewer=void 0;var t=r(2),n=r(25);a.PDFSinglePageViewer=class p extends n.PDFViewer{_resetView(){super._resetView(),this._scrollMode=t.ScrollMode.PAGE,this._spreadMode=t.SpreadMode.NONE}set scrollMode(e){}_updateScrollMode(){}set spreadMode(e){}_updateSpreadMode(){}}},(V,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PagesCountLimit=a.PDFViewer=a.PDFPageViewBuffer=void 0;var t=r(4),n=r(2),p=r(7),l=r(13),e=r(26),i=r(5);const c={FORCE_SCROLL_MODE_PAGE:15e3,FORCE_LAZY_PAGE_INIT:7500,PAUSE_EAGER_PAGE_INIT:250};function w(v){return Object.values(t.AnnotationEditorType).includes(v)&&v!==t.AnnotationEditorType.DISABLE}a.PagesCountLimit=c;class S{#e=new Set;#t=0;constructor(d){this.#t=d}push(d){const E=this.#e;E.has(d)&&E.delete(d),E.add(d),E.size>this.#t&&this.#n()}resize(d,E=null){this.#t=d;const T=this.#e;if(E){const U=T.size;let C=1;for(const $ of T)if(E.has($.id)&&(T.delete($),T.add($)),++C>U)break}for(;T.size>this.#t;)this.#n()}has(d){return this.#e.has(d)}[Symbol.iterator](){return this.#e.keys()}#n(){const d=this.#e.keys().next().value;d?.destroy(),this.#e.delete(d)}}a.PDFPageViewBuffer=S,a.PDFViewer=class u{#e=null;#t=null;#n=t.AnnotationEditorType.NONE;#i=null;#o=t.AnnotationMode.ENABLE_FORMS;#r=null;#a=null;#l=!1;#c=!1;#s=null;#h=!1;#d=0;#f=new ResizeObserver(this.#x.bind(this));#p=null;#g=null;#m=null;#_=n.TextLayerMode.ENABLE;constructor(d){const E="3.11.174";if(t.version!==E)throw new Error(`The API version "${t.version}" does not match the Viewer version "${E}".`);if(this.container=d.container,this.viewer=d.viewer||d.container.firstElementChild,"DIV"!==this.container?.tagName||"DIV"!==this.viewer?.tagName)throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&"absolute"!==getComputedStyle(this.container).position)throw new Error("The `container` must be absolutely positioned.");this.#f.observe(this.container),this.eventBus=d.eventBus,this.linkService=d.linkService||new i.SimpleLinkService,this.downloadManager=d.downloadManager||null,this.findController=d.findController||null,this.#t=d.altTextManager||null,this.findController&&(this.findController.onIsPageVisible=T=>this._getVisiblePages().ids.has(T)),this._scriptingManager=d.scriptingManager||null,this.#_=d.textLayerMode??n.TextLayerMode.ENABLE,this.#o=d.annotationMode??t.AnnotationMode.ENABLE_FORMS,this.#n=d.annotationEditorMode??t.AnnotationEditorType.NONE,this.imageResourcesPath=d.imageResourcesPath||"",this.enablePrintAutoRotate=d.enablePrintAutoRotate||!1,this.removePageBorders=d.removePageBorders||!1,d.useOnlyCssZoom&&(console.error("useOnlyCssZoom was removed, please use `maxCanvasPixels = 0` instead."),d.maxCanvasPixels=0),this.isOffscreenCanvasSupported=d.isOffscreenCanvasSupported??!0,this.maxCanvasPixels=d.maxCanvasPixels,this.l10n=d.l10n||p.NullL10n,this.#l=d.enablePermissions||!1,this.pageColors=d.pageColors||null,this.defaultRenderingQueue=!d.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new e.PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=d.renderingQueue,this.scroll=(0,n.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=n.PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),this.#E(),this.eventBus._on("thumbnailrendered",({pageNumber:T,pdfPage:U})=>{this.#e.has(this._pages[T-1])||U?.cleanup()})}get pagesCount(){return this._pages.length}getPageView(d){return this._pages[d]}getCachedPageViews(){return new Set(this.#e)}get pageViewsReady(){return this._pagesCapability.settled&&this._pages.every(d=>d?.pdfPage)}get renderForms(){return this.#o===t.AnnotationMode.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(d){if(!Number.isInteger(d))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(d,!0)||console.error(`currentPageNumber: "${d}" is not a valid page.`))}_setCurrentPageNumber(d,E=!1){if(this._currentPageNumber===d)return E&&this.#C(),!0;if(!(0<d&&d<=this.pagesCount))return!1;const T=this._currentPageNumber;return this._currentPageNumber=d,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:d,pageLabel:this._pageLabels?.[d-1]??null,previous:T}),E&&this.#C(),!0}get currentPageLabel(){return this._pageLabels?.[this._currentPageNumber-1]??null}set currentPageLabel(d){if(!this.pdfDocument)return;let E=0|d;if(this._pageLabels){const T=this._pageLabels.indexOf(d);T>=0&&(E=T+1)}this._setCurrentPageNumber(E,!0)||console.error(`currentPageLabel: "${d}" is not a valid page.`)}get currentScale(){return this._currentScale!==n.UNKNOWN_SCALE?this._currentScale:n.DEFAULT_SCALE}set currentScale(d){if(isNaN(d))throw new Error("Invalid numeric scale.");this.pdfDocument&&this.#v(d,{noScroll:!1})}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(d){this.pdfDocument&&this.#v(d,{noScroll:!1})}get pagesRotation(){return this._pagesRotation}set pagesRotation(d){if(!(0,n.isValidRotation)(d))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument||((d%=360)<0&&(d+=360),this._pagesRotation===d))return;this._pagesRotation=d;const E=this._currentPageNumber;this.refresh(!0,{rotation:d}),this._currentScaleValue&&this.#v(this._currentScaleValue,{noScroll:!0}),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:d,pageNumber:E}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}#u(){const d=this;return{get annotationEditorUIManager(){return d.#i},get annotationStorage(){return d.pdfDocument?.annotationStorage},get downloadManager(){return d.downloadManager},get enableScripting(){return!!d._scriptingManager},get fieldObjectsPromise(){return d.pdfDocument?.getFieldObjects()},get findController(){return d.findController},get hasJSActionsPromise(){return d.pdfDocument?.hasJSActions()},get linkService(){return d.linkService}}}#b(d){const E={annotationEditorMode:this.#n,annotationMode:this.#o,textLayerMode:this.#_};return d&&(!d.includes(t.PermissionFlag.COPY)&&this.#_===n.TextLayerMode.ENABLE&&(E.textLayerMode=n.TextLayerMode.ENABLE_PERMISSIONS),d.includes(t.PermissionFlag.MODIFY_CONTENTS)||(E.annotationEditorMode=t.AnnotationEditorType.DISABLE),!d.includes(t.PermissionFlag.MODIFY_ANNOTATIONS)&&!d.includes(t.PermissionFlag.FILL_INTERACTIVE_FORMS)&&this.#o===t.AnnotationMode.ENABLE_FORMS&&(E.annotationMode=t.AnnotationMode.ENABLE)),E}#w(){if("hidden"===document.visibilityState||!this.container.offsetParent||0===this._getVisiblePages().views.length)return Promise.resolve();const d=new Promise(E=>{this.#g=()=>{"hidden"===document.visibilityState&&(E(),document.removeEventListener("visibilitychange",this.#g),this.#g=null)},document.addEventListener("visibilitychange",this.#g)});return Promise.race([this._onePageRenderedCapability.promise,d])}getAllText(){var d=this;return h(function*(){const E=[],T=[];for(let U=1,C=d.pdfDocument.numPages;U<=C;++U){if(d.#h)return null;T.length=0;const $=yield d.pdfDocument.getPage(U),{items:j}=yield $.getTextContent();for(const q of j)q.str&&T.push(q.str),q.hasEOL&&T.push("\n");E.push((0,n.removeNullCharacters)(T.join("")))}return E.join("\n")})()}#A(d,E){const T=document.getSelection(),{focusNode:U,anchorNode:C}=T;if(C&&U&&T.containsNode(this.#s)){if(this.#c||d===n.TextLayerMode.ENABLE_PERMISSIONS)return E.preventDefault(),void E.stopPropagation();this.#c=!0;const $=this.container.style.cursor;this.container.style.cursor="wait";const j=q=>this.#h="Escape"===q.key;window.addEventListener("keydown",j),this.getAllText().then(function(){var q=h(function*(se){null!==se&&(yield navigator.clipboard.writeText(se))});return function(se){return q.apply(this,arguments)}}()).catch(q=>{console.warn(`Something goes wrong when extracting the text: ${q.message}`)}).finally(()=>{this.#c=!1,this.#h=!1,window.removeEventListener("keydown",j),this.container.style.cursor=$}),E.preventDefault(),E.stopPropagation()}}setDocument(d){var E=this;if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),this.findController?.setDocument(null),this._scriptingManager?.setDocument(null),this.#i&&(this.#i.destroy(),this.#i=null)),this.pdfDocument=d,!d)return;const T=d.numPages,U=d.getPage(1),C=d.getOptionalContentConfig(),$=this.#l?d.getPermissions():Promise.resolve();if(T>c.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");const j=this._scrollMode=n.ScrollMode.PAGE;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:j})}this._pagesCapability.promise.then(()=>{this.eventBus.dispatch("pagesloaded",{source:this,pagesCount:T})},()=>{}),this._onBeforeDraw=j=>{const q=this._pages[j.pageNumber-1];q&&this.#e.push(q)},this.eventBus._on("pagerender",this._onBeforeDraw),this._onAfterDraw=j=>{j.cssTransform||this._onePageRenderedCapability.settled||(this._onePageRenderedCapability.resolve({timestamp:j.timestamp}),this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null,this.#g&&(document.removeEventListener("visibilitychange",this.#g),this.#g=null))},this.eventBus._on("pagerendered",this._onAfterDraw),Promise.all([U,$]).then(([j,q])=>{if(d!==this.pdfDocument)return;this._firstPageCapability.resolve(j),this._optionalContentConfigPromise=C;const{annotationEditorMode:se,annotationMode:te,textLayerMode:z}=this.#b(q);if(z!==n.TextLayerMode.DISABLE){const M=this.#s=document.createElement("div");M.id="hiddenCopyElement",this.viewer.before(M)}if(se!==t.AnnotationEditorType.DISABLE){const M=se;d.isPureXfa?console.warn("Warning: XFA-editing is not implemented."):w(M)?(this.#i=new t.AnnotationEditorUIManager(this.container,this.viewer,this.#t,this.eventBus,d,this.pageColors),M!==t.AnnotationEditorType.NONE&&this.#i.updateMode(M)):console.error(`Invalid AnnotationEditor mode: ${M}`)}const y=this.#u.bind(this),s=this._scrollMode===n.ScrollMode.PAGE?null:this.viewer,f=this.currentScale,_=j.getViewport({scale:f*t.PixelsPerInch.PDF_TO_CSS_UNITS});this.viewer.style.setProperty("--scale-factor",_.scale),("CanvasText"===this.pageColors?.foreground||"Canvas"===this.pageColors?.background)&&this.viewer.style.setProperty("--hcm-highligh-filter",d.filterFactory.addHighlightHCMFilter("CanvasText","Canvas","HighlightText","Highlight"));for(let M=1;M<=T;++M){const O=new l.PDFPageView({container:s,eventBus:this.eventBus,id:M,scale:f,defaultViewport:_.clone(),optionalContentConfigPromise:C,renderingQueue:this.renderingQueue,textLayerMode:z,annotationMode:te,imageResourcesPath:this.imageResourcesPath,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported,maxCanvasPixels:this.maxCanvasPixels,pageColors:this.pageColors,l10n:this.l10n,layerProperties:y});this._pages.push(O)}const b=this._pages[0];b&&(b.setPdfPage(j),this.linkService.cachePageRef(1,j.ref)),this._scrollMode===n.ScrollMode.PAGE?this.#y():this._spreadMode!==n.SpreadMode.NONE&&this._updateSpreadMode(),this.#w().then(h(function*(){if(E.findController?.setDocument(d),E._scriptingManager?.setDocument(d),E.#s&&(E.#a=E.#A.bind(E,z),document.addEventListener("copy",E.#a)),E.#i&&E.eventBus.dispatch("annotationeditormodechanged",{source:E,mode:E.#n}),d.loadingParams.disableAutoFetch||T>c.FORCE_LAZY_PAGE_INIT)return void E._pagesCapability.resolve();let M=T-1;if(M<=0)E._pagesCapability.resolve();else for(let O=2;O<=T;++O){const I=d.getPage(O).then(g=>{const P=E._pages[O-1];P.pdfPage||P.setPdfPage(g),E.linkService.cachePageRef(O,g.ref),0==--M&&E._pagesCapability.resolve()},g=>{console.error(`Unable to get page ${O} to initialize viewer`,g),0==--M&&E._pagesCapability.resolve()});O%c.PAUSE_EAGER_PAGE_INIT==0&&(yield I)}})),this.eventBus.dispatch("pagesinit",{source:this}),d.getMetadata().then(({info:M})=>{d===this.pdfDocument&&M.Language&&(this.viewer.lang=M.Language)}),this.defaultRenderingQueue&&this.update()}).catch(j=>{console.error("Unable to initialize viewer",j),this._pagesCapability.reject(j)})}setPageLabels(d){if(this.pdfDocument){d?Array.isArray(d)&&this.pdfDocument.numPages===d.length?this._pageLabels=d:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let E=0,T=this._pages.length;E<T;E++)this._pages[E].setPageLabel(this._pageLabels?.[E]??null)}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=n.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,this.#e=new S(10),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=new t.PromiseCapability,this._onePageRenderedCapability=new t.PromiseCapability,this._pagesCapability=new t.PromiseCapability,this._scrollMode=n.ScrollMode.VERTICAL,this._previousScrollMode=n.ScrollMode.UNKNOWN,this._spreadMode=n.SpreadMode.NONE,this.#p={previousPageNumber:1,scrollDown:!0,pages:[]},this._onBeforeDraw&&(this.eventBus._off("pagerender",this._onBeforeDraw),this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),this.#g&&(document.removeEventListener("visibilitychange",this.#g),this.#g=null),this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),this.#s&&(document.removeEventListener("copy",this.#a),this.#a=null,this.#s.remove(),this.#s=null)}#y(){if(this._scrollMode!==n.ScrollMode.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");const d=this._currentPageNumber,E=this.#p,T=this.viewer;if(T.textContent="",E.pages.length=0,this._spreadMode!==n.SpreadMode.NONE||this.isInPresentationMode){const U=new Set,C=this._spreadMode-1;-1===C?U.add(d-1):d%2!==C?(U.add(d-1),U.add(d)):(U.add(d-2),U.add(d-1));const $=document.createElement("div");if($.className="spread",this.isInPresentationMode){const j=document.createElement("div");j.className="dummyPage",$.append(j)}for(const j of U){const q=this._pages[j];q&&($.append(q.div),E.pages.push(q))}T.append($)}else{const U=this._pages[d-1];T.append(U.div),E.pages.push(U)}E.scrollDown=d>=E.previousPageNumber,E.previousPageNumber=d}_scrollUpdate(){0!==this.pagesCount&&this.update()}#S(d,E=null){const{div:T,id:U}=d;if(this._currentPageNumber!==U&&this._setCurrentPageNumber(U),this._scrollMode===n.ScrollMode.PAGE&&(this.#y(),this.update()),!E&&!this.isInPresentationMode){const C=T.offsetLeft+T.clientLeft,$=C+T.clientWidth,{scrollLeft:j,clientWidth:q}=this.container;(this._scrollMode===n.ScrollMode.HORIZONTAL||C<j||$>j+q)&&(E={left:0,top:0})}(0,n.scrollIntoView)(T,E),!this._currentScaleValue&&this._location&&(this._location=null)}#I(d){return d===this._currentScale||Math.abs(d-this._currentScale)<1e-15}#R(d,E,{noScroll:T=!1,preset:U=!1,drawingDelay:C=-1}){if(this._currentScaleValue=E.toString(),this.#I(d))return void(U&&this.eventBus.dispatch("scalechanging",{source:this,scale:d,presetValue:E}));this.viewer.style.setProperty("--scale-factor",d*t.PixelsPerInch.PDF_TO_CSS_UNITS);const $=C>=0&&C<1e3;if(this.refresh(!0,{scale:d,drawingDelay:$?C:-1}),$&&(this.#m=setTimeout(()=>{this.#m=null,this.refresh()},C)),this._currentScale=d,!T){let q,j=this._currentPageNumber;this._location&&!(this.isInPresentationMode||this.isChangingPresentationMode)&&(j=this._location.pageNumber,q=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:j,destArray:q,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:d,presetValue:U?E:void 0}),this.defaultRenderingQueue&&this.update()}get#F(){return this._spreadMode!==n.SpreadMode.NONE&&this._scrollMode!==n.ScrollMode.HORIZONTAL?2:1}#v(d,E){let T=parseFloat(d);if(T>0)E.preset=!1,this.#R(T,d,E);else{const U=this._pages[this._currentPageNumber-1];if(!U)return;let C=n.SCROLLBAR_PADDING,$=n.VERTICAL_PADDING;this.isInPresentationMode?(C=$=4,this._spreadMode!==n.SpreadMode.NONE&&(C*=2)):this.removePageBorders?C=$=0:this._scrollMode===n.ScrollMode.HORIZONTAL&&([C,$]=[$,C]);const j=(this.container.clientWidth-C)/U.width*U.scale/this.#F,q=(this.container.clientHeight-$)/U.height*U.scale;switch(d){case"page-actual":T=1;break;case"page-width":T=j;break;case"page-height":T=q;break;case"page-fit":T=Math.min(j,q);break;case"auto":const se=(0,n.isPortraitOrientation)(U)?j:Math.min(q,j);T=Math.min(n.MAX_AUTO_SCALE,se);break;default:return void console.error(`#setScale: "${d}" is an unknown zoom value.`)}E.preset=!0,this.#R(T,d,E)}}#C(){const d=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&this.#v(this._currentScaleValue,{noScroll:!0}),this.#S(d)}pageLabelToPageNumber(d){if(!this._pageLabels)return null;const E=this._pageLabels.indexOf(d);return E<0?null:E+1}scrollPageIntoView({pageNumber:d,destArray:E=null,allowNegativeOffset:T=!1,ignoreDestinationZoom:U=!1}){if(!this.pdfDocument)return;const C=Number.isInteger(d)&&this._pages[d-1];if(!C)return void console.error(`scrollPageIntoView: "${d}" is not a valid pageNumber parameter.`);if(this.isInPresentationMode||!E)return void this._setCurrentPageNumber(d,!0);let te,z,$=0,j=0,q=0,se=0;const y=C.rotation%180!=0,s=(y?C.height:C.width)/C.scale/t.PixelsPerInch.PDF_TO_CSS_UNITS,f=(y?C.width:C.height)/C.scale/t.PixelsPerInch.PDF_TO_CSS_UNITS;let _=0;switch(E[1].name){case"XYZ":$=E[2],j=E[3],_=E[4],$=null!==$?$:0,j=null!==j?j:f;break;case"Fit":case"FitB":_="page-fit";break;case"FitH":case"FitBH":j=E[2],_="page-width",null===j&&this._location?($=this._location.left,j=this._location.top):("number"!=typeof j||j<0)&&(j=f);break;case"FitV":case"FitBV":$=E[2],q=s,se=f,_="page-height";break;case"FitR":$=E[2],j=E[3],q=E[4]-$,se=E[5]-j;let I=n.SCROLLBAR_PADDING,g=n.VERTICAL_PADDING;this.removePageBorders&&(I=g=0),te=(this.container.clientWidth-I)/q/t.PixelsPerInch.PDF_TO_CSS_UNITS,z=(this.container.clientHeight-g)/se/t.PixelsPerInch.PDF_TO_CSS_UNITS,_=Math.min(Math.abs(te),Math.abs(z));break;default:return void console.error(`scrollPageIntoView: "${E[1].name}" is not a valid destination type.`)}if(U||(_&&_!==this._currentScale?this.currentScaleValue=_:this._currentScale===n.UNKNOWN_SCALE&&(this.currentScaleValue=n.DEFAULT_SCALE_VALUE)),"page-fit"===_&&!E[4])return void this.#S(C);const b=[C.viewport.convertToViewportPoint($,j),C.viewport.convertToViewportPoint($+q,j+se)];let M=Math.min(b[0][0],b[1][0]),O=Math.min(b[0][1],b[1][1]);T||(M=Math.max(M,0),O=Math.max(O,0)),this.#S(C,{left:M,top:O})}_updateLocation(d){const E=this._currentScale,T=this._currentScaleValue,U=parseFloat(T)===E?Math.round(1e4*E)/100:T,C=d.id,j=this.container,q=this._pages[C-1].getPagePoint(j.scrollLeft-d.x,j.scrollTop-d.y),se=Math.round(q[0]),te=Math.round(q[1]);let z=`#page=${C}`;this.isInPresentationMode||(z+=`&zoom=${U},${se},${te}`),this._location={pageNumber:C,scale:U,top:te,left:se,rotation:this._pagesRotation,pdfOpenParams:z}}update(){const d=this._getVisiblePages(),E=d.views,T=E.length;if(0===T)return;const U=Math.max(10,2*T+1);this.#e.resize(U,d.ids),this.renderingQueue.renderHighestPriority(d);const C=this._spreadMode===n.SpreadMode.NONE&&(this._scrollMode===n.ScrollMode.PAGE||this._scrollMode===n.ScrollMode.VERTICAL),$=this._currentPageNumber;let j=!1;for(const q of E){if(q.percent<100)break;if(q.id===$&&C){j=!0;break}}this._setCurrentPageNumber(j?$:E[0].id),this._updateLocation(d.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}containsElement(d){return this.container.contains(d)}focus(){this.container.focus()}get _isContainerRtl(){return"rtl"===getComputedStyle(this.container).direction}get isInPresentationMode(){return this.presentationModeState===n.PresentationModeState.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===n.PresentationModeState.CHANGING}get isHorizontalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){const d=this._scrollMode===n.ScrollMode.PAGE?this.#p.pages:this._pages,E=this._scrollMode===n.ScrollMode.HORIZONTAL;return(0,n.getVisibleElements)({scrollEl:this.container,views:d,sortByVisibility:!0,horizontal:E,rtl:E&&this._isContainerRtl})}cleanup(){for(const d of this._pages)d.renderingState!==n.RenderingStates.FINISHED&&d.reset()}_cancelRendering(){for(const d of this._pages)d.cancelRendering()}#T(d){var E=this;return h(function*(){if(d.pdfPage)return d.pdfPage;try{const T=yield E.pdfDocument.getPage(d.id);return d.pdfPage||d.setPdfPage(T),E.linkService._cachedPageNumber?.(T.ref)||E.linkService.cachePageRef(d.id,T.ref),T}catch(T){return console.error("Unable to get page for page view",T),null}})()}#k(d){if(1===d.first?.id)return!0;if(d.last?.id===this.pagesCount)return!1;switch(this._scrollMode){case n.ScrollMode.PAGE:return this.#p.scrollDown;case n.ScrollMode.HORIZONTAL:return this.scroll.right}return this.scroll.down}forceRendering(d){const E=d||this._getVisiblePages(),T=this.#k(E),C=this.renderingQueue.getHighestPriority(E,this._pages,T,this._spreadMode!==n.SpreadMode.NONE&&this._scrollMode!==n.ScrollMode.HORIZONTAL);return!!C&&(this.#T(C).then(()=>{this.renderingQueue.renderView(C)}),!0)}get hasEqualPageSizes(){const d=this._pages[0];for(let E=1,T=this._pages.length;E<T;++E){const U=this._pages[E];if(U.width!==d.width||U.height!==d.height)return!1}return!0}getPagesOverview(){let d;return this._pages.map(E=>{const T=E.pdfPage.getViewport({scale:1}),U=(0,n.isPortraitOrientation)(T);if(void 0===d)d=U;else if(this.enablePrintAutoRotate&&U!==d)return{width:T.height,height:T.width,rotation:(T.rotation-90)%360};return{width:T.width,height:T.height,rotation:T.rotation}})}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:(console.error("optionalContentConfigPromise: Not initialized yet."),this.pdfDocument.getOptionalContentConfig()):Promise.resolve(null)}set optionalContentConfigPromise(d){if(!(d instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${d}`);this.pdfDocument&&this._optionalContentConfigPromise&&(this._optionalContentConfigPromise=d,this.refresh(!1,{optionalContentConfigPromise:d}),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:d}))}get scrollMode(){return this._scrollMode}set scrollMode(d){if(this._scrollMode!==d){if(!(0,n.isValidScrollMode)(d))throw new Error(`Invalid scroll mode: ${d}`);this.pagesCount>c.FORCE_SCROLL_MODE_PAGE||(this._previousScrollMode=this._scrollMode,this._scrollMode=d,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:d}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(d=null){const E=this._scrollMode,T=this.viewer;T.classList.toggle("scrollHorizontal",E===n.ScrollMode.HORIZONTAL),T.classList.toggle("scrollWrapped",E===n.ScrollMode.WRAPPED),this.pdfDocument&&d&&(E===n.ScrollMode.PAGE?this.#y():this._previousScrollMode===n.ScrollMode.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&this.#v(this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(d,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(d){if(this._spreadMode!==d){if(!(0,n.isValidSpreadMode)(d))throw new Error(`Invalid spread mode: ${d}`);this._spreadMode=d,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:d}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(d=null){if(!this.pdfDocument)return;const E=this.viewer,T=this._pages;if(this._scrollMode===n.ScrollMode.PAGE)this.#y();else if(E.textContent="",this._spreadMode===n.SpreadMode.NONE)for(const U of this._pages)E.append(U.div);else{const U=this._spreadMode-1;let C=null;for(let $=0,j=T.length;$<j;++$)null===C?(C=document.createElement("div"),C.className="spread",E.append(C)):$%2===U&&(C=C.cloneNode(!1),E.append(C)),C.append(T[$].div)}d&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&this.#v(this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(d,!0),this.update())}_getPageAdvance(d,E=!1){switch(this._scrollMode){case n.ScrollMode.WRAPPED:{const{views:T}=this._getVisiblePages(),U=new Map;for(const{id:C,y:$,percent:j,widthPercent:q}of T){if(0===j||q<100)continue;let se=U.get($);se||U.set($,se||=[]),se.push(C)}for(const C of U.values()){const $=C.indexOf(d);if(-1===$)continue;const j=C.length;if(1===j)break;if(E)for(let q=$-1,se=0;q>=se;q--){const z=C[q+1]-1;if(C[q]<z)return d-z}else for(let q=$+1,se=j;q<se;q++){const z=C[q-1]+1;if(C[q]>z)return z-d}if(E){const q=C[0];if(q<d)return d-q+1}else{const q=C[j-1];if(q>d)return q-d+1}break}break}case n.ScrollMode.HORIZONTAL:break;case n.ScrollMode.PAGE:case n.ScrollMode.VERTICAL:{if(this._spreadMode===n.SpreadMode.NONE)break;const T=this._spreadMode-1;if(E&&d%2!==T)break;if(!E&&d%2===T)break;const{views:U}=this._getVisiblePages(),C=E?d-1:d+1;for(const{id:$,percent:j,widthPercent:q}of U)if($===C){if(j>0&&100===q)return 2;break}break}}return 1}nextPage(){const d=this._currentPageNumber,E=this.pagesCount;if(d>=E)return!1;const T=this._getPageAdvance(d,!1)||1;return this.currentPageNumber=Math.min(d+T,E),!0}previousPage(){const d=this._currentPageNumber;if(d<=1)return!1;const E=this._getPageAdvance(d,!0)||1;return this.currentPageNumber=Math.max(d-E,1),!0}increaseScale({drawingDelay:d,scaleFactor:E,steps:T}={}){if(!this.pdfDocument)return;let U=this._currentScale;if(E>1)U=Math.round(U*E*100)/100;else{T??=1;do{U=Math.ceil(10*(U*n.DEFAULT_SCALE_DELTA).toFixed(2))/10}while(--T>0&&U<n.MAX_SCALE)}this.#v(Math.min(n.MAX_SCALE,U),{noScroll:!1,drawingDelay:d})}decreaseScale({drawingDelay:d,scaleFactor:E,steps:T}={}){if(!this.pdfDocument)return;let U=this._currentScale;if(E>0&&E<1)U=Math.round(U*E*100)/100;else{T??=1;do{U=Math.floor(10*(U/n.DEFAULT_SCALE_DELTA).toFixed(2))/10}while(--T>0&&U>n.MIN_SCALE)}this.#v(Math.max(n.MIN_SCALE,U),{noScroll:!1,drawingDelay:d})}#E(d=this.container.clientHeight){d!==this.#d&&(this.#d=d,n.docStyle.setProperty("--viewer-container-height",`${d}px`))}#x(d){for(const E of d)if(E.target===this.container){this.#E(Math.floor(E.borderBoxSize[0].blockSize)),this.#r=null;break}}get containerTopLeft(){return this.#r||=[this.container.offsetTop,this.container.offsetLeft]}get annotationEditorMode(){return this.#i?this.#n:t.AnnotationEditorType.DISABLE}set annotationEditorMode({mode:d,editId:E=null}){if(!this.#i)throw new Error("The AnnotationEditor is not enabled.");if(this.#n!==d){if(!w(d))throw new Error(`Invalid AnnotationEditor mode: ${d}`);this.pdfDocument&&(this.#n=d,this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:d}),this.#i.updateMode(d,E))}}set annotationEditorParams({type:d,value:E}){if(!this.#i)throw new Error("The AnnotationEditor is not enabled.");this.#i.updateParams(d,E)}refresh(d=!1,E=Object.create(null)){if(this.pdfDocument){for(const T of this._pages)T.update(E);null!==this.#m&&(clearTimeout(this.#m),this.#m=null),d||this.update()}}}},(V,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PDFRenderingQueue=void 0;var t=r(4),n=r(2);a.PDFRenderingQueue=class l{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1,Object.defineProperty(this,"hasViewer",{value:()=>!!this.pdfViewer})}setViewer(i){this.pdfViewer=i}setThumbnailViewer(i){this.pdfThumbnailViewer=i}isHighestPriority(i){return this.highestPriorityPage===i.renderingId}renderHighestPriority(i){this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!this.pdfViewer.forceRendering(i)&&(this.isThumbnailViewEnabled&&this.pdfThumbnailViewer?.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),3e4)))}getHighestPriority(i,o,c,w=!1){const S=i.views,u=S.length;if(0===u)return null;for(let U=0;U<u;U++){const C=S[U].view;if(!this.isViewFinished(C))return C}const v=i.first.id,d=i.last.id;if(d-v+1>u){const U=i.ids;for(let C=1,$=d-v;C<$;C++){const j=c?v+C:d-C;if(U.has(j))continue;const q=o[j-1];if(!this.isViewFinished(q))return q}}let E=c?d:v-2,T=o[E];return T&&!this.isViewFinished(T)||w&&(E+=c?1:-1,T=o[E],T&&!this.isViewFinished(T))?T:null}isViewFinished(i){return i.renderingState===n.RenderingStates.FINISHED}renderView(i){switch(i.renderingState){case n.RenderingStates.FINISHED:return!1;case n.RenderingStates.PAUSED:this.highestPriorityPage=i.renderingId,i.resume();break;case n.RenderingStates.RUNNING:this.highestPriorityPage=i.renderingId;break;case n.RenderingStates.INITIAL:this.highestPriorityPage=i.renderingId,i.draw().finally(()=>{this.renderHighestPriority()}).catch(o=>{o instanceof t.RenderingCancelledException||console.error(`renderView: "${o}"`)})}return!0}}}],G={};function N(V){var a=G[V];if(void 0!==a)return a.exports;var r=G[V]={exports:{}};return L[V](r,r.exports,N),r.exports}var Z={};return(()=>{var V=Z;Object.defineProperty(V,"__esModule",{value:!0}),Object.defineProperty(V,"AnnotationLayerBuilder",{enumerable:!0,get:function(){return n.AnnotationLayerBuilder}}),Object.defineProperty(V,"DownloadManager",{enumerable:!0,get:function(){return p.DownloadManager}}),Object.defineProperty(V,"EventBus",{enumerable:!0,get:function(){return l.EventBus}}),Object.defineProperty(V,"FindState",{enumerable:!0,get:function(){return a.FindState}}),Object.defineProperty(V,"GenericL10n",{enumerable:!0,get:function(){return e.GenericL10n}}),Object.defineProperty(V,"LinkTarget",{enumerable:!0,get:function(){return r.LinkTarget}}),Object.defineProperty(V,"NullL10n",{enumerable:!0,get:function(){return i.NullL10n}}),Object.defineProperty(V,"PDFFindController",{enumerable:!0,get:function(){return a.PDFFindController}}),Object.defineProperty(V,"PDFHistory",{enumerable:!0,get:function(){return o.PDFHistory}}),Object.defineProperty(V,"PDFLinkService",{enumerable:!0,get:function(){return r.PDFLinkService}}),Object.defineProperty(V,"PDFPageView",{enumerable:!0,get:function(){return c.PDFPageView}}),Object.defineProperty(V,"PDFScriptingManager",{enumerable:!0,get:function(){return w.PDFScriptingManager}}),Object.defineProperty(V,"PDFSinglePageViewer",{enumerable:!0,get:function(){return S.PDFSinglePageViewer}}),Object.defineProperty(V,"PDFViewer",{enumerable:!0,get:function(){return u.PDFViewer}}),Object.defineProperty(V,"ProgressBar",{enumerable:!0,get:function(){return t.ProgressBar}}),Object.defineProperty(V,"RenderingStates",{enumerable:!0,get:function(){return t.RenderingStates}}),Object.defineProperty(V,"ScrollMode",{enumerable:!0,get:function(){return t.ScrollMode}}),Object.defineProperty(V,"SimpleLinkService",{enumerable:!0,get:function(){return r.SimpleLinkService}}),Object.defineProperty(V,"SpreadMode",{enumerable:!0,get:function(){return t.SpreadMode}}),Object.defineProperty(V,"StructTreeLayerBuilder",{enumerable:!0,get:function(){return v.StructTreeLayerBuilder}}),Object.defineProperty(V,"TextLayerBuilder",{enumerable:!0,get:function(){return d.TextLayerBuilder}}),Object.defineProperty(V,"XfaLayerBuilder",{enumerable:!0,get:function(){return E.XfaLayerBuilder}}),Object.defineProperty(V,"parseQueryString",{enumerable:!0,get:function(){return t.parseQueryString}});var a=N(1),r=N(5),t=N(2),n=N(6),p=N(8),l=N(9),e=N(10),i=N(7),o=N(12),c=N(13),w=N(21),S=N(24),u=N(25),v=N(16),d=N(19),E=N(20)})(),Z})(),J.exports=G.pdfjsViewer=N()},7640:()=>{},3237:()=>{},7492:()=>{},1815:()=>{},6671:()=>{},2787:()=>{},9293:J=>{function m(h,L,G,N,Z,V,a){try{var r=h[V](a),t=r.value}catch(n){return void G(n)}r.done?L(t):Promise.resolve(t).then(N,Z)}J.exports=function D(h){return function(){var L=this,G=arguments;return new Promise(function(N,Z){var V=h.apply(L,G);function a(t){m(V,N,Z,a,r,"next",t)}function r(t){m(V,N,Z,a,r,"throw",t)}a(void 0)})}},J.exports.__esModule=!0,J.exports.default=J.exports}}]);